"use strict";(self.webpackChunkdocument_management_system_lw_frontend=self.webpackChunkdocument_management_system_lw_frontend||[]).push([[939],{3939:(_a,jt,m)=>{m.r(jt),m.d(jt,{DocumentManagemntRoutes:()=>va});var X=m(177),H=m(5596),D=m(9159),mt=m(7722),he=m(9213),pt=m(9115),_e=m(8834),be=m(6695),Me=m(450),me=m(4912),gt=m(2529),ne=m(2168),bi=m(6633),Ue=m(1626),e=m(3953),Ci=m(7843);let pe=(()=>{class i{constructor(t){this.apiService=t}getOneCase(t){return this.apiService.get(`/cases/find/${t}`)}getAllCases(t){return this.apiService.get(`/cases/?case_id=${t}`)}getAllCasesWithServerSidePagination(t,a,s,r){const o=(new Ue.Nl).set("page",t.toString()).set("limit",a.toString()).set("sortBy",s).set("order",r);return this.apiService.get("/cases",o)}getAllowedUsersByDocId(t){return this.apiService.get(`/documents/${t}/users`)}getAllUsers(){return this.apiService.get("/users")}createNewCase(t,a){return this.apiService.post("/cases",t,a)}updateCase(t,a,s){return this.apiService.put(`/cases/${a}`,t,s)}removeCase(t){return this.apiService.delete(`/cases/${t}`)}removeDocumentCasecase(t){return this.apiService.delete(`/documents/${t}`)}fileBatchUpload(t,a){const s={headers:new Ue.Lr({Accept:"application/json"}),reportProgress:!0,observe:"events"};return this.apiService.post(`/documents/batch-upload/${t}`,a,s)}fileBatchDownload(t,a){return this.apiService.post("/documents/batch-download/",{case_id:t,fileKeys:a})}singleFileDownload(t,a){return this.apiService.post("/documents/single-download",{case_id:t,fileUrl:a},{responseType:"blob"})}updateDocumentAccess(t,a,s){return this.apiService.put("/documents/assign-access",{documentId:a,userIds:t},s)}static#e=this.\u0275fac=function(a){return new(a||i)(e.KVO(Ci.Z))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac})}return i})();var Si=m(2042),Ot=m(9172),Lt=m(5558),zt=m(6354),$e=m(9437),vt=m(7224),k=m(5505),yi=m(8149),Ve=m(7418),Ce=m(4006),Be=m(9088),Ye=m(4535),ge=m(2102),Xe=m(9631);const Di=()=>[5,10,25,100];function wi(i,n){if(1&i){const t=e.RV6();e.j41(0,"mat-form-field",11)(1,"input",12),e.bIt("keyup",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.applyFilter(s))}),e.k0s()()}}function Ti(i,n){1&i&&e.nrm(0,"app-content-loader",13),2&i&&e.Y8G("loaderType","button")}function ki(i,n){1&i&&(e.j41(0,"button",14),e.nrm(1,"i-tabler",15),e.k0s()),2&i&&e.Y8G("routerLink","/document-managemnt/single-case")}function Ii(i,n){1&i&&(e.j41(0,"th",26),e.EFF(1," Case ID "),e.k0s())}function Ai(i,n){if(1&i&&(e.j41(0,"td",27)(1,"div",28)(2,"div",29)(3,"h6",30),e.EFF(4),e.k0s()()()()),2&i){const t=n.$implicit;e.R7$(4),e.SpI(" ",t.case_id," ")}}function xi(i,n){1&i&&(e.j41(0,"th",26),e.EFF(1," Documents "),e.k0s())}function Fi(i,n){if(1&i&&(e.j41(0,"td",31),e.nrm(1,"i-tabler",32),e.EFF(2),e.k0s()),2&i){const t=n.$implicit;e.R7$(2),e.SpI(" ",t.documents.length," ")}}function Ui(i,n){1&i&&(e.j41(0,"th",26),e.EFF(1," Last Updated Date "),e.k0s())}function Pi(i,n){if(1&i&&(e.j41(0,"td",33),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&i){const t=n.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t.updatedAt,"dd MMM yyyy, HH:mm:ss")," ")}}function Ei(i,n){1&i&&e.nrm(0,"tr",34)}function Ri(i,n){if(1&i){const t=e.RV6();e.j41(0,"tr",35),e.bIt("click",function(){const s=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.navigateSingleCase(s))}),e.k0s()}}function Gi(i,n){if(1&i&&(e.j41(0,"table",16),e.qex(1,17),e.DNE(2,Ii,2,0,"th",18)(3,Ai,5,1,"td",19),e.bVm(),e.qex(4,20),e.DNE(5,xi,2,0,"th",18)(6,Fi,3,1,"td",21),e.bVm(),e.qex(7,22),e.DNE(8,Ui,2,0,"th",18)(9,Pi,3,4,"td",23),e.bVm(),e.DNE(10,Ei,1,0,"tr",24)(11,Ri,1,0,"tr",25),e.k0s()),2&i){const t=e.XpG();e.Y8G("dataSource",t.dataSource),e.R7$(10),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}function ji(i,n){1&i&&e.nrm(0,"app-content-loader",36),2&i&&e.Y8G("loaderType","table")}function Oi(i,n){1&i&&e.nrm(0,"app-content-loader",13),2&i&&e.Y8G("loaderType","paginator")}let Li=(()=>{class i{constructor(t,a,s,r,o,c,f){this.router=t,this.activatedRoute=a,this.apiService=s,this.alertService=r,this.deleteConfirmDialog=o,this.authService=c,this.fullPageLoaderService=f,this.tableData=[],this.displayedColumns=["id","documents","last_updated"],this.removeDialogTitle="Do you want to remove?",this.messageBodayKey="",this.editRouterLink="",this.resultsLength=0,this.isLoadingResults=!0,this.isLoading=!0,this.isRateLimitReached=!1,this.pageSize=5,this.isAdmin=!1,this.caseId="",this.dataSource=new D.I6}ngOnInit(){this.isAdmin=this.authService.hasRole(k.N.ADMIN)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.sort&&(this.dataSource.sort=this.sort),this.paginator.page.pipe((0,Ot.Z)({}),(0,Lt.n)(()=>(this.isLoadingResults=!0,this.requestTableData(this.sort?this.sort.active:"case_id",this.sort?this.sort.direction:"asc")))).subscribe(t=>{this.isLoadingResults=!1,this.tableData=t,this.dataSource=new D.I6(this.tableData)})}isBackDisabled(){return 0===this.paginator.pageIndex}isNextDisabled(){return this.paginator.pageIndex===Math.ceil(this.resultsLength/this.paginator.pageSize)-1}requestTableData(t,a){return this.apiService.getAllCasesWithServerSidePagination(this.paginator.pageIndex,this.paginator.pageSize,t,a).pipe((0,zt.T)(s=>(this.resultsLength=s.total,s.data)),(0,$e.W)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,[])))}onPageChange(){this.isLoadingResults=!0,this.requestTableData(this.sort?this.sort.active:"case_id",this.sort?this.sort.direction:"asc").subscribe(s=>{this.isLoadingResults=!1,this.resultsLength=s.total,this.dataSource.data=s.data})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}openDialog(t,a,s){this.deleteConfirmDialog.open(bi.P,{width:"30%",enterAnimationDuration:t,exitAnimationDuration:a,data:{item:s[this.messageBodayKey],title:this.removeDialogTitle}})}navigateSingleCase(t){console.log(t),this.router.navigate(["/document-managemnt/single-case"],{queryParams:{id:t.id}})}static#e=this.\u0275fac=function(a){return new(a||i)(e.rXU(ne.Ix),e.rXU(ne.nX),e.rXU(pe),e.rXU(Ve.I),e.rXU(Ce.bZ),e.rXU(Be.u),e.rXU(Ye.J))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-case-table-pagination"]],viewQuery:function(a,s){if(1&a&&(e.GBs(Si.B4,5),e.GBs(be.iy,5)),2&a){let r;e.mGM(r=e.lsd())&&(s.sort=r.first),e.mGM(r=e.lsd())&&(s.paginator=r.first)}},standalone:!0,features:[e.Jv_([pe,X.vh]),e.aNF],decls:13,vars:12,consts:[[1,"cardWithShadow"],[1,"row","justify-content-between","m-l-4","m-r-4"],[1,"col-left"],["appearance","outline","class","w-100 m-b-0","color","primary",4,"ngIf"],[1,"col-right","m-r-30","m-t-2"],[3,"loaderType",4,"ngIf"],["color","primary","mat-stroked-button","",3,"routerLink",4,"ngIf"],[1,"table-responsive"],["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["style","padding-top: 2px !important;",3,"loaderType",4,"ngIf"],[3,"page","length","pageSize","pageSizeOptions"],["appearance","outline","color","primary",1,"w-100","m-b-0"],["matInput","","placeholder","Filter",3,"keyup"],[3,"loaderType"],["color","primary","mat-stroked-button","",3,"routerLink"],["name","users-plus",1,"icon-22",2,"color","blue"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","documents"],["mat-cell","",4,"matCellDef"],["matColumnDef","last_updated"],["mat-cell","","class","mat-body-1 f-s-12 f-w-600",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],[1,"d-flex","align-items-center"],[1,"m-l-16"],[1,"mat-body-1","f-s-12","f-w-600"],["mat-cell",""],["name","file-type-pdf",1,"icon-22"],["mat-cell","",1,"mat-body-1","f-s-12","f-w-600"],["mat-header-row",""],["mat-row","",3,"click"],[2,"padding-top","2px !important",3,"loaderType"]],template:function(a,s){1&a&&(e.j41(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"div",2),e.DNE(4,wi,2,0,"mat-form-field",3),e.k0s(),e.j41(5,"div",4),e.DNE(6,Ti,1,1,"app-content-loader",5)(7,ki,2,1,"button",6),e.k0s()(),e.j41(8,"div",7),e.DNE(9,Gi,12,3,"table",8)(10,ji,1,1,"app-content-loader",9)(11,Oi,1,1,"app-content-loader",5),e.k0s(),e.j41(12,"mat-paginator",10),e.bIt("page",function(){return s.onPageChange()}),e.k0s()()()),2&a&&(e.R7$(4),e.Y8G("ngIf",!s.isLoadingResults),e.R7$(2),e.Y8G("ngIf",s.isLoadingResults),e.R7$(),e.Y8G("ngIf",!s.isLoadingResults),e.R7$(2),e.Y8G("ngIf",!s.isLoadingResults),e.R7$(),e.Y8G("ngIf",s.isLoadingResults),e.R7$(),e.Y8G("ngIf",s.isLoadingResults),e.R7$(),e.xc7("visibility",s.isLoadingResults?"hidden":"visible"),e.Y8G("length",s.resultsLength)("pageSize",s.pageSize)("pageSizeOptions",e.lJ4(11,Di)))},dependencies:[D.tP,D.Zl,D.tL,D.ji,D.cC,D.YV,D.iL,D.KS,D.$R,D.YZ,D.NB,X.MD,X.bT,X.vh,H.Hu,H.RN,H.m2,mt.G,ge.rl,Xe.fg,_e.$z,be.iy,he.m_,pt.Cn,_e.Hl,Me.mV,me.X4,me.Jc,gt.Ph,ne.iI,ne.Wk,vt.y,yi.G],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:#43cdf7!important}"]})}return i})(),zi=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-document-upload"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(a,s){1&a&&e.nrm(0,"app-case-table-pagination")},dependencies:[Li],encapsulation:2})}return i})();var P=m(9417),_t=m(5951),Nt=m(5024),Ze=m(2765),Mt=m(8617),We=m(850),$t=m(6471),He=m(7336),Ni=m(771),Mi=m(2798),$i=m(152),Vi=m(1985);let Bi=(()=>{class i{transform(t,a){if(!t||!a)return t;const s=a.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||r.email.toLowerCase().includes(s)||r.role.toLowerCase().includes(s))}static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275pipe=e.EJ8({name:"userFilter",type:i,pure:!0,standalone:!0})}return i})();var Je=m(5478),Se=m(356),Y=m(2155),te=function(i){return i.NEW="NEW",i.REMOVED="REMOVED",i.CURRENT="CURRENT",i}(te||{});let Yi=(()=>{class i{transform(t,a,s){return t&&0!=a.size?t.filter(r=>s?a.has(r.user_id+"")&&a.get(r.user_id+"")!==te.REMOVED:!a.has(r.user_id+"")||a.get(r.user_id+"")===te.REMOVED):s?[]:t}static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275pipe=e.EJ8({name:"userFilterByAccessStatus",type:i,pure:!1,standalone:!0})}return i})();class Vt{static getRandomColor(){let t="#";for(let a=0;a<6;a++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}}var Xi=m(6600),oe=m(3902);const Zi=()=>[5,10,20],Wi=()=>({standalone:!0});function Hi(i,n){if(1&i&&(e.j41(0,"mat-option",8),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t.case_id)}}function Ji(i,n){1&i&&(e.j41(0,"th",29),e.EFF(1," Select "),e.k0s())}function Ki(i,n){if(1&i){const t=e.RV6();e.j41(0,"td",30)(1,"mat-radio-button",31),e.bIt("change",function(s){const r=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.onRowSelectionChange(s,r))}),e.k0s()()}if(2&i){const t=n.$implicit,a=e.XpG(2);e.R7$(),e.Y8G("checked",t.document_id===a.currentSelectedDocumentId)("value",t)("aria-label","Select "+t.document_name)}}function Qi(i,n){if(1&i&&(e.j41(0,"td",32)(1,"div",33),e.nrm(2,"i-tabler",34),e.j41(3,"div",35)(4,"div"),e.EFF(5),e.k0s(),e.j41(6,"div",36),e.EFF(7),e.k0s()()()()),2&i){const t=n.$implicit;e.R7$(5),e.JRh(t.document_name),e.R7$(2),e.SpI("",t.file_size,"MB")}}function qi(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",38)(1,"a",19),e.nrm(2,"i-tabler",39),e.k0s(),e.j41(3,"a",40),e.bIt("click",function(){e.eBV(t);const s=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.deleteConfirmation(s.document_name))}),e.nrm(4,"i-tabler",41),e.k0s()()}}function en(i,n){if(1&i&&(e.j41(0,"td",32),e.DNE(1,qi,5,0,"div",37),e.k0s()),2&i){const t=n.$implicit,a=e.XpG(2);e.R7$(),e.Y8G("ngIf",a.currentSelectedDocumentId===t.document_id)}}function tn(i,n){1&i&&e.nrm(0,"tr",42)}function nn(i,n){if(1&i){const t=e.RV6();e.j41(0,"mat-list-item",54)(1,"div",55)(2,"app-user-thumbnail",56),e.bIt("clickActionIcon",function(s){e.eBV(t);const r=e.XpG(3);return e.Njj(r.removeAccessWarn(s))}),e.k0s()()()}if(2&i){const t=n.$implicit;e.R7$(2),e.Y8G("item",t)("hasActionIcon",!0)("iconName","circle-minus")("iconColor","rgb(219, 10, 59)")}}function an(i,n){if(1&i){const t=e.RV6();e.j41(0,"mat-list-item")(1,"div",55)(2,"app-user-thumbnail",56),e.bIt("clickActionIcon",function(s){e.eBV(t);const r=e.XpG(3);return e.Njj(r.giveAccessWarn(s))}),e.k0s()()()}if(2&i){const t=n.$implicit;e.R7$(2),e.Y8G("item",t)("hasActionIcon",!0)("iconName","circle-plus")("iconColor","rgb(10, 17, 219)")}}function sn(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",43)(3,"mat-form-field",44)(4,"input",45),e.mxI("ngModelChange",function(s){e.eBV(t);const r=e.XpG(2);return e.DH7(r.filterText,s)||(r.filterText=s),e.Njj(s)}),e.k0s()()()()(),e.j41(5,"div",2)(6,"div",3)(7,"mat-card",1)(8,"mat-card-header")(9,"mat-card-title",46),e.EFF(10),e.nI1(11,"userFilterByAccessStatus"),e.nI1(12,"userFilter"),e.k0s()(),e.j41(13,"mat-card-content")(14,"cdk-virtual-scroll-viewport",47)(15,"mat-list"),e.DNE(16,nn,3,4,"mat-list-item",48),e.nI1(17,"userFilterByAccessStatus"),e.nI1(18,"userFilter"),e.k0s()()()()(),e.j41(19,"div",3)(20,"mat-card",1)(21,"mat-card-header")(22,"mat-card-title",46),e.EFF(23),e.nI1(24,"userFilterByAccessStatus"),e.k0s()(),e.j41(25,"mat-card-content")(26,"cdk-virtual-scroll-viewport",47)(27,"mat-list"),e.DNE(28,an,3,4,"mat-list-item",49),e.nI1(29,"userFilterByAccessStatus"),e.nI1(30,"userFilter"),e.k0s()()()()()(),e.j41(31,"mat-card-actions",50)(32,"button",51),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.clickBack())}),e.j41(33,"mat-icon",52),e.EFF(34,"arrow_back"),e.k0s(),e.EFF(35," Back"),e.k0s(),e.j41(36,"button",53),e.EFF(37,"Save This"),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(4),e.Y8G("ngModelOptions",e.lJ4(34,Wi)),e.R50("ngModel",t.filterText),e.R7$(6),e.SpI("Allowed Members (",e.i5U(12,13,e.brH(11,9,t.userTableDataNotAllowed,t.updatedUserIdMap,!0),t.filterText).length,") "),e.R7$(6),e.Y8G("cdkVirtualForOf",e.i5U(18,20,e.brH(17,16,t.userTableDataNotAllowed,t.updatedUserIdMap,!0),t.filterText))("cdkVirtualForTrackBy",t.trackByUserId),e.R7$(7),e.SpI("Not Allowed Members (",e.brH(24,23,t.userTableDataNotAllowed,t.updatedUserIdMap,!1).length,")"),e.R7$(5),e.Y8G("cdkVirtualForOf",e.i5U(30,31,e.brH(29,27,t.userTableDataNotAllowed,t.updatedUserIdMap,!1),t.filterText))("cdkVirtualForTrackBy",t.trackByUserId),e.R7$(8),e.Y8G("disabled",!t.selectedCase)}}function rn(i,n){if(1&i){const t=e.RV6();e.j41(0,"mat-card",9)(1,"mat-card-header")(2,"div",10)(3,"div",11)(4,"mat-label",12),e.EFF(5),e.k0s()()()(),e.j41(6,"mat-card-content")(7,"div",13)(8,"mat-form-field",14)(9,"input",15),e.bIt("keyup",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.applyFilter(s))}),e.k0s()()(),e.j41(10,"div",16)(11,"div",17)(12,"div",2)(13,"div",18),e.nrm(14,"span",19),e.k0s()()(),e.j41(15,"table",20),e.qex(16,21),e.DNE(17,Ji,2,0,"th",22)(18,Ki,2,3,"td",23),e.bVm(),e.qex(19,24),e.DNE(20,Qi,8,2,"td",25),e.bVm(),e.qex(21,26),e.DNE(22,en,2,1,"td",25),e.bVm(),e.DNE(23,tn,1,0,"tr",27),e.k0s()(),e.nrm(24,"mat-paginator",28),e.k0s()(),e.DNE(25,sn,38,35)}if(2&i){const t=e.XpG();e.R7$(5),e.SpI(" Documents (",t.tableData.length,") "),e.R7$(10),e.Y8G("dataSource",t.dataSource),e.R7$(8),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(),e.Y8G("pageSizeOptions",e.lJ4(5,Zi)),e.R7$(),e.vxM(t.currentSelectedDocumentId?25:-1)}}let on=(()=>{class i{constructor(t,a,s,r,o,c){this.location=t,this.router=a,this.alertService=s,this.authService=r,this.fullPageLoaderService=o,this.apiService=c,this.caseId="",this.isReadOnly=!0,this.isLoading=!0,this.myControl=new P.MJ(""),this.isAdmin=!0,this.tableData=[],this.selectData=[],this.userTableDataAllowed=[],this.userTableDataNotAllowed=[],this.filterText="",this.displayedColumns=["select","name","action"],this.selection=new Nt.CB(!0,[]),this.dataSource=new D.I6,this.removeDialogTitle="Do you want to fremove?",this.messageBodayKey="",this.editRouterLink="",this.caseName="CASE_2012_SPE_15_1",this.caseDescription="Test description",this.isUpload=!1,this.updatedUserIdMap=new Map,this.userCurrentMap=new Map,this.currentSelectedDocumentId="",this.deleteConfirmDialog=(0,e.WQX)(Ce.bZ),this.documentUploadDialog=(0,e.WQX)(Ce.bZ),this.separatorKeysCodes=[He.Fm,He.KE],this.currentUserOrGroup=(0,e.geq)(""),this.usersOrGroups=(0,e.vPA)([]),this.allUsersOrGroups=(0,e.vPA)([{name:"Dilupa",id:"100WS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"1",name:"Dilupa Marasinghe",email:"test@gmail.com",role:k.N.ADMIN,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-1.jpg"}},{name:"CASE November 1 -23",id:"CASE_441_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"CASE Jan 3 -23",id:"CASE_201_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Randima",id:"102RANWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"3",name:"Randima Senanayake",email:"test@gmail.com",role:k.N.USER,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-3.jpg"}},{name:"CASE Mrch 3 -12",id:"CASE_011_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Kasun",id:"100KSWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"5",name:"K.S.C.Janith",email:"test@gmail.com",role:k.N.USER,status:k.z.DEACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-5.jpg"}}]),this.filteredUsersOrGroups=(0,e.EWP)(()=>{const f=this.currentUserOrGroup().toLowerCase(),d=new Set(this.usersOrGroups().map(l=>l.id));return this.allUsersOrGroups().filter(l=>!d.has(l.id)).filter(l=>l.name.toLowerCase().includes(f))}),this.announcer=(0,e.WQX)(Mt.Ai),this.filteredFruits=(0,e.EWP)(()=>{const f=this.currentUserOrGroup().toLowerCase(),d=new Set(this.usersOrGroups().map(l=>l.id));return this.allUsersOrGroups().filter(l=>!d.has(l.id)).filter(l=>l.name.toLowerCase().includes(f))})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}trackByUserId(t,a){return a.user_id}ngOnInit(){this.loadAllUsers(),this.dataSource=new D.I6(this.tableData),this.filteredOptions=this.myControl.valueChanges.pipe((0,Ot.Z)(""),(0,$i.B)(300),(0,Lt.n)(t=>this.searchCases(t)))}searchCases(t){return!t||t.length<2?new Vi.c(a=>{a.next([]),a.complete()}):this.apiService.getAllCases(t).pipe((0,zt.T)(a=>a.data))}loadAllCaseData(){if(!this.caseId)return this.isLoading=!0,void console.error("User Id is invalid");this.isReadOnly=!Se.q.hasCommonEditPermission(this.authService),this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getOneCase(this.caseId).subscribe({next:t=>{console.log("Case fetching successful:",t),this.caseData=t.data,this.tableData=this.caseData.documents,this.loadDocumentTableData(),console.log("this.caseData"),console.log(this.caseData),console.log("this.caseData"),this.isLoading=!1},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Case loading failed:",t),t.error.errorCode===Y.C.NOT_FOUND?this.alertService.errorAlert("center","Case not found",t.error.message,3e3,!1,"",!1):t.error.errorCode===Y.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to load this case",t.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while loading case details","",3e3,!1,"",!1),this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case loading request completed.")}})}loadCaseData(){if(!this.caseId)return this.isLoading=!0,void console.error("User Id is invalid");this.isReadOnly=!Se.q.hasCommonEditPermission(this.authService),this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getOneCase(this.caseId).subscribe({next:t=>{console.log("Case fetching successful:",t),this.caseData=t.data,this.tableData=this.caseData.documents,this.loadDocumentTableData(),console.log("this.caseData"),console.log(this.caseData),console.log("this.caseData"),this.isLoading=!1},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Case loading failed:",t),t.error.errorCode===Y.C.NOT_FOUND?this.alertService.errorAlert("center","Case not found",t.error.message,3e3,!1,"",!1):t.error.errorCode===Y.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to load this case",t.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while loading case details","",3e3,!1,"",!1),this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case loading request completed.")}})}loadAllUsers(){this.isReadOnly=!Se.q.hasCommonEditPermission(this.authService),this.updatedUserIdMap=new Map,this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getAllUsers().subscribe({next:t=>{console.log("All users fetching successful - Document access:",t),this.userTableDataNotAllowed=t.data,this.userTableDataNotAllowed.map(a=>a.profile_image=Vt.getRandomColor()),this.isLoading=!1},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("All user loading failed:",t),this.alertService.errorAlert("center","Error while loading user details","",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("All user details loading request completed.")}})}loadAllowedUsers(t){if(!t)return this.isLoading=!0,void console.error("Document Id is invalid");this.isReadOnly=!Se.q.hasCommonEditPermission(this.authService),this.updatedUserIdMap=new Map,this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getAllowedUsersByDocId(t).subscribe({next:a=>{console.log("Document access details fetching successful:",a),this.userTableDataAllowed=a.data,this.userTableDataAllowed.forEach(s=>{this.updatedUserIdMap.set(s.user_id.toString(),te.CURRENT),this.userCurrentMap.set(s.user_id,s)}),this.userTableDataAllowed.map(s=>s.profile_image=Vt.getRandomColor()),console.log("documentId"),console.log(t),console.log("documentId"),this.isLoading=!1},error:a=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Document access details loading failed:",a),a.error.errorCode===Y.C.NOT_FOUND?this.alertService.errorAlert("center","Document ID not found",a.error.message,3e3,!1,"",!1):a.error.errorCode===Y.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to use document access details",a.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while document access details","",3e3,!1,"",!1),this.updatedUserIdMap=new Map,this.userCurrentMap=new Map,this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Document access details loading request completed.")}})}loadDocumentTableData(){this.dataSource=new D.I6(this.tableData),this.dataSource.paginator=this.paginator}onRowSelectionChange(t,a){console.log("Selected Row:",a),this.loadAllowedUsers(a.document_id),this.currentSelectedDocumentId=a.document_id}onOptionSelected(t){console.log(t.option.value),this.selectedCase=t.option.value,this.caseId=this.selectedCase.id,this.loadCaseData()}onToggleChange(){}backToCase(){this.isUpload=!1}clickBack(){this.location.back()}removeAccessWarn(t){console.log(t),this.alertService.confirmAlert("Are you sure?",`Removing access for this user: ${t.name}`,"warning",!0,"No",!0,"Yes, Proceed",!1,this.removeUserFromAllowedList.bind(this,t))}giveAccessWarn(t){console.log(t),this.alertService.confirmAlert("Are you sure?",`Enabling access for this user: ${t.name}`,"warning",!0,"No",!0,"Yes, Proceed",!1,this.addUserToAllowedMap.bind(this,t))}addUserToAllowedMap(t){const a=t.user_id.toString();this.updatedUserIdMap.has(a)&&this.updatedUserIdMap.get(a)===te.CURRENT||(this.userCurrentMap.has(a)&&this.updatedUserIdMap.set(a,te.CURRENT),this.updatedUserIdMap.has(a)||this.updatedUserIdMap.set(a,te.NEW),this.updateUserDocumentAccess())}removeUserFromAllowedList(t){const a=t.user_id.toString();!this.updatedUserIdMap.has(a)||this.updatedUserIdMap.get(a)===te.REMOVED||(this.updatedUserIdMap.has(a)&&(this.updatedUserIdMap.get(a)===te.NEW?this.updatedUserIdMap.delete(a):this.updatedUserIdMap.set(a,te.REMOVED)),this.updateUserDocumentAccess())}updateUserDocumentAccess(){this.fullPageLoaderService.setLoadingStatus(!0);const t=this.currentSelectedDocumentId,a=Array.from(this.updatedUserIdMap.entries()).filter(([s,r])=>r!==te.REMOVED).map(([s])=>s.toString());this.apiService.updateDocumentAccess(a,t).subscribe({next:s=>{console.log("Document access modification successfull:",s),this.alertService.successToster("top-end","The document access settings have been updated successfully",5e3),this.isLoading=!1},error:s=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Document access modification  failed:",s),s.error.errorCode===Y.C.NOT_FOUND?this.alertService.errorAlert("center","Document not found",s.error.message,3e3,!1,"",!1):s.error.errorCode===Y.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to update the document access",s.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while updating document access","",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),this.loadAllCaseData(),console.log("Document access modification request completed.")}})}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.document_id}`:(this.isAllSelected()?"Deselect":"Select")+" all"}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}add(t){const a=(t.value||"").trim();if(a){const s=this.allUsersOrGroups().find(r=>r.name.toLowerCase()===a.toLowerCase());s&&this.usersOrGroups.update(r=>[...r,s])}this.currentUserOrGroup.set("")}remove(t){this.usersOrGroups.update(a=>{const s=a.findIndex(r=>r.id===t.id);return s<0?a:(a.splice(s,1),this.announcer.announce(`Removed ${t.name}`),[...a])}),this.allUsersOrGroups.update(a=>[...a,t]),this.updateFilteredData()}updateFilteredData(){this.filteredUsersOrGroups()}handleBackspace(){if(!this.currentUserOrGroup()){const t=this.usersOrGroups();t.length>0&&this.remove(t[t.length-1])}}selected(t){const a=this.allUsersOrGroups().find(s=>s.name===t.option.value.name);a&&(this.usersOrGroups.update(s=>[...s,a]),this.allUsersOrGroups.update(s=>s.filter(r=>r.id!==a.id))),this.currentUserOrGroup.set("")}openFileUploadDialog(){this.isUpload=!0}_filter(t){const a=t.toLowerCase();return this.selectData.filter(s=>s.case_id.toLowerCase().includes(a))}displayFn(t){return t&&t.case_id?t.case_id:""}deleteConfirmation(t){this.alertService.confirmAlert("Are you sure?",`Do you want to remove this document?  ID: ${t}?`,"warning",!0,"No",!0,"Yes, Proceed",!0,this.removeDocumentCascade.bind(this))}removeDocumentCascade(){this.isReadOnly=!Se.q.hasCommonEditPermission(this.authService),this.currentSelectedDocumentId||this.isAdmin||!this.isReadOnly||this.isLoading?(this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.removeDocumentCasecase(this.currentSelectedDocumentId).subscribe({next:t=>{console.log("Document casecade deleation successful:",t),this.alertService.successAlert("center","Document removed successfully","",3e3),this.loadCaseData(),this.loadAllUsers()},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Document casecade deleation failed:",t),this.alertService.errorAlert("center","Failed to remove the Document",t.error.errorCode===Y.C.NOT_FOUND||t.error.errorCode===Y.C.ACCESSDENIED?t.error.message:"",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Document casecade deleation request completed.")}})):console.error("Cannot preceed to remove document")}static#e=this.\u0275fac=function(a){return new(a||i)(e.rXU(X.aZ),e.rXU(ne.Ix),e.rXU(Ve.I),e.rXU(Be.u),e.rXU(Ye.J),e.rXU(pe))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-document-access-table-pagination"]],viewQuery:function(a,s){if(1&a&&e.GBs(be.iy,5),2&a){let r;e.mGM(r=e.lsd())&&(s.paginator=r.first)}},inputs:{currentUserOrGroup:[1,"currentUserOrGroup"]},outputs:{currentUserOrGroup:"currentUserOrGroupChange"},standalone:!0,features:[e.Jv_([pe]),e.aNF],decls:15,vars:6,consts:[["auto","matAutocomplete"],[1,"b-1","shadow-none"],[1,"row"],[1,"col-md-6"],[1,"mat-subtitle-2","f-s-14","f-w-600"],["appearance","outline","color","primary",1,"w-100","m-b-0","m-t-2"],["matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value"],[1,"document-card","b-1","shadow-none"],[1,"row","justify-content-between"],[1,"col","p-t-4"],[1,"mat-subtitle-1","f-s-18","f-w-600"],[1,"col-left","col-md-4"],["appearance","outline","color","primary",1,"w-100","m-b-0"],["matInput","","placeholder","Filter",3,"keyup"],[1,"table-responsive"],[1,"justify-content-between"],[1,"col","align-items-start","d-flex","align-items-center","gap-2"],[1,"cursor-pointer"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","action"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[3,"change","checked","value","aria-label"],["mat-cell","",1,"mat-body-1"],[1,"d-flex","align-items-center"],["name","file-type-pdf",1,"icon-20",2,"color","rgb(190, 8, 8)","font-weight","bold"],[1,"d-flex","flex-column"],[2,"font-size","12px","color","gray","line-height","1"],["class","d-flex justify-content-center gap-4",4,"ngIf"],[1,"d-flex","justify-content-center","gap-4"],["name","edit",1,"icon-22"],[1,"cursor-pointer",3,"click"],["name","trash",1,"icon-22",2,"color","red"],["mat-row",""],[1,"col-left","m-b-6"],["appearance","outline","color","primary",1,"w-100","m-b-0",2,"margin-top","-0.06rem !important"],["matInput","","placeholder","Filter",3,"ngModelChange","ngModelOptions","ngModel"],[1,"m-t-8","m-b-0"],["itemSize","10",1,"virtual-scroll-container"],["class","mat-list-item-hover",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["align","end"],["type","button","mat-stroked-button","","color","warn",1,"m-r-10",3,"click"],[2,"font-size","1.4rem"],["mat-flat-button","","color","primary",1,"m-r-8",3,"disabled"],[1,"mat-list-item-hover"],[1,"row","justify-content-between","m-l-4","m-r-4"],[3,"clickActionIcon","item","hasActionIcon","iconName","iconColor"]],template:function(a,s){if(1&a){const r=e.RV6();e.j41(0,"mat-card",1)(1,"mat-card-content")(2,"form")(3,"div",2)(4,"div",3)(5,"mat-label",4),e.EFF(6,"Select Case ID"),e.k0s(),e.j41(7,"mat-form-field",5),e.nrm(8,"input",6),e.j41(9,"mat-autocomplete",7,0),e.bIt("optionSelected",function(c){return e.eBV(r),e.Njj(s.onOptionSelected(c))}),e.Z7z(11,Hi,2,2,"mat-option",8,e.fX1),e.nI1(13,"async"),e.k0s()()()(),e.DNE(14,rn,26,6),e.k0s()()()}if(2&a){const r=e.sdS(10);e.R7$(8),e.Y8G("formControl",s.myControl)("matAutocomplete",r),e.R7$(),e.Y8G("displayWith",s.displayFn),e.R7$(2),e.Dyx(e.bMT(13,4,s.filteredOptions)),e.R7$(3),e.vxM(s.selectedCase?14:-1)}},dependencies:[D.tP,D.Zl,D.tL,D.cC,D.YV,D.iL,D.KS,D.$R,D.NB,X.MD,X.bT,X.Jj,P.YN,P.qT,P.me,P.BC,P.cb,P.vS,P.cV,H.Hu,H.RN,H.YY,H.m2,H.MM,H.dh,mt.G,We.$3,Xi.wT,We.pN,ge.rl,ge.nJ,Xe.fg,_t._g,oe.jt,oe.YE,_e.$z,he.An,be.iy,he.m_,pt.Cn,_e.Hl,Me.mV,me.X4,me.Jc,gt.Ph,ne.iI,_t.Wk,Ze.g7,$t.YN,We.jL,Ni.D,Xe.fS,Mi.Ve,P.X1,P.l_,Bi,Yi,Je.E9,Je.yg,Je.E$,Je.d6,vt.y],styles:[".mat-column-select[_ngcontent-%COMP%]{padding-right:0!important}.document-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{display:inline-block}.virtual-scroll-container[_ngcontent-%COMP%]{height:300px;width:100%;overflow:auto}mat-list-item[_ngcontent-%COMP%]:hover{background:#e5f5ff!important}  mat-list-item:hover .profile-btn-dd{background-color:#e5f5ff!important}mat-list-item[_ngcontent-%COMP%]     i-tabler:hover{height:25px!important;width:25px!important}mat-list-item[_ngcontent-%COMP%]   i-tabler[_ngcontent-%COMP%]{cursor:poiner!important}"]})}return i})(),ln=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-document-access"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(a,s){1&a&&e.nrm(0,"app-document-access-table-pagination")},dependencies:[on],encapsulation:2})}return i})();var Ke=m(467),cn=m(7575),bt=m(9183),un=m(4412);let dn=(()=>{class i{constructor(){this.uploadProgressSubject=new un.t(0),this.uploadProgress$=this.uploadProgressSubject.asObservable()}uploadFiles(t,a,s){const r=new FormData;return a.forEach(o=>{r.append("files",o,o.name)}),s.fileBatchUpload(t,r).pipe((0,$e.W)(o=>{throw console.error("Error during file upload:",o),o}))}static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var fn=m(1997);function hn(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",7),e.bIt("drop",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.onDrop(s))})("dragover",function(s){return e.eBV(t),e.Njj(s.preventDefault())})("click",function(){e.eBV(t);const s=e.sdS(8);return e.Njj(s.click())}),e.j41(3,"mat-icon",8),e.EFF(4,"cloud_upload"),e.k0s(),e.j41(5,"span"),e.EFF(6,"Drag and drop here or click to upload"),e.k0s(),e.j41(7,"input",9,0),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.onFileInputChange(s))}),e.k0s()()()()}}function mn(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",10),e.nrm(3,"mat-spinner"),e.j41(4,"span"),e.EFF(5,"Uploading in progress..."),e.k0s(),e.j41(6,"input",9,0),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.onFileInputChange(s))}),e.k0s()()()()}}function pn(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){e.eBV(t);const s=e.XpG().index,r=e.XpG(2);return e.Njj(r.removeFile(s))}),e.j41(1,"mat-icon",25),e.EFF(2,"clear"),e.k0s()()}}function gn(i,n){1&i&&(e.j41(0,"div",26)(1,"mat-icon"),e.nrm(2,"mat-spinner",27),e.k0s()())}function vn(i,n){1&i&&(e.j41(0,"div",28)(1,"mat-icon",29),e.EFF(2,"cloud_done"),e.k0s()())}function _n(i,n){if(1&i&&(e.j41(0,"mat-list-item")(1,"div",3)(2,"div",16)(3,"mat-icon",17),e.EFF(4,"description"),e.k0s()(),e.j41(5,"div",18)(6,"div",19),e.EFF(7),e.k0s(),e.j41(8,"div",20),e.EFF(9),e.nI1(10,"date"),e.k0s()(),e.DNE(11,pn,3,0,"div",21)(12,gn,3,0,"div",22)(13,vn,3,0,"div",23),e.k0s()()),2&i){const t=n.$implicit,a=e.XpG(2);e.R7$(7),e.JRh(t.name),e.R7$(2),e.JRh(e.bMT(10,5,t.lastModified)),e.R7$(2),e.Y8G("ngIf",!a.progressStarted),e.R7$(),e.Y8G("ngIf",a.progressStarted),e.R7$(),e.Y8G("ngIf",!1)}}function bn(i,n){if(1&i&&(e.j41(0,"div",11)(1,"div",12),e.EFF(2,"CASE_2024_NOV-21 "),e.j41(3,"span",13),e.EFF(4),e.k0s()(),e.nrm(5,"mat-divider"),e.j41(6,"mat-list",14),e.DNE(7,_n,14,7,"mat-list-item",15),e.k0s()()),2&i){const t=e.XpG();e.R7$(4),e.SpI("(",t.files.length," Selected)"),e.R7$(2),e.Y8G("disabled",t.progressStarted),e.R7$(),e.Y8G("ngForOf",t.files)}}function Cn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",32),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.startProgressUpload())}),e.EFF(1,"Start Upload"),e.k0s()}}function Sn(i,n){1&i&&(e.j41(0,"button",33),e.EFF(1,"Disabled"),e.k0s())}function yn(i,n){if(1&i&&(e.qex(0),e.DNE(1,Cn,2,0,"button",30)(2,Sn,2,0,"button",31),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.progressStarted),e.R7$(),e.Y8G("ngIf",t.progressStarted)}}let Dn=(()=>{class i{constructor(t,a,s,r,o){this.router=t,this.fileUploadService=a,this.componentApiService=s,this.alertService=r,this.fullPageLoaderService=o,this.caseId="",this.backToCaseDetails=new e.bkB,this.progressStarted=!1,this.files=[],this.progress=0}ngOnInit(){}onDrop(t){t.preventDefault();const a=t.dataTransfer?.files;a&&this.addFiles(a)}onFileInputChange(t){const a=t.target;a&&a.files&&this.addFiles(a.files)}addFiles(t){for(let a=0;a<t.length;a++)this.files.push(t[a])}startUpload(){}uploadFiles(){this.files.length>0?(this.fullPageLoaderService.setLoadingStatus(!0),this.fileUploadService.uploadFiles(this.caseId,Array.from(this.files),this.componentApiService).subscribe({next:t=>{if(t.type===Ue.hv.Response){const a={id:this.caseId};this.fullPageLoaderService.setLoadingStatus(!1),console.log("Upload successful:",t.body?.message),this.alertService.successAlert("center","File upload success","",3e3,!0,!0,!0),this.router.navigate(["/document-managemnt/single-case"],{queryParams:a}),this.progressStarted=!1,this.backToCaseDetails.emit(!0)}},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Upload failed:",t),this.alertService.errorAlert("center","Faill to upload files","",3e3,!1,"",!1),this.progressStarted=!1,this.backToCaseDetails.emit(!0)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),this.progressStarted=!1}})):console.error("No files selected")}removeFile(t){this.files.splice(t,1)}startProgressUpload(){this.progressStarted=!0,this.uploadFiles()}getProgress(t){}static#e=this.\u0275fac=function(a){return new(a||i)(e.rXU(ne.Ix),e.rXU(dn),e.rXU(pe),e.rXU(Ve.I),e.rXU(Ye.J))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-file-upload-ui"]],inputs:{caseId:"caseId"},outputs:{backToCaseDetails:"backToCaseDetails"},standalone:!0,features:[e.aNF],decls:9,vars:4,consts:[["fileInput",""],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col"],["class","files-list-section mb-4 w-100",4,"ngIf"],[4,"ngIf"],[1,"upload-area",3,"drop","dragover","click"],[1,"upload-icon","mb-2",2,"font-size","48px"],["type","file","multiple","","hidden","",3,"change"],[1,"upload-area","upload-area-desabled"],[1,"files-list-section","mb-4","w-100"],["mat-subheader",""],[2,"font-size","small"],[1,"file-list",3,"disabled"],[4,"ngFor","ngForOf"],[1,"col-md-1","col-sm-1"],["matListItemIcon",""],[1,"col-md-9"],["matListItemTitle",""],["matListItemLine",""],["class","col-md-2",3,"click",4,"ngIf"],["style","padding-top: 15px;","class","col-md-2",4,"ngIf"],["class","col-md-2",4,"ngIf"],[1,"col-md-2",3,"click"],["matListItemIcon","",1,"cursor-pointer"],[1,"col-md-2",2,"padding-top","15px"],["color","accent","diameter","20"],[1,"col-md-2"],["matListItemIcon","",2,"color","rgb(4, 207, 7)"],["mat-raised-button","","color","primary","class","mt-3 w-100",3,"click",4,"ngIf"],["mat-stroked-button","","disabled","",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-3","w-100",3,"click"],["mat-stroked-button","","disabled",""]],template:function(a,s){1&a&&(e.j41(0,"div",1),e.DNE(1,hn,9,0,"div",2)(2,mn,8,0,"div",2),e.j41(3,"div",3)(4,"div",4),e.DNE(5,bn,8,3,"div",5),e.k0s()(),e.j41(6,"div",3)(7,"div",4),e.DNE(8,yn,3,2,"ng-container",6),e.k0s()()()),2&a&&(e.R7$(),e.Y8G("ngIf",!s.progressStarted),e.R7$(),e.Y8G("ngIf",s.progressStarted),e.R7$(3),e.Y8G("ngIf",s.files.length>0),e.R7$(3),e.Y8G("ngIf",s.files.length>0))},dependencies:[X.MD,X.Sq,X.bT,X.vh,he.m_,he.An,Ce.hM,cn.PO,Ze.g7,oe.Fg,oe.jt,oe.YE,oe.ZV,oe.EI,fn.q,oe.C_,oe.yE,me.X4,bt.LG],styles:[".container[_ngcontent-%COMP%]{width:50vw;max-width:100%;padding:0;margin:0;box-sizing:border-box}h1.mat-dialog-title[_ngcontent-%COMP%]{font-size:24px;color:#2196f3;text-align:center;margin-bottom:20px}.description[_ngcontent-%COMP%]{font-size:16px;text-align:center;margin-bottom:30px;color:#424242}.upload-area-desabled[_ngcontent-%COMP%]{border:2px dashed #4e5052!important;background-color:#ebf2f7!important}.upload-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:50px;background-color:#f1f8ff;border-radius:8px;border:2px dashed #2196f3;cursor:pointer;transition:border-color .3s ease;text-align:center;min-height:300px;width:100%;box-sizing:border-box}.upload-area[_ngcontent-%COMP%]:hover{border-color:#1976d2}.upload-area[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:60px;color:#1976d2;margin-bottom:10px}.upload-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#424242}.row[_ngcontent-%COMP%], .col[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0;padding:0;box-sizing:border-box}.file-list[_ngcontent-%COMP%]{flex-direction:column;margin-bottom:20px;overflow-y:auto;max-height:300px;width:100%}.file-list[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%]{font-size:small}.file-list[_ngcontent-%COMP%]   .mdc-list-item__secondary-text[_ngcontent-%COMP%]{font-size:smaller}.files-list-section[_ngcontent-%COMP%]{display:ruby}button[mat-raised-button][_ngcontent-%COMP%]{padding:12px 24px;font-size:16px;background-color:#2196f3;color:#fff;border-radius:8px;margin-top:20px;width:100%;transition:background-color .3s ease;border:none}button[mat-raised-button][_ngcontent-%COMP%]:hover{background-color:#1976d2}button[mat-stroked-button][_ngcontent-%COMP%]{padding:12px 24px;font-size:16px;background-color:#2092ec54!important;border-radius:8px;margin-top:20px;width:100%;transition:background-color .3s ease;border:none}@media (max-width: 600px){mat-dialog-content[_ngcontent-%COMP%]{padding:10px;min-width:100%}.upload-area[_ngcontent-%COMP%]{padding:20px;min-height:250px}.upload-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;color:#424242}.file-list[_ngcontent-%COMP%]{max-height:250px}.file-list-item[_ngcontent-%COMP%]{font-size:12px;padding:8px}.file-card[_ngcontent-%COMP%]{padding:12px;flex-direction:column;align-items:flex-start}.file-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.file-list-item[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-size:16px}button[mat-raised-button][_ngcontent-%COMP%]{padding:10px 20px;font-size:14px}}@media (min-width: 601px){.upload-area[_ngcontent-%COMP%]{padding:40px;min-height:280px}}@media (min-width: 769px){mat-dialog-content[_ngcontent-%COMP%]{padding:20px;min-width:500px;min-height:360px}.upload-area[_ngcontent-%COMP%]{padding:40px;min-height:180px}.file-card[_ngcontent-%COMP%]{padding:15px}button[mat-raised-button][_ngcontent-%COMP%]{padding:12px 24px;font-size:16px}.upload-icon[_ngcontent-%COMP%]{font-size:100px!important;display:contents!important}}"]})}return i})();var ve=m(9454),wn=m(9350),Tn=m(7707),A=Uint8Array,Z=Uint16Array,Pe=Int32Array,ye=new A([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),De=new A([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ee=new A([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Yt=function(i,n){for(var t=new Z(31),a=0;a<31;++a)t[a]=n+=1<<i[a-1];var s=new Pe(t[30]);for(a=1;a<30;++a)for(var r=t[a];r<t[a+1];++r)s[r]=r-t[a]<<5|a;return{b:t,r:s}},Xt=Yt(ye,2),Qe=Xt.r;Xt.b[28]=258,Qe[258]=28;for(var St=Yt(De,0).r,Re=new Z(32768),j=0;j<32768;++j){var ce=(43690&j)>>1|(21845&j)<<1;Re[j]=((65280&(ce=(61680&(ce=(52428&ce)>>2|(13107&ce)<<2))>>4|(3855&ce)<<4))>>8|(255&ce)<<8)>>1}var ae=function(i,n,t){for(var a=i.length,s=0,r=new Z(n);s<a;++s)i[s]&&++r[i[s]-1];var c,o=new Z(n);for(s=1;s<n;++s)o[s]=o[s-1]+r[s-1]<<1;if(t){c=new Z(1<<n);var f=15-n;for(s=0;s<a;++s)if(i[s])for(var d=s<<4|i[s],l=n-i[s],u=o[i[s]-1]++<<l,h=u|(1<<l)-1;u<=h;++u)c[Re[u]>>f]=d}else for(c=new Z(a),s=0;s<a;++s)i[s]&&(c[s]=Re[o[i[s]-1]++]>>15-i[s]);return c},ue=new A(288);for(j=0;j<144;++j)ue[j]=8;for(j=144;j<256;++j)ue[j]=9;for(j=256;j<280;++j)ue[j]=7;for(j=280;j<288;++j)ue[j]=8;var Ge=new A(32);for(j=0;j<32;++j)Ge[j]=5;var Ht=ae(ue,9,0),Kt=ae(Ge,5,0),je=function(i){return(i+7)/8|0},de=function(i,n,t){return(null==n||n<0)&&(n=0),(null==t||t>i.length)&&(t=i.length),new A(i.subarray(n,t))},qt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],w=function(i,n,t){var a=new Error(n||qt[i]);if(a.code=i,Error.captureStackTrace&&Error.captureStackTrace(a,w),!t)throw a;return a},se=function(i,n,t){var a=n/8|0;i[a]|=t<<=7&n,i[a+1]|=t>>8},we=function(i,n,t){var a=n/8|0;i[a]|=t<<=7&n,i[a+1]|=t>>8,i[a+2]|=t>>16},it=function(i,n){for(var t=[],a=0;a<i.length;++a)i[a]&&t.push({s:a,f:i[a]});var s=t.length,r=t.slice();if(!s)return{t:Tt,l:0};if(1==s){var o=new A(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(F,E){return F.f-E.f}),t.push({s:-1,f:25001});var c=t[0],f=t[1],d=0,l=1,u=2;for(t[0]={s:-1,f:c.f+f.f,l:c,r:f};l!=s-1;)c=t[t[d].f<t[u].f?d++:u++],f=t[d!=l&&t[d].f<t[u].f?d++:u++],t[l++]={s:-1,f:c.f+f.f,l:c,r:f};var h=r[0].s;for(a=1;a<s;++a)r[a].s>h&&(h=r[a].s);var b=new Z(h+1),T=nt(t[l-1],b,0);if(T>n){a=0;var C=0,v=T-n,S=1<<v;for(r.sort(function(E,I){return b[I.s]-b[E.s]||E.f-I.f});a<s;++a){var x=r[a].s;if(!(b[x]>n))break;C+=S-(1<<T-b[x]),b[x]=n}for(C>>=v;C>0;){var y=r[a].s;b[y]<n?C-=1<<n-b[y]++-1:++a}for(;a>=0&&C;--a){var g=r[a].s;b[g]==n&&(--b[g],++C)}T=n}return{t:new A(b),l:T}},nt=function(i,n,t){return-1==i.s?Math.max(nt(i.l,n,t+1),nt(i.r,n,t+1)):n[i.s]=t},yt=function(i){for(var n=i.length;n&&!i[--n];);for(var t=new Z(++n),a=0,s=i[0],r=1,o=function(f){t[a++]=f},c=1;c<=n;++c)if(i[c]==s&&c!=n)++r;else{if(!s&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(s),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(s);r=1,s=i[c]}return{c:t.subarray(0,a),n}},Te=function(i,n){for(var t=0,a=0;a<n.length;++a)t+=i[a]*n[a];return t},Dt=function(i,n,t){var a=t.length,s=je(n+2);i[s]=255&a,i[s+1]=a>>8,i[s+2]=255^i[s],i[s+3]=255^i[s+1];for(var r=0;r<a;++r)i[s+r+4]=t[r];return 8*(s+4+a)},wt=function(i,n,t,a,s,r,o,c,f,d,l){se(n,l++,t),++s[256];for(var u=it(s,15),h=u.t,b=u.l,T=it(r,15),C=T.t,v=T.l,S=yt(h),x=S.c,y=S.n,g=yt(C),F=g.c,E=g.n,I=new Z(19),_=0;_<x.length;++_)++I[31&x[_]];for(_=0;_<F.length;++_)++I[31&F[_]];for(var p=it(I,7),R=p.t,U=p.l,L=19;L>4&&!R[Ee[L-1]];--L);var N,G,W,V,ee=d+5<<3,M=Te(s,ue)+Te(r,Ge)+o,$=Te(s,h)+Te(r,C)+o+14+3*L+Te(I,R)+2*I[16]+3*I[17]+7*I[18];if(f>=0&&ee<=M&&ee<=$)return Dt(n,l,i.subarray(f,f+d));if(se(n,l,1+($<M)),l+=2,$<M){N=ae(h,b,0),G=h,W=ae(C,v,0),V=C;var Ie=ae(R,U,0);for(se(n,l,y-257),se(n,l+5,E-1),se(n,l+10,L-4),l+=14,_=0;_<L;++_)se(n,l+3*_,R[Ee[_]]);l+=3*L;for(var J=[x,F],le=0;le<2;++le){var K=J[le];for(_=0;_<K.length;++_)se(n,l,Ie[Q=31&K[_]]),l+=R[Q],Q>15&&(se(n,l,K[_]>>5&127),l+=K[_]>>12)}}else N=Ht,G=ue,W=Kt,V=Ge;for(_=0;_<c;++_){var z=a[_];if(z>255){var Q;we(n,l,N[257+(Q=z>>18&31)]),l+=G[Q+257],Q>7&&(se(n,l,z>>23&31),l+=ye[Q]);var re=31&z;we(n,l,W[re]),l+=V[re],re>3&&(we(n,l,z>>5&8191),l+=De[re])}else we(n,l,N[z]),l+=G[z]}return we(n,l,N[256]),l+G[256]},ei=new Pe([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Tt=new A(0),ii=function(){for(var i=new Int32Array(256),n=0;n<256;++n){for(var t=n,a=9;--a;)t=(1&t&&-306674912)^t>>>1;i[n]=t}return i}(),at=function(){var i=-1;return{p:function(n){for(var t=i,a=0;a<n.length;++a)t=ii[255&t^n[a]]^t>>>8;i=t},d:function(){return~i}}},st=function(i,n,t,a,s){if(!s&&(s={l:1},n.dictionary)){var r=n.dictionary.subarray(-32768),o=new A(r.length+i.length);o.set(r),o.set(i,r.length),i=o,s.w=r.length}return function(i,n,t,a,s,r){var o=r.z||i.length,c=new A(a+o+5*(1+Math.ceil(o/7e3))+s),f=c.subarray(a,c.length-s),d=r.l,l=7&(r.r||0);if(n){l&&(f[0]=r.r>>3);for(var u=ei[n-1],h=u>>13,b=8191&u,T=(1<<t)-1,C=r.p||new Z(32768),v=r.h||new Z(T+1),S=Math.ceil(t/3),x=2*S,y=function(Gt){return(i[Gt]^i[Gt+1]<<S^i[Gt+2]<<x)&T},g=new Pe(25e3),F=new Z(288),E=new Z(32),I=0,_=0,p=r.i||0,R=0,U=r.w||0,L=0;p+2<o;++p){var ee=y(p),M=32767&p,$=v[ee];if(C[M]=$,v[ee]=M,U<=p){var N=o-p;if((I>7e3||R>24576)&&(N>423||!d)){l=wt(i,f,0,g,F,E,_,R,L,p-L,l),R=I=_=0,L=p;for(var G=0;G<286;++G)F[G]=0;for(G=0;G<30;++G)E[G]=0}var W=2,V=0,Ie=b,J=M-$&32767;if(N>2&&ee==y(p-J))for(var le=Math.min(h,N)-1,K=Math.min(32767,p),Q=Math.min(258,N);J<=K&&--Ie&&M!=$;){if(i[p+W]==i[p+W-J]){for(var z=0;z<Q&&i[p+z]==i[p+z-J];++z);if(z>W){if(W=z,V=J,z>le)break;var re=Math.min(J,z-2),Ae=0;for(G=0;G<re;++G){var xe=p-J+G&32767,ht=xe-C[xe]&32767;ht>Ae&&(Ae=ht,$=xe)}}}J+=(M=$)-($=C[M])&32767}if(V){g[R++]=268435456|Qe[W]<<18|St[V];var ze=31&Qe[W],Ne=31&St[V];_+=ye[ze]+De[Ne],++F[257+ze],++E[Ne],U=p+W,++I}else g[R++]=i[p],++F[i[p]]}}for(p=Math.max(p,U);p<o;++p)g[R++]=i[p],++F[i[p]];l=wt(i,f,d,g,F,E,_,R,L,p-L,l),d||(r.r=7&l|f[l/8|0]<<3,l-=7,r.h=v,r.p=C,r.i=p,r.w=U)}else{for(p=r.w||0;p<o+d;p+=65535){var Fe=p+65535;Fe>=o&&(f[l/8|0]=d,Fe=o),l=Dt(f,l+1,i.subarray(p,Fe))}r.i=o}return de(c,0,a+je(l)+s)}(i,null==n.level?6:n.level,null==n.mem?s.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):20:12+n.mem,t,a,s)},rt=function(i,n){var t={};for(var a in i)t[a]=i[a];for(var a in n)t[a]=n[a];return t},O=function(i,n,t){for(;t;++n)i[n]=t,t>>>=8};function lt(i,n){return st(i,n||{},0,0)}var Et=function(i,n,t,a){for(var s in i){var r=i[s],o=n+s,c=a;Array.isArray(r)&&(c=rt(a,r[1]),r=r[0]),r instanceof A?t[o]=[r,c]:(t[o+="/"]=[new A(0),c],Et(r,o,t,a))}},mi=typeof TextEncoder<"u"&&new TextEncoder,Rt=typeof TextDecoder<"u"&&new TextDecoder;try{Rt.decode(Tt,{stream:!0})}catch{}function ct(i,n){if(n){for(var t=new A(i.length),a=0;a<i.length;++a)t[a]=i.charCodeAt(a);return t}if(mi)return mi.encode(i);var s=i.length,r=new A(i.length+(i.length>>1)),o=0,c=function(l){r[o++]=l};for(a=0;a<s;++a){if(o+5>r.length){var f=new A(o+8+(s-a<<1));f.set(r),r=f}var d=i.charCodeAt(a);d<128||n?c(d):d<2048?(c(192|d>>6),c(128|63&d)):d>55295&&d<57344?(c(240|(d=65536+(1047552&d)|1023&i.charCodeAt(++a))>>18),c(128|d>>12&63),c(128|d>>6&63),c(128|63&d)):(c(224|d>>12),c(128|d>>6&63),c(128|63&d))}return de(r,0,o)}var Le=function(i){var n=0;if(i)for(var t in i){var a=i[t].length;a>65535&&w(9),n+=a+4}return n},ut=function(i,n,t,a,s,r,o,c){var f=a.length,d=t.extra,l=c&&c.length,u=Le(d);O(i,n,null!=o?33639248:67324752),n+=4,null!=o&&(i[n++]=20,i[n++]=t.os),i[n]=20,n+=2,i[n++]=t.flag<<1|(r<0&&8),i[n++]=s&&8,i[n++]=255&t.compression,i[n++]=t.compression>>8;var h=new Date(null==t.mtime?Date.now():t.mtime),b=h.getFullYear()-1980;if((b<0||b>119)&&w(10),O(i,n,b<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>1),n+=4,-1!=r&&(O(i,n,t.crc),O(i,n+4,r<0?-r-2:r),O(i,n+8,t.size)),O(i,n+12,f),O(i,n+14,u),n+=16,null!=o&&(O(i,n,l),O(i,n+6,t.attrs),O(i,n+10,o),n+=14),i.set(a,n),n+=f,u)for(var T in d){var C=d[T],v=C.length;O(i,n,+T),O(i,n+2,v),i.set(C,n+4),n+=4+v}return l&&(i.set(c,n),n+=l),n};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;let Mn=(()=>{class i{constructor(t){this.http=t}fetchFile(t){return function kn(i,n){const t="object"==typeof n;return new Promise((a,s)=>{const r=new Tn.Ms({next:o=>{a(o),r.unsubscribe()},error:s,complete:()=>{t?a(n.defaultValue):s(new wn.G)}});i.subscribe(r)})}(this.http.get(t,{responseType:"blob"}))}blobToUint8Array(t){return(0,Ke.A)(function*(){return new Uint8Array(yield t.arrayBuffer())})()}downloadZip(t,a){const s=new Blob([t],{type:"application/zip"}),r=window.URL.createObjectURL(s),o=document.createElement("a");o.href=r,o.download=a,o.click(),window.URL.revokeObjectURL(r)}createAndDownloadZip(t,a){var s=this;return(0,Ke.A)(function*(){const r={};for(const c of t)try{const f=yield s.fetchFile(c),d=c.split("/").pop()||"file",l=yield s.blobToUint8Array(f);r[d]=l}catch(f){console.error(`Error downloading file: ${c}`,f)}const o=function Nn(i,n){n||(n={});var t={},a=[];Et(i,"",t,n);var s=0,r=0;for(var o in t){var c=t[o],f=c[0],d=c[1],l=0==d.level?0:8,h=(u=ct(o)).length,b=d.comment,T=b&&ct(b),C=T&&T.length,v=Le(d.extra);h>65535&&w(11);var S=l?lt(f,d):f,x=S.length,y=at();y.p(f),a.push(rt(d,{size:f.length,crc:y.d(),c:S,f:u,m:T,u:h!=o.length||T&&b.length!=C,o:s,compression:l})),s+=30+h+v+x,r+=76+2*(h+v)+(C||0)+x}for(var g=new A(r+22),F=s,E=r-s,I=0;I<a.length;++I){var u;ut(g,(u=a[I]).o,u,u.f,u.u,u.c.length);var _=30+u.f.length+Le(u.extra);g.set(u.c,u.o+_),ut(g,s,u,u.f,u.u,u.c.length,u.o,u.m),s+=16+_+(u.m?u.m.length:0)}return function(i,n,t,a,s){O(i,n,101010256),O(i,n+8,t),O(i,n+10,t),O(i,n+12,a),O(i,n+16,s)}(g,s,a.length,E,F),g}(r);s.downloadZip(o,a)})()}static#e=this.\u0275fac=function(a){return new(a||i)(e.KVO(Ue.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const $n=()=>[5,10,20];function Vn(i,n){1&i&&e.nrm(0,"i-tabler",16)}function Bn(i,n){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Case ID is required. "),e.k0s())}function Yn(i,n){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Case ID must be at least 3 characters long. "),e.k0s())}function Xn(i,n){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Case ID cannot exceed 50 characters. "),e.k0s())}function Zn(i,n){1&i&&e.nrm(0,"i-tabler",16)}function Wn(i,n){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Name cannot exceed 300 characters. "),e.k0s())}function Hn(i,n){if(1&i){const t=e.RV6();e.j41(0,"mat-card-actions",17)(1,"button",18),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.clickBack())}),e.j41(2,"mat-icon",19),e.EFF(3,"arrow_back"),e.k0s(),e.EFF(4," Back"),e.k0s(),e.j41(5,"button",20),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.clickCreateCase())}),e.EFF(6,"Save This"),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(5),e.Y8G("disabled",t.form.invalid||t.isReadOnly)}}function Jn(i,n){if(1&i&&(e.j41(0,"div",4)(1,"div",5)(2,"mat-card",7)(3,"mat-card-content")(4,"form",8)(5,"div",4)(6,"div",5)(7,"mat-label",9),e.DNE(8,Vn,1,0,"i-tabler",10),e.EFF(9," Case ID "),e.k0s(),e.j41(10,"mat-form-field",11),e.nrm(11,"input",12),e.DNE(12,Bn,2,0,"mat-error",13)(13,Yn,2,0,"mat-error",13)(14,Xn,2,0,"mat-error",13),e.k0s()(),e.j41(15,"div",5)(16,"mat-label",9),e.DNE(17,Zn,1,0,"i-tabler",10),e.EFF(18," Description"),e.k0s(),e.j41(19,"mat-form-field",11),e.nrm(20,"textarea",14),e.DNE(21,Wn,2,0,"mat-error",13),e.k0s()()(),e.DNE(22,Hn,7,1,"mat-card-actions",15),e.k0s()()()()()),2&i){const t=e.XpG();e.R7$(4),e.Y8G("formGroup",t.form),e.R7$(4),e.Y8G("ngIf",!t.isAdmin),e.R7$(3),e.Y8G("disabled",!t.isAdmin),e.R7$(),e.Y8G("ngIf",t.f.case_id.hasError("required")&&(t.f.case_id.touched||t.f.case_id.dirty)),e.R7$(),e.Y8G("ngIf",t.f.case_id.hasError("minlength")&&(t.f.case_id.touched||t.f.case_id.dirty)),e.R7$(),e.Y8G("ngIf",t.f.case_id.hasError("maxlength")&&(t.f.case_id.touched||t.f.case_id.dirty)),e.R7$(3),e.Y8G("ngIf",!t.isAdmin),e.R7$(3),e.Y8G("disabled",!t.isAdmin),e.R7$(),e.Y8G("ngIf",t.f.description.hasError("maxlength")&&(t.f.description.touched||t.f.description.dirty)),e.R7$(),e.Y8G("ngIf",t.isAdmin)}}function Kn(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",21)(1,"button",22),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.backToCase())}),e.j41(2,"mat-icon",19),e.EFF(3,"arrow_back"),e.k0s()(),e.j41(4,"app-file-upload-ui",23),e.bIt("backToCaseDetails",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.handleBackToCaseDetailsEvent(s))}),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(4),e.Y8G("caseId",t.caseId)}}function Qn(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",30)(1,"button",36),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.openFileUploadDialog())}),e.j41(2,"mat-icon",37),e.EFF(3,"upload_file"),e.k0s(),e.EFF(4," Upload Files "),e.k0s()()}if(2&i){const t=e.XpG(3);e.R7$(),e.Y8G("disabled",t.enableDownloadSelected||t.isReadOnly)}}function qn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",36),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.downloadConfirm())}),e.j41(1,"mat-icon",38),e.EFF(2,"download_file"),e.k0s(),e.EFF(3," Download Files "),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("disabled",!(t.selection.hasValue()&&t.selection.selected.length<=5))}}function ea(i,n){1&i&&(e.j41(0,"button",39)(1,"mat-icon"),e.nrm(2,"mat-spinner",40),e.k0s(),e.EFF(3," Download Files "),e.k0s()),2&i&&e.Y8G("disabled",!0)}function ta(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",41)(1,"mat-form-field",42)(2,"input",43),e.bIt("keyup",function(s){e.eBV(t);const r=e.XpG(3);return e.Njj(r.applyFilter(s))}),e.k0s()()()}}function ia(i,n){if(1&i){const t=e.RV6();e.j41(0,"th",55)(1,"mat-checkbox",56),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(4);return e.Njj(s?r.toggleAllRows():null)}),e.k0s()()}if(2&i){const t=e.XpG(4);e.R7$(),e.Y8G("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function na(i,n){if(1&i){const t=e.RV6();e.j41(0,"td",57)(1,"mat-checkbox",58),e.bIt("click",function(s){return e.eBV(t),e.Njj(s.stopPropagation())})("change",function(s){const r=e.eBV(t).$implicit,o=e.XpG(4);return e.Njj(s?o.selection.toggle(r):null)}),e.k0s()()}if(2&i){const t=n.$implicit,a=e.XpG(4);e.R7$(),e.Y8G("checked",a.selection.isSelected(t))("aria-label",a.checkboxLabel(t))}}function aa(i,n){if(1&i&&(e.j41(0,"td",59)(1,"div",60),e.nrm(2,"i-tabler",61),e.j41(3,"div",62)(4,"div"),e.EFF(5),e.k0s(),e.j41(6,"div",63),e.EFF(7),e.k0s()()()()),2&i){const t=n.$implicit;e.R7$(5),e.JRh(t.document_name),e.R7$(2),e.SpI("",t.file_size,"MB")}}function sa(i,n){1&i&&(e.j41(0,"a",66),e.nrm(1,"i-tabler",67),e.k0s())}function ra(i,n){1&i&&(e.j41(0,"a",66),e.nrm(1,"i-tabler",68),e.k0s())}function oa(i,n){1&i&&(e.j41(0,"a",66),e.nrm(1,"i-tabler",69),e.k0s())}function la(i,n){if(1&i&&(e.j41(0,"td",59)(1,"div",64),e.DNE(2,sa,2,0,"a",65)(3,ra,2,0,"a",65)(4,oa,2,0,"a",65),e.k0s()()),2&i){const t=e.XpG(4);e.R7$(2),e.Y8G("ngIf",t.isAdmin),e.R7$(),e.Y8G("ngIf",t.isAdmin),e.R7$(),e.Y8G("ngIf",!t.isAdmin)}}function ca(i,n){1&i&&e.nrm(0,"tr",70)}function ua(i,n){if(1&i&&(e.j41(0,"div",44)(1,"div",45)(2,"div",4),e.nrm(3,"div",46),e.k0s()(),e.j41(4,"table",47),e.qex(5,48),e.DNE(6,ia,2,3,"th",49)(7,na,2,2,"td",50),e.bVm(),e.qex(8,51),e.DNE(9,aa,8,2,"td",52),e.bVm(),e.qex(10,53),e.DNE(11,la,5,3,"td",52),e.bVm(),e.DNE(12,ca,1,0,"tr",54),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(4),e.Y8G("dataSource",t.dataSource),e.R7$(8),e.Y8G("matRowDefColumns",t.displayedColumns)}}function da(i,n){if(1&i&&(e.j41(0,"div",5)(1,"mat-card",25)(2,"mat-card-header")(3,"div",26)(4,"div",27)(5,"mat-label",28),e.EFF(6),e.k0s()()(),e.j41(7,"div",26),e.DNE(8,Qn,5,1,"div",29),e.j41(9,"div",30),e.DNE(10,qn,4,1,"button",31)(11,ea,4,1,"button",32),e.k0s()()(),e.j41(12,"mat-card-content"),e.DNE(13,ta,3,0,"div",33)(14,ua,13,2,"div",34),e.nrm(15,"mat-paginator",35),e.k0s()()()),2&i){const t=e.XpG(2);e.R7$(6),e.SpI(" Documents (",t.documentTableData.length,") "),e.R7$(2),e.Y8G("ngIf",t.isAdmin),e.R7$(2),e.Y8G("ngIf",!t.enableDownloadSelected),e.R7$(),e.Y8G("ngIf",t.enableDownloadSelected),e.R7$(2),e.Y8G("ngIf",!t.isCaseCreation),e.R7$(),e.Y8G("ngIf",!t.isCaseCreation),e.R7$(),e.Y8G("pageSizeOptions",e.lJ4(7,$n))}}function fa(i,n){if(1&i&&(e.j41(0,"div",4),e.DNE(1,da,16,8,"div",24),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.isCaseCreation)}}function ha(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",75),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.deleteConfirmation())}),e.EFF(1,"Delete"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",t.isReadOnly)}}function ma(i,n){if(1&i&&(e.j41(0,"mat-accordion",71)(1,"mat-expansion-panel",72)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e.EFF(4," Remove This Case "),e.j41(5,"mat-icon"),e.EFF(6,"delete"),e.k0s()()(),e.j41(7,"mat-panel-description",73),e.DNE(8,ha,2,1,"button",74),e.k0s()()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("expanded",!1),e.R7$(7),e.Y8G("ngIf",!t.isCaseCreation)}}let pa=(()=>{class i{constructor(t,a,s,r,o,c,f,d){this.location=t,this.router=a,this.activatedRoute=s,this.alertService=r,this.apiService=o,this.authService=c,this.fullPageLoaderService=f,this.fileDownloadService=d,this.isAdmin=!1,this.caseId="",this.isCaseCreation=!1,this.isReadOnly=!0,this.isLoading=!0,this.documentTableData=[],this.userTableData=[],this.displayedColumns=["select","document_name","action"],this.selection=new Nt.CB(!0,[]),this.enableDownloadSelected=!1,this.dataSource=new D.I6,this.removeDialogTitle="Do you want to remove?",this.messageBodayKey="",this.editRouterLink="",this.caseName="CASE_2012_SPE_15_1",this.caseDescription="Test description",this.isUpload=!1,this.selectedFilesList=[],this.deleteConfirmDialog=(0,e.WQX)(Ce.bZ),this.documentUploadDialog=(0,e.WQX)(Ce.bZ),this.separatorKeysCodes=[He.Fm,He.KE],this.currentUserOrGroup=(0,e.geq)(""),this.usersOrGroups=(0,e.vPA)([]),this.allUsersOrGroups=(0,e.vPA)([{name:"Dilupa",id:"100WS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"1",name:"Dilupa Marasinghe",email:"test@gmail.com",role:k.N.ADMIN,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-1.jpg"}},{name:"CASE November 1 -23",id:"CASE_441_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"CASE Jan 3 -23",id:"CASE_201_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Randima",id:"102RANWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"3",name:"Randima Senanayake",email:"test@gmail.com",role:k.N.USER,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-3.jpg"}},{name:"CASE Mrch 3 -12",id:"CASE_011_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Kasun",id:"100KSWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"5",name:"K.S.C.Janith",email:"test@gmail.com",role:k.N.USER,status:k.z.DEACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-5.jpg"}}]),this.filteredUsersOrGroups=(0,e.EWP)(()=>{const l=this.currentUserOrGroup().toLowerCase(),u=new Set(this.usersOrGroups().map(h=>h.id));return this.allUsersOrGroups().filter(h=>!u.has(h.id)).filter(h=>h.name.toLowerCase().includes(l))}),this.announcer=(0,e.WQX)(Mt.Ai),this.http=(0,e.WQX)(Ue.Qq),this.filteredFruits=(0,e.EWP)(()=>{const l=this.currentUserOrGroup().toLowerCase(),u=new Set(this.usersOrGroups().map(h=>h.id));return this.allUsersOrGroups().filter(h=>!u.has(h.id)).filter(h=>h.name.toLowerCase().includes(l))}),this.form=new P.gE({case_id:new P.MJ("",[P.k0.required,P.k0.minLength(3),P.k0.maxLength(50)]),description:new P.MJ("",[P.k0.maxLength(300)])})}get f(){return this.form.controls}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.isAdmin=this.authService.hasRole(k.N.ADMIN),!this.isAdmin&&this.form&&(this.f.case_id.disable(),this.f.description.disable()),this.enableDesableFrom(!this.isAdmin),this.isReadOnly=!this.isAdmin,this.activatedRoute.queryParams.subscribe(t=>{t.id&&(this.caseId=t.id,this.loadCaseData())}),this.userTableData=[{user_id:"1",name:"Dilupa Marasinghe",email:"test@gmail.com",role:k.N.ADMIN,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-1.jpg",mobileNumber:"+94712390348"},{user_id:"2",name:"Asith siriwardhana",email:"test@gmail.com",role:k.N.USER,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-2.jpg",mobileNumber:"+94712390348"},{user_id:"3",name:"Kasun janaka",email:"test@gmail.com",role:k.N.USER,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-3.jpg",mobileNumber:"+94712390348"},{user_id:"4",name:"Herath P.L.G",email:"test@gmail.com",role:k.N.USER,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-4.jpg",mobileNumber:"+94712390348"},{user_id:"5",name:"K.S.C.Janith",email:"test@gmail.com",role:k.N.USER,status:k.z.DEACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-5.jpg",mobileNumber:"+94712390348"},{user_id:"6",name:"Kamal Senath",email:"test@gmail.com",role:k.N.USER,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-6.jpg",mobileNumber:"+94712390348"},{user_id:"7",name:"Lal Guruge",email:"test@gmail.com",role:k.N.USER,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-7.jpg",mobileNumber:"+94712390348"},{user_id:"8",name:"Sahan H.L.R",email:"test@gmail.com",role:k.N.USER,status:k.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-8.jpg",mobileNumber:"+94712390348"}]}onToggleChange(){this.isAdmin?(this.f.case_id.enable(),this.f.description.enable()):(this.f.case_id.disable(),this.f.description.disable())}backToCase(){this.isUpload=!1}handleBackToCaseDetailsEvent(t){t&&(this.isUpload=!1,this.loadCaseData())}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}downloadConfirm(){if(this.selection.selected.length>0){const t=this.selection.selected.map(s=>s.document_name),a=this.generateHtmlList(t);this.alertService.confirmAlertWithHtml("Do you want to download below documents?",a,"warning",!0,"No",!0,"Yes, Proceed",!1,this.downloadSelected.bind(this))}}downloadConfirmForIconClick(t,a){if(t&&a){const r=this.generateHtmlList([a]);this.alertService.confirmAlertWithHtml("Do you want to download below documents?",r,"warning",!0,"No",!0,"Yes, Proceed",!1,this.sendSingleFileDownloadRequest.bind(this,t,a))}}generateHtmlList(t){return`<ul style="list-style-type: disclosure-closed;justify-content: center; display: grid;">\n    ${t.map(a=>`<li>${a}</li>`).join("")}\n  </ul>`}downloadSelected(){this.selection.selected.length>0?(console.log(this.selection.selected),this.sendBatchDownloadRequest()):this.alertService.errorToaster("top-end","Please select documents to download")}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.document_id}`:(this.isAllSelected()?"Deselect":"Select")+" all"}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}add(t){const a=(t.value||"").trim();if(a){const s=this.allUsersOrGroups().find(r=>r.name.toLowerCase()===a.toLowerCase());s&&this.usersOrGroups.update(r=>[...r,s])}this.currentUserOrGroup.set("")}updateFilteredData(){this.filteredUsersOrGroups()}handleBackspace(){if(!this.currentUserOrGroup()){this.usersOrGroups()}}selected(t){const a=this.allUsersOrGroups().find(s=>s.name===t.option.value.name);a&&(this.usersOrGroups.update(s=>[...s,a]),this.allUsersOrGroups.update(s=>s.filter(r=>r.id!==a.id))),this.currentUserOrGroup.set("")}openFileUploadDialog(){this.isReadOnly||this.enableDownloadSelected||(this.isUpload=!0)}sendBatchDownloadRequest(){var a,t=this;this.selectedFilesList=[],this.selectedFilesList=this.selection.selected.map(a=>a.file_url),this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.fileBatchDownload(this.caseId,this.selectedFilesList).pipe((0,$e.W)(a=>{throw console.error("Error during file download:",a),this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),a})).subscribe({next:(a=(0,Ke.A)(function*(s){t.fullPageLoaderService.setLoadingStatus(!1),t.alertService.successToster("center","Your download will begin now.",3e3),yield t.fileDownloadService.createAndDownloadZip(s.data,"my-files.zip")}),function(r){return a.apply(this,arguments)}),error:a=>{this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),console.error("Error in subscription:",a)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Batch download request completed.")}})}sendSingleFileDownloadRequest(t,a){var r,s=this;this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.singleFileDownload(this.caseId,t).pipe((0,$e.W)(r=>{throw console.error("Error during single file download:",r),this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),r})).subscribe({next:(r=(0,Ke.A)(function*(o){s.alertService.successToster("center","Your file download is starting now.",3e3),s.fullPageLoaderService.setLoadingStatus(!1)}),function(c){return r.apply(this,arguments)}),error:r=>{this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),console.error("Error in subscription:",r)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Single file download request completed.")}})}downloadSingleFile(t,a){const s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(s)}deleteConfirmation(){this.alertService.confirmAlert("Are you sure?",`Do you want to remove this Case?  ID: ${this.caseData.case_id}?`,"warning",!0,"No",!0,"Yes, Proceed",!0,this.removeCase.bind(this))}clickCreateCase(){this.isReadOnly||this.form.disabled||this.form.invalid||this.alertService.confirmAlert("Are you sure?",`Do you want to create this case with Case ID: ${this.form.value.case_id}`,"warning",!0,"No",!0,"Yes, Proceed",!1,this.submit.bind(this))}submit(){this.form.invalid?console.error("Form is invalid"):(this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.createNewCase({case_id:this.form.value.case_id,description:this.form.value.description}).subscribe({next:a=>{const s={id:a.data.id};console.log("Case creation successful:",a),this.alertService.successAlert("center","Case creation success","",3e3),this.router.navigate(["/document-managemnt/single-case"],{queryParams:s})},error:a=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Registration failed:",a),this.alertService.errorAlert("center","Case creation failed",a.error.errorCode===Y.C.ALREADY_EXIST||a.error.errorCode===Y.C.ACCESSDENIED?a.error.message:"",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case creation request completed.")}}))}removeCase(){!this.form.invalid||this.isCaseCreation||this.isReadOnly?(this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.removeCase(this.caseId).subscribe({next:t=>{console.log("Case deleation successful:",t),this.alertService.successAlert("center","Case removed successfully","",3e3),this.router.navigate(["/document-managemnt/document-upload"])},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Registration failed:",t),this.alertService.errorAlert("center","Failed to remove the Case",t.error.errorCode===Y.C.NOT_FOUND||t.error.errorCode===Y.C.ACCESSDENIED?t.error.message:"",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case creation request completed.")}})):console.error("Form is invalid")}enableDesableFrom(t){t?this.form.disable():this.form.enable()}loadCaseData(){if(!this.caseId)return this.isLoading=!0,this.isCaseCreation=!0,void console.error("User Id is invalid");this.isReadOnly=!Se.q.hasCommonEditPermission(this.authService),this.isCaseCreation=!1,this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getOneCase(this.caseId).subscribe({next:t=>{console.log("Case fetching successful:",t),this.caseData=t.data,this.form.patchValue(this.caseData),this.isReadOnly&&this.form.disable(),this.documentTableData=this.caseData.documents,this.loadDocumentTableData(),console.log("this.caseData"),console.log(this.caseData),console.log("this.caseData"),this.isLoading=!1},error:t=>{this.enableDesableFrom(!0),this.fullPageLoaderService.setLoadingStatus(!1),console.error("Case loading failed:",t),t.error.errorCode===Y.C.NOT_FOUND?this.alertService.errorAlert("center","Case not found",t.error.message,3e3,!1,"",!1):t.error.errorCode===Y.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to load this case",t.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while loading case details","",3e3,!1,"",!1),this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case loading request completed.")}})}loadDocumentTableData(){this.dataSource=new D.I6(this.documentTableData),this.dataSource.paginator=this.paginator}clickBack(){this.location.back()}static#e=this.\u0275fac=function(a){return new(a||i)(e.rXU(X.aZ),e.rXU(ne.Ix),e.rXU(ne.nX),e.rXU(Ve.I),e.rXU(pe),e.rXU(Be.u),e.rXU(Ye.J),e.rXU(Mn))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-single-case-table-pagination"]],viewQuery:function(a,s){if(1&a&&e.GBs(be.iy,5),2&a){let r;e.mGM(r=e.lsd())&&(s.paginator=r.first)}},inputs:{currentUserOrGroup:[1,"currentUserOrGroup"]},outputs:{currentUserOrGroup:"currentUserOrGroupChange"},standalone:!0,features:[e.Jv_([pe,Be.u,{provide:ve.$T,useValue:{expandedHeight:"48px",collapsedHeight:"48px",animationDuration:"225ms cubic-bezier(0.4,0.0,0.2,1)"}}]),e.aNF],decls:10,vars:6,consts:[[1,"container"],[3,"change","ngModelChange","ngModel"],["class","row",4,"ngIf"],["class","row justify-content-start",4,"ngIf"],[1,"row"],[1,"col"],["class","m-r-8","mat-flat-button","","color","warn",4,"ngIf"],[1,"b-1","shadow-none"],[3,"formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-2","d-block"],["style","color: black; vertical-align: middle; margin-bottom: 3px;","name","lock","class","icon-22",4,"ngIf"],["appearance","outline","color","primary",1,"w-100","m-b-0"],["formControlName","case_id","matInput","","placeholder","","value","CASE_NOV_102",3,"disabled"],[4,"ngIf"],["formControlName","description","matInput","","value","Test Description about case",3,"disabled"],["align","end",4,"ngIf"],["name","lock",1,"icon-22",2,"color","black","vertical-align","middle","margin-bottom","3px"],["align","end"],["type","button","mat-stroked-button","","color","warn",1,"m-r-10",3,"click"],[2,"font-size","1.4rem"],["type","button","mat-flat-button","","color","primary",1,"m-r-8",3,"click","disabled"],[1,"row","justify-content-start"],["mat-button","",3,"click"],[3,"backToCaseDetails","caseId"],["class","col",4,"ngIf"],[1,"document-card","b-1","shadow-none"],[1,"row","justify-content-between"],[1,"col","p-t-4"],[1,"mat-subtitle-1","f-s-18","f-w-600"],["class","col-sm-6 col-md-6 col-lg-6 p-t-6",4,"ngIf"],[1,"col-sm-6","col-md-6","col-lg-6","p-t-6"],["mat-stroked-button","",3,"disabled","click",4,"ngIf"],["class","download-mat-spinner","mat-stroked-button","",3,"disabled",4,"ngIf"],["class","col-left",4,"ngIf"],["class","table-responsive",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-stroked-button","",3,"click","disabled"],["aria-hidden","false",2,"color","#4456e9"],["aria-hidden","false",2,"color","#24db0e"],["mat-stroked-button","",1,"download-mat-spinner",3,"disabled"],["color","accent","diameter","20"],[1,"col-left"],["appearance","outline","color","primary",1,"w-50","m-b-0"],["matInput","","placeholder","Filter",3,"keyup"],[1,"table-responsive"],[1,"justify-content-between"],[1,"col","align-items-start","d-flex","align-items-center","gap-2"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","document_name"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","action"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[3,"change","checked","indeterminate","aria-label"],["mat-cell",""],[3,"click","change","checked","aria-label"],["mat-cell","",1,"mat-body-1"],[1,"d-flex","align-items-center"],["name","file-type-pdf",1,"icon-20",2,"color","rgb(190, 8, 8)","font-weight","bold"],[1,"d-flex","flex-column"],[2,"font-size","12px","color","gray","line-height","1"],[1,"d-flex","justify-content-center","gap-4"],["class","cursor-pointer",4,"ngIf"],[1,"cursor-pointer"],["name","edit",1,"icon-22"],["name","trash",1,"icon-22",2,"color","red"],["name","download",1,"icon-22",2,"color","rgb(16, 152, 6)","font-weight","bold"],["mat-row",""],["mat-flat-button","","color","warn",1,"m-r-8"],[3,"expanded"],[2,"justify-content","center"],["class","m-r-8","mat-flat-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","warn",1,"m-r-8",3,"click","disabled"]],template:function(a,s){1&a&&(e.j41(0,"div",0)(1,"p")(2,"mat-slide-toggle",1),e.bIt("change",function(){return s.onToggleChange()}),e.mxI("ngModelChange",function(o){return e.DH7(s.isAdmin,o)||(s.isAdmin=o),o}),e.EFF(3),e.k0s()(),e.DNE(4,Jn,23,10,"div",2)(5,Kn,5,1,"div",3)(6,fa,2,1,"div",2),e.j41(7,"div",4)(8,"div",5),e.DNE(9,ma,9,2,"mat-accordion",6),e.k0s()()()),2&a&&(e.R7$(2),e.R50("ngModel",s.isAdmin),e.R7$(),e.JRh(s.isAdmin?"Admin View":"User View"),e.R7$(),e.Y8G("ngIf",!s.isUpload),e.R7$(),e.Y8G("ngIf",s.isUpload&&s.isAdmin),e.R7$(),e.Y8G("ngIf",!s.isUpload),e.R7$(3),e.Y8G("ngIf",!s.isCaseCreation&&s.isAdmin&&!s.isUpload))},dependencies:[D.tP,D.Zl,D.tL,D.cC,D.YV,D.iL,D.KS,D.$R,D.NB,X.MD,X.bT,P.YN,P.qT,P.me,P.BC,P.cb,P.vS,ge.RG,ge.rl,ge.nJ,ge.TL,P.X1,P.j4,P.JD,H.Hu,H.RN,H.YY,H.m2,H.MM,mt.G,Ze.So,Xe.fg,Me.sG,ve.BS,ve.GK,ve.Z2,ve.WN,ve.Q6,_e.$z,he.An,bt.LG,be.iy,he.m_,pt.Cn,_e.Hl,Me.mV,me.X4,me.Jc,gt.Ph,ne.iI,_t.Wk,Ze.g7,$t.YN,We.jL,Dn,bt.D6,vt.y,ve.MY],styles:[".mat-column-select[_ngcontent-%COMP%]{padding-right:0!important}.document-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{display:inline-block}.download-mat-spinner[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{width:18px!important;height:18px!important}mat-accordion[_ngcontent-%COMP%]{display:flex;justify-content:end}mat-panel-title[_ngcontent-%COMP%]{color:#f14d7c!important}mat-panel-description[_ngcontent-%COMP%]{justify-content:center}mat-expansion-panel-header[_ngcontent-%COMP%]   .mat-expansion-indicator[_ngcontent-%COMP%]{visibility:hidden!important}"]})}return i})(),ga=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-single-case-details"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(a,s){1&a&&e.nrm(0,"app-single-case-table-pagination")},dependencies:[pa]})}return i})();var _i=m(2014);const va=[{path:"",children:[{path:"document-upload",component:zi,canActivate:[_i.K],data:{title:"Available Cases",expectedRole:k.N.ADMIN}},{path:"document-access",component:ln,canActivate:[_i.K],data:{title:"Manage Document Access",expectedRole:k.N.ADMIN}},{path:"single-case",component:ga,data:{title:"Case Detail"}}]}]}}]);