"use strict";(self.webpackChunkdocument_management_system_lw_frontend=self.webpackChunkdocument_management_system_lw_frontend||[]).push([[678],{7224:(C,g,r)=>{r.d(g,{y:()=>F});var R=r(177),n=r(1626),p=r(7843),f=r(3953),d=r(2168),w=r(9437),s=r(8810),a=r(7418),l=r(9088);const u=(e,S)=>{const y=(0,f.WQX)(d.Ix),v=(0,f.WQX)(l.u),h=(0,f.WQX)(a.I),b=v.getToken();return S(!["/register","/login","/verify-otp","/resend-otp"].some(E=>e.url.includes(E))&&b?e.clone({setHeaders:{Authorization:`Bearer ${b}`}}):e).pipe((0,w.W)(E=>"TOKEN_EXPIRED"===E?.error?.errorCode?(h.errorToaster("top","Your session has expired. Please sign in again to access your account."),v.logout(),y.navigate(["/authentication/login"]),(0,s.$)(()=>new Error("Session expired"))):(0,s.$)(()=>E)))};let F=(()=>{class e{static#e=this.\u0275fac=function(v){return new(v||e)};static#t=this.\u0275mod=f.$C({type:e});static#r=this.\u0275inj=f.G2t({providers:[p.Z,(0,n.$R)((0,n.b$)([u]))],imports:[R.MD]})}return e})()},7843:(C,g,r)=>{r.d(g,{Z:()=>f});var n=r(3953),p=r(1626);let f=(()=>{class d{constructor(s){this.http=s,this.baseUrl="http://lawyercloud.work.gd/api"}get(s,a){return this.http.get(`${this.baseUrl}${s}`,{params:a})}post(s,a,l){return this.http.post(`${this.baseUrl}${s}`,a,l)}put(s,a,l){return this.http.put(`${this.baseUrl}${s}`,a,l)}delete(s,a){return this.http.delete(`${this.baseUrl}${s}`,a)}static#e=this.\u0275fac=function(a){return new(a||d)(n.KVO(p.Qq))};static#t=this.\u0275prov=n.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},5678:(C,g,r)=>{r.r(g),r.d(g,{AuthenticationRoutes:()=>B});var R=r(981),n=r(9417),p=r(2168),f=r(7722),d=r(177),w=r(7224),s=r(9291),a=r(2507),l=r(4052),u=r(2155),F=r(7780),e=r(3953),S=r(7418),y=r(5623),v=r(4535),h=r(2102),b=r(9631),P=r(5596),j=r(8834),x=r(9213),E=r(4823);const I=()=>["/dashboard"],$=()=>["/authentication/login"];function k(o,c){if(1&o&&(e.qex(0),e.nrm(1,"app-otp",1),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("otpType",t.otpType)}}function N(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Name is required. "),e.k0s())}function A(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Name must be at least 6 characters long. "),e.k0s())}function T(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Name cannot exceed 50 characters. "),e.k0s())}function G(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Email is required. "),e.k0s())}function Y(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Enter a valid email address. "),e.k0s())}function _(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Mobile number is required. "),e.k0s())}function X(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Enter a valid 9-digit mobile number. "),e.k0s())}function L(o,c){1&o&&(e.j41(0,"mat-icon",23),e.EFF(1," error "),e.k0s())}function J(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Password is required. "),e.k0s())}function U(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Confirm Password is required. "),e.k0s())}function D(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Passwords do not match. "),e.k0s())}function V(o,c){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div",2)(2,"div",3)(3,"div",4)(4,"mat-card",5)(5,"mat-card-content",6)(6,"div",7),e.nrm(7,"a",8),e.k0s(),e.j41(8,"form",9)(9,"mat-label",10),e.EFF(10,"Name"),e.k0s(),e.j41(11,"mat-form-field",11),e.nrm(12,"input",12),e.DNE(13,N,2,0,"mat-error",0)(14,A,2,0,"mat-error",0)(15,T,2,0,"mat-error",0),e.k0s(),e.j41(16,"mat-label",10),e.EFF(17,"Email Address"),e.k0s(),e.j41(18,"mat-form-field",11),e.nrm(19,"input",13),e.DNE(20,G,2,0,"mat-error",0)(21,Y,2,0,"mat-error",0),e.k0s(),e.j41(22,"mat-label",10),e.EFF(23,"Mobile Number"),e.k0s(),e.j41(24,"mat-form-field",11)(25,"span",14),e.EFF(26,"+94 \xa0"),e.k0s(),e.nrm(27,"input",15),e.DNE(28,_,2,0,"mat-error",0)(29,X,2,0,"mat-error",0),e.k0s(),e.j41(30,"mat-label",10),e.EFF(31,"Password"),e.k0s(),e.j41(32,"mat-form-field",11),e.nrm(33,"input",16),e.DNE(34,L,2,0,"mat-icon",17),e.j41(35,"mat-icon",18),e.bIt("click",function(){e.eBV(t);const m=e.XpG();return e.Njj(m.showHidePassword())}),e.EFF(36),e.k0s(),e.DNE(37,J,2,0,"mat-error",0),e.k0s(),e.j41(38,"mat-label",10),e.EFF(39,"Confirm Password"),e.k0s(),e.j41(40,"mat-form-field",11)(41,"input",19),e.bIt("keydown.enter",function(){e.eBV(t);const m=e.XpG();return e.Njj(m.submit())}),e.k0s(),e.j41(42,"mat-icon",18),e.bIt("click",function(){e.eBV(t);const m=e.XpG();return e.Njj(m.showHideConfirmPassword())}),e.EFF(43),e.k0s(),e.DNE(44,U,2,0,"mat-error",0)(45,D,2,0,"mat-error",0),e.k0s(),e.j41(46,"button",20),e.bIt("click",function(){e.eBV(t);const m=e.XpG();return e.Njj(m.submit())}),e.EFF(47," Sign Up "),e.k0s()(),e.j41(48,"span",21),e.EFF(49,"Already have an Account? "),e.j41(50,"a",22),e.EFF(51," Sign In"),e.k0s()()()()()()(),e.bVm()}if(2&o){const t=e.XpG();e.R7$(7),e.Y8G("routerLink",e.lJ4(19,I)),e.R7$(),e.Y8G("formGroup",t.form),e.R7$(5),e.Y8G("ngIf",t.f.name.hasError("required")&&(t.f.name.touched||t.f.name.dirty)),e.R7$(),e.Y8G("ngIf",t.f.name.hasError("minlength")&&(t.f.name.touched||t.f.name.dirty)),e.R7$(),e.Y8G("ngIf",t.f.name.hasError("maxlength")&&(t.f.name.touched||t.f.name.dirty)),e.R7$(5),e.Y8G("ngIf",t.f.email.hasError("required")&&(t.f.email.touched||t.f.email.dirty)),e.R7$(),e.Y8G("ngIf",t.f.email.hasError("email")&&(t.f.email.touched||t.f.email.dirty)),e.R7$(7),e.Y8G("ngIf",t.f.mobileNumber.hasError("required")&&(t.f.mobileNumber.touched||t.f.mobileNumber.dirty)),e.R7$(),e.Y8G("ngIf",t.f.mobileNumber.hasError("pattern")&&(t.f.mobileNumber.touched||t.f.mobileNumber.dirty)),e.R7$(4),e.Y8G("type",t.hidePassword?"password":"text"),e.R7$(),e.Y8G("ngIf",t.f.password.invalid&&(t.f.password.touched||t.f.password.dirty)),e.R7$(2),e.JRh(t.hidePassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",t.f.password.hasError("required")&&(t.f.password.touched||t.f.password.dirty)),e.R7$(4),e.Y8G("type",t.hideConfirmPassword?"password":"text"),e.R7$(2),e.JRh(t.hidePassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",t.f.confirmPassword.hasError("required")&&(t.f.confirmPassword.touched||t.f.confirmPassword.dirty)),e.R7$(),e.Y8G("ngIf",t.f.confirmPassword.hasError("passwordsMismatch")&&(t.f.confirmPassword.touched||t.f.confirmPassword.dirty)),e.R7$(),e.Y8G("disabled",t.form.invalid),e.R7$(4),e.Y8G("routerLink",e.lJ4(20,$))}}const B=[{path:"",children:[{path:"login",component:R.J},{path:"register",component:(()=>{class o{constructor(t,i,m,O,H){this.router=t,this.alertService=i,this.apiService=m,this.storageService=O,this.fullPageLoaderService=H,this.hideConfirmPassword=!0,this.hidePassword=!0,this.isRegisterEnable=!0,this.isOtpEnable=!1,this.otpType=l.p.REGISTER_OTP_PENDING,this.form=new n.gE({name:new n.MJ("",[n.k0.required,n.k0.minLength(3),n.k0.maxLength(50)]),email:new n.MJ("",[n.k0.required,n.k0.email]),mobileNumber:new n.MJ("",[n.k0.required,n.k0.pattern(/^\d{9}$/)]),password:new n.MJ("",[n.k0.required,n.k0.minLength(8),n.k0.pattern(/^(?=.*[A-Z])(?=.*\d)(?=.*[a-zA-Z]).{8,}$/)]),confirmPassword:new n.MJ("",[n.k0.required])},{validators:F.R.passwordMatchValidator})}get f(){return this.form.controls}submit(){this.form.invalid?console.error("Form is invalid"):(this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.registerUser({name:this.form.value.name,email:this.form.value.email,mobileNumber:`+94${this.form.value.mobileNumber}`,password:this.form.value.password}).subscribe({next:i=>{console.log("Registration successful:",i),this.isOtpEnable=!0,this.isRegisterEnable=!1,this.alertService.successToster("top-end","OTP verification sent to your mobile",5e3),this.storageService.setItem("user",i.data.user_id)},error:i=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Registration failed:",i),i.error.errorCode===u.C.ALREADY_EXIST?this.alertService.confirmAlert("Hay we know you!","You have registered befor with this email","info",!0,"No",!0,"Try SignIn",!1,this.calbackForPendingRegisterOtpVerification.bind(this)):this.alertService.errorAlert("center","Registration failed","",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Registration request completed.")}}))}calbackForPendingRegisterOtpVerification(){this.router.navigate(["/authentication/login"])}showHideConfirmPassword(){this.hideConfirmPassword=!this.hideConfirmPassword}showHidePassword(){this.hidePassword=!this.hidePassword}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(p.Ix),e.rXU(S.I),e.rXU(a.F),e.rXU(y.n),e.rXU(v.J))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-side-register"]],standalone:!0,features:[e.Jv_([a.F]),e.aNF],decls:2,vars:2,consts:[[4,"ngIf"],[3,"otpType"],[1,"blank-layout-container","justify-content-center","align-items-center","bg-light"],[1,"position-relative","row","w-100","h-100","p-t-20","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],[3,"routerLink"],[1,"m-t-30",3,"formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","name","placeholder","Enter your name"],["matInput","","formControlName","email","type","email","placeholder","Enter your email"],["matTextPrefix",""],["matInput","","formControlName","mobileNumber","type","tel","placeholder","71-222-2222"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["matSuffix","","matTooltip","Password must be at least 8 characters long.\n        Password must include an uppercase letter, a number, and a minimum of 8 characters.\n        Confirm Password",4,"ngIf"],["matSuffix","",1,"show-hide-icon",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","Confirm your password",3,"keydown.enter","type"],["mat-flat-button","","color","primary",1,"w-100",3,"click","disabled"],[1,"d-block","f-w-500","text-center","m-t-24"],[1,"text-decoration-none","text-primary","f-w-500","f-s-14",3,"routerLink"],["matSuffix","","matTooltip","Password must be at least 8 characters long.\n        Password must include an uppercase letter, a number, and a minimum of 8 characters.\n        Confirm Password"]],template:function(i,m){1&i&&e.DNE(0,k,2,1,"ng-container",0)(1,V,52,21,"ng-container",0),2&i&&(e.Y8G("ngIf",m.isOtpEnable&&!m.isRegisterEnable),e.R7$(),e.Y8G("ngIf",m.isRegisterEnable&&!m.isOtpEnable))},dependencies:[d.MD,d.bT,p.iI,p.Wk,f.G,h.rl,h.nJ,h.TL,h.JW,h.yw,b.fg,P.RN,P.m2,j.$z,x.An,E.oV,n.YN,n.qT,n.me,n.BC,n.cb,n.X1,n.j4,n.JD,w.y,s.x],encapsulation:2})}return o})()}]}]}}]);