(self.webpackChunkdocument_management_system_lw_frontend=self.webpackChunkdocument_management_system_lw_frontend||[]).push([[862],{6862:(Tt,w,I)=>{"use strict";I.r(w),I.d(w,{DocumentManagemntRoutes:()=>$e});var k=I(177),u=I(5596),l=I(9159),s=I(7722),f=I(9213),y=I(9115),C=I(8834),_=I(6695),b=I(450),r=I(4912),h=I(2529),a=I(2168),c=I(6633),o=I(1626),t=I(3953),x=I(7843);let D=(()=>{class g{constructor(i){this.apiService=i}getOneCase(i){return this.apiService.get(`/cases/find/${i}`)}getAllCases(i){return this.apiService.get(`/cases/?case_id=${i}`)}getAllCasesWithServerSidePagination(i,m,S,B){const ot=(new o.Nl).set("page",i.toString()).set("limit",m.toString()).set("sortBy",S).set("order",B);return this.apiService.get("/cases",ot)}getAllowedUsersByDocId(i){return this.apiService.get(`/documents/${i}/users`)}getAllUsers(){return this.apiService.get("/users")}createNewCase(i,m){return this.apiService.post("/cases",i,m)}updateCase(i,m,S){return this.apiService.put(`/cases/${m}`,i,S)}removeCase(i){return this.apiService.delete(`/cases/${i}`)}removeDocumentCasecase(i){return this.apiService.delete(`/documents/${i}`)}fileBatchUpload(i,m){const S={headers:new o.Lr({Accept:"application/json"}),reportProgress:!0,observe:"events"};return this.apiService.post(`/documents/batch-upload/${i}`,m,S)}fileBatchDownload(i,m){return this.apiService.post("/documents/batch-download/",{case_id:i,fileKeys:m})}singleFileDownload(i,m){return this.apiService.post("/documents/single-download",{case_id:i,fileUrl:m},{responseType:"blob"})}updateDocumentAccess(i,m,S){return this.apiService.put("/documents/assign-access",{documentId:m,userIds:i},S)}static#t=this.\u0275fac=function(m){return new(m||g)(t.KVO(x.Z))};static#e=this.\u0275prov=t.jDH({token:g,factory:g.\u0275fac})}return g})();var E=I(2042),L=I(9172),U=I(5558),$=I(6354),P=I(9437),X=I(7224),H=I(5505),v=I(8149),z=I(7418),n=I(4006),N=I(9088),it=I(4535),V=I(2102),rt=I(9631);const W=()=>[5,10,25,100];function nt(g,J){if(1&g){const i=t.RV6();t.j41(0,"mat-form-field",11)(1,"input",12),t.bIt("keyup",function(S){t.eBV(i);const B=t.XpG();return t.Njj(B.applyFilter(S))}),t.k0s()()}}function O(g,J){1&g&&t.nrm(0,"app-content-loader",13),2&g&&t.Y8G("loaderType","button")}function F(g,J){1&g&&(t.j41(0,"button",14),t.nrm(1,"i-tabler",15),t.k0s()),2&g&&t.Y8G("routerLink","/document-managemnt/single-case")}function et(g,J){1&g&&(t.j41(0,"th",26),t.EFF(1," Case ID "),t.k0s())}function Q(g,J){if(1&g&&(t.j41(0,"td",27)(1,"div",28)(2,"div",29)(3,"h6",30),t.EFF(4),t.k0s()()()()),2&g){const i=J.$implicit;t.R7$(4),t.SpI(" ",i.case_id," ")}}function K(g,J){1&g&&(t.j41(0,"th",26),t.EFF(1," Documents "),t.k0s())}function ut(g,J){if(1&g&&(t.j41(0,"td",31),t.nrm(1,"i-tabler",32),t.EFF(2),t.k0s()),2&g){const i=J.$implicit;t.R7$(2),t.SpI(" ",i.documents.length," ")}}function gt(g,J){1&g&&(t.j41(0,"th",26),t.EFF(1," Last Updated Date "),t.k0s())}function at(g,J){if(1&g&&(t.j41(0,"td",33),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&g){const i=J.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,i.updatedAt,"dd MMM yyyy, HH:mm:ss")," ")}}function lt(g,J){1&g&&t.nrm(0,"tr",34)}function mt(g,J){if(1&g){const i=t.RV6();t.j41(0,"tr",35),t.bIt("click",function(){const S=t.eBV(i).$implicit,B=t.XpG(2);return t.Njj(B.navigateSingleCase(S))}),t.k0s()}}function ht(g,J){if(1&g&&(t.j41(0,"table",16),t.qex(1,17),t.DNE(2,et,2,0,"th",18)(3,Q,5,1,"td",19),t.bVm(),t.qex(4,20),t.DNE(5,K,2,0,"th",18)(6,ut,3,1,"td",21),t.bVm(),t.qex(7,22),t.DNE(8,gt,2,0,"th",18)(9,at,3,4,"td",23),t.bVm(),t.DNE(10,lt,1,0,"tr",24)(11,mt,1,0,"tr",25),t.k0s()),2&g){const i=t.XpG();t.Y8G("dataSource",i.dataSource),t.R7$(10),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns)}}function wt(g,J){1&g&&t.nrm(0,"app-content-loader",36),2&g&&t.Y8G("loaderType","table")}function yt(g,J){1&g&&t.nrm(0,"app-content-loader",13),2&g&&t.Y8G("loaderType","paginator")}let e=(()=>{class g{constructor(i,m,S,B,ot,Ct,xt){this.router=i,this.activatedRoute=m,this.apiService=S,this.alertService=B,this.deleteConfirmDialog=ot,this.authService=Ct,this.fullPageLoaderService=xt,this.tableData=[],this.displayedColumns=["id","documents","last_updated"],this.removeDialogTitle="Do you want to remove?",this.messageBodayKey="",this.editRouterLink="",this.resultsLength=0,this.isLoadingResults=!0,this.isLoading=!0,this.isRateLimitReached=!1,this.pageSize=5,this.isAdmin=!1,this.caseId="",this.dataSource=new l.I6}ngOnInit(){this.isAdmin=this.authService.hasRole(H.N.ADMIN)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.sort&&(this.dataSource.sort=this.sort),this.paginator.page.pipe((0,L.Z)({}),(0,U.n)(()=>(this.isLoadingResults=!0,this.requestTableData(this.sort?this.sort.active:"case_id",this.sort?this.sort.direction:"asc")))).subscribe(i=>{this.isLoadingResults=!1,this.tableData=i,this.dataSource=new l.I6(this.tableData)})}isBackDisabled(){return 0===this.paginator.pageIndex}isNextDisabled(){return this.paginator.pageIndex===Math.ceil(this.resultsLength/this.paginator.pageSize)-1}requestTableData(i,m){return this.apiService.getAllCasesWithServerSidePagination(this.paginator.pageIndex,this.paginator.pageSize,i,m).pipe((0,$.T)(S=>(this.resultsLength=S.total,S.data)),(0,P.W)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,[])))}onPageChange(){this.isLoadingResults=!0,this.requestTableData(this.sort?this.sort.active:"case_id",this.sort?this.sort.direction:"asc").subscribe(S=>{this.isLoadingResults=!1,this.resultsLength=S.total,this.dataSource.data=S.data})}applyFilter(i){this.dataSource.filter=i.target.value.trim().toLowerCase()}openDialog(i,m,S){this.deleteConfirmDialog.open(c.P,{width:"30%",enterAnimationDuration:i,exitAnimationDuration:m,data:{item:S[this.messageBodayKey],title:this.removeDialogTitle}})}navigateSingleCase(i){console.log(i),this.router.navigate(["/document-managemnt/single-case"],{queryParams:{id:i.id}})}static#t=this.\u0275fac=function(m){return new(m||g)(t.rXU(a.Ix),t.rXU(a.nX),t.rXU(D),t.rXU(z.I),t.rXU(n.bZ),t.rXU(N.u),t.rXU(it.J))};static#e=this.\u0275cmp=t.VBU({type:g,selectors:[["app-case-table-pagination"]],viewQuery:function(m,S){if(1&m&&(t.GBs(E.B4,5),t.GBs(_.iy,5)),2&m){let B;t.mGM(B=t.lsd())&&(S.sort=B.first),t.mGM(B=t.lsd())&&(S.paginator=B.first)}},standalone:!0,features:[t.Jv_([D,k.vh]),t.aNF],decls:13,vars:12,consts:[[1,"cardWithShadow"],[1,"row","justify-content-between","m-l-4","m-r-4"],[1,"col-left"],["appearance","outline","class","w-100 m-b-0","color","primary",4,"ngIf"],[1,"col-right","m-r-30","m-t-2"],[3,"loaderType",4,"ngIf"],["color","primary","mat-stroked-button","",3,"routerLink",4,"ngIf"],[1,"table-responsive"],["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["style","padding-top: 2px !important;",3,"loaderType",4,"ngIf"],[3,"page","length","pageSize","pageSizeOptions"],["appearance","outline","color","primary",1,"w-100","m-b-0"],["matInput","","placeholder","Filter",3,"keyup"],[3,"loaderType"],["color","primary","mat-stroked-button","",3,"routerLink"],["name","users-plus",1,"icon-22",2,"color","blue"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","documents"],["mat-cell","",4,"matCellDef"],["matColumnDef","last_updated"],["mat-cell","","class","mat-body-1 f-s-12 f-w-600",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],[1,"d-flex","align-items-center"],[1,"m-l-16"],[1,"mat-body-1","f-s-12","f-w-600"],["mat-cell",""],["name","file-type-pdf",1,"icon-22"],["mat-cell","",1,"mat-body-1","f-s-12","f-w-600"],["mat-header-row",""],["mat-row","",3,"click"],[2,"padding-top","2px !important",3,"loaderType"]],template:function(m,S){1&m&&(t.j41(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"div",2),t.DNE(4,nt,2,0,"mat-form-field",3),t.k0s(),t.j41(5,"div",4),t.DNE(6,O,1,1,"app-content-loader",5)(7,F,2,1,"button",6),t.k0s()(),t.j41(8,"div",7),t.DNE(9,ht,12,3,"table",8)(10,wt,1,1,"app-content-loader",9)(11,yt,1,1,"app-content-loader",5),t.k0s(),t.j41(12,"mat-paginator",10),t.bIt("page",function(){return S.onPageChange()}),t.k0s()()()),2&m&&(t.R7$(4),t.Y8G("ngIf",!S.isLoadingResults),t.R7$(2),t.Y8G("ngIf",S.isLoadingResults),t.R7$(),t.Y8G("ngIf",!S.isLoadingResults),t.R7$(2),t.Y8G("ngIf",!S.isLoadingResults),t.R7$(),t.Y8G("ngIf",S.isLoadingResults),t.R7$(),t.Y8G("ngIf",S.isLoadingResults),t.R7$(),t.xc7("visibility",S.isLoadingResults?"hidden":"visible"),t.Y8G("length",S.resultsLength)("pageSize",S.pageSize)("pageSizeOptions",t.lJ4(11,W)))},dependencies:[l.tP,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,k.MD,k.bT,k.vh,u.Hu,u.RN,u.m2,s.G,V.rl,rt.fg,C.$z,_.iy,f.m_,y.Cn,C.Hl,b.mV,r.X4,r.Jc,h.Ph,a.iI,a.Wk,X.y,v.G],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:#43cdf7!important}"]})}return g})(),j=(()=>{class g{static#t=this.\u0275fac=function(m){return new(m||g)};static#e=this.\u0275cmp=t.VBU({type:g,selectors:[["app-document-upload"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(m,S){1&m&&t.nrm(0,"app-case-table-pagination")},dependencies:[e],encapsulation:2})}return g})();var T=I(9417),p=I(5951),d=I(5024),A=I(2765),G=I(8617),M=I(850),R=I(6471),Y=I(7336),q=I(771),Z=I(2798),tt=I(152),ct=I(1985);let st=(()=>{class g{transform(i,m){if(!i||!m)return i;const S=m.toLowerCase();return i.filter(B=>B.name.toLowerCase().includes(S)||B.email.toLowerCase().includes(S)||B.role.toLowerCase().includes(S))}static#t=this.\u0275fac=function(m){return new(m||g)};static#e=this.\u0275pipe=t.EJ8({name:"userFilter",type:g,pure:!0,standalone:!0})}return g})();var _t=I(5478),St=I(356),dt=I(2155),vt=function(g){return g.NEW="NEW",g.REMOVED="REMOVED",g.CURRENT="CURRENT",g}(vt||{});let ft=(()=>{class g{transform(i,m,S){return i&&0!=m.size?i.filter(B=>S?m.has(B.user_id+"")&&m.get(B.user_id+"")!==vt.REMOVED:!m.has(B.user_id+"")||m.get(B.user_id+"")===vt.REMOVED):S?[]:i}static#t=this.\u0275fac=function(m){return new(m||g)};static#e=this.\u0275pipe=t.EJ8({name:"userFilterByAccessStatus",type:g,pure:!1,standalone:!0})}return g})();class At{static getRandomColor(){let i="#";for(let m=0;m<6;m++)i+="0123456789ABCDEF"[Math.floor(16*Math.random())];return i}}var Rt=I(6600),pt=I(3902);const Ot=()=>[5,10,20],Ut=()=>({standalone:!0});function zt(g,J){if(1&g&&(t.j41(0,"mat-option",8),t.EFF(1),t.k0s()),2&g){const i=J.$implicit;t.Y8G("value",i),t.R7$(),t.JRh(i.case_id)}}function jt(g,J){1&g&&(t.j41(0,"th",29),t.EFF(1," Select "),t.k0s())}function Pt(g,J){if(1&g){const i=t.RV6();t.j41(0,"td",30)(1,"mat-radio-button",31),t.bIt("change",function(S){const B=t.eBV(i).$implicit,ot=t.XpG(2);return t.Njj(ot.onRowSelectionChange(S,B))}),t.k0s()()}if(2&g){const i=J.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("checked",i.document_id===m.currentSelectedDocumentId)("value",i)("aria-label","Select "+i.document_name)}}function Dt(g,J){if(1&g&&(t.j41(0,"td",32)(1,"div",33),t.nrm(2,"i-tabler",34),t.j41(3,"div",35)(4,"div"),t.EFF(5),t.k0s(),t.j41(6,"div",36),t.EFF(7),t.k0s()()()()),2&g){const i=J.$implicit;t.R7$(5),t.JRh(i.document_name),t.R7$(2),t.SpI("",i.file_size,"MB")}}function It(g,J){if(1&g){const i=t.RV6();t.j41(0,"div",38)(1,"a",19),t.nrm(2,"i-tabler",39),t.k0s(),t.j41(3,"a",40),t.bIt("click",function(){t.eBV(i);const S=t.XpG().$implicit,B=t.XpG(2);return t.Njj(B.deleteConfirmation(S.document_name))}),t.nrm(4,"i-tabler",41),t.k0s()()}}function Mt(g,J){if(1&g&&(t.j41(0,"td",32),t.DNE(1,It,5,0,"div",37),t.k0s()),2&g){const i=J.$implicit,m=t.XpG(2);t.R7$(),t.Y8G("ngIf",m.currentSelectedDocumentId===i.document_id)}}function Vt(g,J){1&g&&t.nrm(0,"tr",42)}function $t(g,J){if(1&g){const i=t.RV6();t.j41(0,"mat-list-item",54)(1,"div",55)(2,"app-user-thumbnail",56),t.bIt("clickActionIcon",function(S){t.eBV(i);const B=t.XpG(3);return t.Njj(B.removeAccessWarn(S))}),t.k0s()()()}if(2&g){const i=J.$implicit;t.R7$(2),t.Y8G("item",i)("hasActionIcon",!0)("iconName","circle-minus")("iconColor","rgb(219, 10, 59)")}}function Yt(g,J){if(1&g){const i=t.RV6();t.j41(0,"mat-list-item")(1,"div",55)(2,"app-user-thumbnail",56),t.bIt("clickActionIcon",function(S){t.eBV(i);const B=t.XpG(3);return t.Njj(B.giveAccessWarn(S))}),t.k0s()()()}if(2&g){const i=J.$implicit;t.R7$(2),t.Y8G("item",i)("hasActionIcon",!0)("iconName","circle-plus")("iconColor","rgb(10, 17, 219)")}}function Wt(g,J){if(1&g){const i=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",43)(3,"mat-form-field",44)(4,"input",45),t.mxI("ngModelChange",function(S){t.eBV(i);const B=t.XpG(2);return t.DH7(B.filterText,S)||(B.filterText=S),t.Njj(S)}),t.k0s()()()()(),t.j41(5,"div",2)(6,"div",3)(7,"mat-card",1)(8,"mat-card-header")(9,"mat-card-title",46),t.EFF(10),t.nI1(11,"userFilterByAccessStatus"),t.nI1(12,"userFilter"),t.k0s()(),t.j41(13,"mat-card-content")(14,"cdk-virtual-scroll-viewport",47)(15,"mat-list"),t.DNE(16,$t,3,4,"mat-list-item",48),t.nI1(17,"userFilterByAccessStatus"),t.nI1(18,"userFilter"),t.k0s()()()()(),t.j41(19,"div",3)(20,"mat-card",1)(21,"mat-card-header")(22,"mat-card-title",46),t.EFF(23),t.nI1(24,"userFilterByAccessStatus"),t.k0s()(),t.j41(25,"mat-card-content")(26,"cdk-virtual-scroll-viewport",47)(27,"mat-list"),t.DNE(28,Yt,3,4,"mat-list-item",49),t.nI1(29,"userFilterByAccessStatus"),t.nI1(30,"userFilter"),t.k0s()()()()()(),t.j41(31,"mat-card-actions",50)(32,"button",51),t.bIt("click",function(){t.eBV(i);const S=t.XpG(2);return t.Njj(S.clickBack())}),t.j41(33,"mat-icon",52),t.EFF(34,"arrow_back"),t.k0s(),t.EFF(35," Back"),t.k0s(),t.j41(36,"button",53),t.EFF(37,"Save This"),t.k0s()()}if(2&g){const i=t.XpG(2);t.R7$(4),t.Y8G("ngModelOptions",t.lJ4(34,Ut)),t.R50("ngModel",i.filterText),t.R7$(6),t.SpI("Allowed Members (",t.i5U(12,13,t.brH(11,9,i.userTableDataNotAllowed,i.updatedUserIdMap,!0),i.filterText).length,") "),t.R7$(6),t.Y8G("cdkVirtualForOf",t.i5U(18,20,t.brH(17,16,i.userTableDataNotAllowed,i.updatedUserIdMap,!0),i.filterText))("cdkVirtualForTrackBy",i.trackByUserId),t.R7$(7),t.SpI("Not Allowed Members (",t.brH(24,23,i.userTableDataNotAllowed,i.updatedUserIdMap,!1).length,")"),t.R7$(5),t.Y8G("cdkVirtualForOf",t.i5U(30,31,t.brH(29,27,i.userTableDataNotAllowed,i.updatedUserIdMap,!1),i.filterText))("cdkVirtualForTrackBy",i.trackByUserId),t.R7$(8),t.Y8G("disabled",!i.selectedCase)}}function Xt(g,J){if(1&g){const i=t.RV6();t.j41(0,"mat-card",9)(1,"mat-card-header")(2,"div",10)(3,"div",11)(4,"mat-label",12),t.EFF(5),t.k0s()()()(),t.j41(6,"mat-card-content")(7,"div",13)(8,"mat-form-field",14)(9,"input",15),t.bIt("keyup",function(S){t.eBV(i);const B=t.XpG();return t.Njj(B.applyFilter(S))}),t.k0s()()(),t.j41(10,"div",16)(11,"div",17)(12,"div",2)(13,"div",18),t.nrm(14,"span",19),t.k0s()()(),t.j41(15,"table",20),t.qex(16,21),t.DNE(17,jt,2,0,"th",22)(18,Pt,2,3,"td",23),t.bVm(),t.qex(19,24),t.DNE(20,Dt,8,2,"td",25),t.bVm(),t.qex(21,26),t.DNE(22,Mt,2,1,"td",25),t.bVm(),t.DNE(23,Vt,1,0,"tr",27),t.k0s()(),t.nrm(24,"mat-paginator",28),t.k0s()(),t.DNE(25,Wt,38,35)}if(2&g){const i=t.XpG();t.R7$(5),t.SpI(" Documents (",i.tableData.length,") "),t.R7$(10),t.Y8G("dataSource",i.dataSource),t.R7$(8),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(5,Ot)),t.R7$(),t.vxM(i.currentSelectedDocumentId?25:-1)}}let Zt=(()=>{class g{constructor(i,m,S,B,ot,Ct){this.location=i,this.router=m,this.alertService=S,this.authService=B,this.fullPageLoaderService=ot,this.apiService=Ct,this.caseId="",this.isReadOnly=!0,this.isLoading=!0,this.myControl=new T.MJ(""),this.isAdmin=!0,this.tableData=[],this.selectData=[],this.userTableDataAllowed=[],this.userTableDataNotAllowed=[],this.filterText="",this.displayedColumns=["select","name","action"],this.selection=new d.CB(!0,[]),this.dataSource=new l.I6,this.removeDialogTitle="Do you want to fremove?",this.messageBodayKey="",this.editRouterLink="",this.caseName="CASE_2012_SPE_15_1",this.caseDescription="Test description",this.isUpload=!1,this.updatedUserIdMap=new Map,this.userCurrentMap=new Map,this.currentSelectedDocumentId="",this.deleteConfirmDialog=(0,t.WQX)(n.bZ),this.documentUploadDialog=(0,t.WQX)(n.bZ),this.separatorKeysCodes=[Y.Fm,Y.KE],this.currentUserOrGroup=(0,t.geq)(""),this.usersOrGroups=(0,t.vPA)([]),this.allUsersOrGroups=(0,t.vPA)([{name:"Dilupa",id:"100WS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"1",name:"Dilupa Marasinghe",email:"test@gmail.com",role:H.N.ADMIN,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-1.jpg"}},{name:"CASE November 1 -23",id:"CASE_441_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"CASE Jan 3 -23",id:"CASE_201_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Randima",id:"102RANWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"3",name:"Randima Senanayake",email:"test@gmail.com",role:H.N.USER,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-3.jpg"}},{name:"CASE Mrch 3 -12",id:"CASE_011_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Kasun",id:"100KSWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"5",name:"K.S.C.Janith",email:"test@gmail.com",role:H.N.USER,status:H.z.DEACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-5.jpg"}}]),this.filteredUsersOrGroups=(0,t.EWP)(()=>{const xt=this.currentUserOrGroup().toLowerCase(),Ft=new Set(this.usersOrGroups().map(bt=>bt.id));return this.allUsersOrGroups().filter(bt=>!Ft.has(bt.id)).filter(bt=>bt.name.toLowerCase().includes(xt))}),this.announcer=(0,t.WQX)(G.Ai),this.filteredFruits=(0,t.EWP)(()=>{const xt=this.currentUserOrGroup().toLowerCase(),Ft=new Set(this.usersOrGroups().map(bt=>bt.id));return this.allUsersOrGroups().filter(bt=>!Ft.has(bt.id)).filter(bt=>bt.name.toLowerCase().includes(xt))})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}trackByUserId(i,m){return m.user_id}ngOnInit(){this.loadAllUsers(),this.dataSource=new l.I6(this.tableData),this.filteredOptions=this.myControl.valueChanges.pipe((0,L.Z)(""),(0,tt.B)(300),(0,U.n)(i=>this.searchCases(i)))}searchCases(i){return!i||i.length<2?new ct.c(m=>{m.next([]),m.complete()}):this.apiService.getAllCases(i).pipe((0,$.T)(m=>m.data))}loadAllCaseData(){if(!this.caseId)return this.isLoading=!0,void console.error("User Id is invalid");this.isReadOnly=!St.q.hasCommonEditPermission(this.authService),this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getOneCase(this.caseId).subscribe({next:i=>{console.log("Case fetching successful:",i),this.caseData=i.data,this.tableData=this.caseData.documents,this.loadDocumentTableData(),console.log("this.caseData"),console.log(this.caseData),console.log("this.caseData"),this.isLoading=!1},error:i=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Case loading failed:",i),i.error.errorCode===dt.C.NOT_FOUND?this.alertService.errorAlert("center","Case not found",i.error.message,3e3,!1,"",!1):i.error.errorCode===dt.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to load this case",i.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while loading case details","",3e3,!1,"",!1),this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case loading request completed.")}})}loadCaseData(){if(!this.caseId)return this.isLoading=!0,void console.error("User Id is invalid");this.isReadOnly=!St.q.hasCommonEditPermission(this.authService),this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getOneCase(this.caseId).subscribe({next:i=>{console.log("Case fetching successful:",i),this.caseData=i.data,this.tableData=this.caseData.documents,this.loadDocumentTableData(),console.log("this.caseData"),console.log(this.caseData),console.log("this.caseData"),this.isLoading=!1},error:i=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Case loading failed:",i),i.error.errorCode===dt.C.NOT_FOUND?this.alertService.errorAlert("center","Case not found",i.error.message,3e3,!1,"",!1):i.error.errorCode===dt.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to load this case",i.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while loading case details","",3e3,!1,"",!1),this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case loading request completed.")}})}loadAllUsers(){this.isReadOnly=!St.q.hasCommonEditPermission(this.authService),this.updatedUserIdMap=new Map,this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getAllUsers().subscribe({next:i=>{console.log("All users fetching successful - Document access:",i),this.userTableDataNotAllowed=i.data,this.userTableDataNotAllowed.map(m=>m.profile_image=At.getRandomColor()),this.isLoading=!1},error:i=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("All user loading failed:",i),this.alertService.errorAlert("center","Error while loading user details","",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("All user details loading request completed.")}})}loadAllowedUsers(i){if(!i)return this.isLoading=!0,void console.error("Document Id is invalid");this.isReadOnly=!St.q.hasCommonEditPermission(this.authService),this.updatedUserIdMap=new Map,this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getAllowedUsersByDocId(i).subscribe({next:m=>{console.log("Document access details fetching successful:",m),this.userTableDataAllowed=m.data,this.userTableDataAllowed.forEach(S=>{this.updatedUserIdMap.set(S.user_id.toString(),vt.CURRENT),this.userCurrentMap.set(S.user_id,S)}),this.userTableDataAllowed.map(S=>S.profile_image=At.getRandomColor()),console.log("documentId"),console.log(i),console.log("documentId"),this.isLoading=!1},error:m=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Document access details loading failed:",m),m.error.errorCode===dt.C.NOT_FOUND?this.alertService.errorAlert("center","Document ID not found",m.error.message,3e3,!1,"",!1):m.error.errorCode===dt.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to use document access details",m.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while document access details","",3e3,!1,"",!1),this.updatedUserIdMap=new Map,this.userCurrentMap=new Map,this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Document access details loading request completed.")}})}loadDocumentTableData(){this.dataSource=new l.I6(this.tableData),this.dataSource.paginator=this.paginator}onRowSelectionChange(i,m){console.log("Selected Row:",m),this.loadAllowedUsers(m.document_id),this.currentSelectedDocumentId=m.document_id}onOptionSelected(i){console.log(i.option.value),this.selectedCase=i.option.value,this.caseId=this.selectedCase.id,this.loadCaseData()}onToggleChange(){}backToCase(){this.isUpload=!1}clickBack(){this.location.back()}removeAccessWarn(i){console.log(i),this.alertService.confirmAlert("Are you sure?",`Removing access for this user: ${i.name}`,"warning",!0,"No",!0,"Yes, Proceed",!1,this.removeUserFromAllowedList.bind(this,i))}giveAccessWarn(i){console.log(i),this.alertService.confirmAlert("Are you sure?",`Enabling access for this user: ${i.name}`,"warning",!0,"No",!0,"Yes, Proceed",!1,this.addUserToAllowedMap.bind(this,i))}addUserToAllowedMap(i){const m=i.user_id.toString();this.updatedUserIdMap.has(m)&&this.updatedUserIdMap.get(m)===vt.CURRENT||(this.userCurrentMap.has(m)&&this.updatedUserIdMap.set(m,vt.CURRENT),this.updatedUserIdMap.has(m)||this.updatedUserIdMap.set(m,vt.NEW),this.updateUserDocumentAccess())}removeUserFromAllowedList(i){const m=i.user_id.toString();!this.updatedUserIdMap.has(m)||this.updatedUserIdMap.get(m)===vt.REMOVED||(this.updatedUserIdMap.has(m)&&(this.updatedUserIdMap.get(m)===vt.NEW?this.updatedUserIdMap.delete(m):this.updatedUserIdMap.set(m,vt.REMOVED)),this.updateUserDocumentAccess())}updateUserDocumentAccess(){this.fullPageLoaderService.setLoadingStatus(!0);const i=this.currentSelectedDocumentId,m=Array.from(this.updatedUserIdMap.entries()).filter(([S,B])=>B!==vt.REMOVED).map(([S])=>S.toString());this.apiService.updateDocumentAccess(m,i).subscribe({next:S=>{console.log("Document access modification successfull:",S),this.alertService.successToster("top-end","The document access settings have been updated successfully",5e3),this.isLoading=!1},error:S=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Document access modification  failed:",S),S.error.errorCode===dt.C.NOT_FOUND?this.alertService.errorAlert("center","Document not found",S.error.message,3e3,!1,"",!1):S.error.errorCode===dt.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to update the document access",S.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while updating document access","",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),this.loadAllCaseData(),console.log("Document access modification request completed.")}})}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(i){return i?`${this.selection.isSelected(i)?"deselect":"select"} row ${i.document_id}`:(this.isAllSelected()?"Deselect":"Select")+" all"}applyFilter(i){this.dataSource.filter=i.target.value.trim().toLowerCase()}add(i){const m=(i.value||"").trim();if(m){const S=this.allUsersOrGroups().find(B=>B.name.toLowerCase()===m.toLowerCase());S&&this.usersOrGroups.update(B=>[...B,S])}this.currentUserOrGroup.set("")}remove(i){this.usersOrGroups.update(m=>{const S=m.findIndex(B=>B.id===i.id);return S<0?m:(m.splice(S,1),this.announcer.announce(`Removed ${i.name}`),[...m])}),this.allUsersOrGroups.update(m=>[...m,i]),this.updateFilteredData()}updateFilteredData(){this.filteredUsersOrGroups()}handleBackspace(){if(!this.currentUserOrGroup()){const i=this.usersOrGroups();i.length>0&&this.remove(i[i.length-1])}}selected(i){const m=this.allUsersOrGroups().find(S=>S.name===i.option.value.name);m&&(this.usersOrGroups.update(S=>[...S,m]),this.allUsersOrGroups.update(S=>S.filter(B=>B.id!==m.id))),this.currentUserOrGroup.set("")}openFileUploadDialog(){this.isUpload=!0}_filter(i){const m=i.toLowerCase();return this.selectData.filter(S=>S.case_id.toLowerCase().includes(m))}displayFn(i){return i&&i.case_id?i.case_id:""}deleteConfirmation(i){this.alertService.confirmAlert("Are you sure?",`Do you want to remove this document?  ID: ${i}?`,"warning",!0,"No",!0,"Yes, Proceed",!0,this.removeDocumentCascade.bind(this))}removeDocumentCascade(){this.isReadOnly=!St.q.hasCommonEditPermission(this.authService),this.currentSelectedDocumentId||this.isAdmin||!this.isReadOnly||this.isLoading?(this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.removeDocumentCasecase(this.currentSelectedDocumentId).subscribe({next:i=>{console.log("Document casecade deleation successful:",i),this.alertService.successAlert("center","Document removed successfully","",3e3),this.loadCaseData(),this.loadAllUsers()},error:i=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Document casecade deleation failed:",i),this.alertService.errorAlert("center","Failed to remove the Document",i.error.errorCode===dt.C.NOT_FOUND||i.error.errorCode===dt.C.ACCESSDENIED?i.error.message:"",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Document casecade deleation request completed.")}})):console.error("Cannot preceed to remove document")}static#t=this.\u0275fac=function(m){return new(m||g)(t.rXU(k.aZ),t.rXU(a.Ix),t.rXU(z.I),t.rXU(N.u),t.rXU(it.J),t.rXU(D))};static#e=this.\u0275cmp=t.VBU({type:g,selectors:[["app-document-access-table-pagination"]],viewQuery:function(m,S){if(1&m&&t.GBs(_.iy,5),2&m){let B;t.mGM(B=t.lsd())&&(S.paginator=B.first)}},inputs:{currentUserOrGroup:[1,"currentUserOrGroup"]},outputs:{currentUserOrGroup:"currentUserOrGroupChange"},standalone:!0,features:[t.Jv_([D]),t.aNF],decls:15,vars:6,consts:[["auto","matAutocomplete"],[1,"b-1","shadow-none"],[1,"row"],[1,"col-md-6"],[1,"mat-subtitle-2","f-s-14","f-w-600"],["appearance","outline","color","primary",1,"w-100","m-b-0","m-t-2"],["matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value"],[1,"document-card","b-1","shadow-none"],[1,"row","justify-content-between"],[1,"col","p-t-4"],[1,"mat-subtitle-1","f-s-18","f-w-600"],[1,"col-left","col-md-4"],["appearance","outline","color","primary",1,"w-100","m-b-0"],["matInput","","placeholder","Filter",3,"keyup"],[1,"table-responsive"],[1,"justify-content-between"],[1,"col","align-items-start","d-flex","align-items-center","gap-2"],[1,"cursor-pointer"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","action"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[3,"change","checked","value","aria-label"],["mat-cell","",1,"mat-body-1"],[1,"d-flex","align-items-center"],["name","file-type-pdf",1,"icon-20",2,"color","rgb(190, 8, 8)","font-weight","bold"],[1,"d-flex","flex-column"],[2,"font-size","12px","color","gray","line-height","1"],["class","d-flex justify-content-center gap-4",4,"ngIf"],[1,"d-flex","justify-content-center","gap-4"],["name","edit",1,"icon-22"],[1,"cursor-pointer",3,"click"],["name","trash",1,"icon-22",2,"color","red"],["mat-row",""],[1,"col-left","m-b-6"],["appearance","outline","color","primary",1,"w-100","m-b-0",2,"margin-top","-0.06rem !important"],["matInput","","placeholder","Filter",3,"ngModelChange","ngModelOptions","ngModel"],[1,"m-t-8","m-b-0"],["itemSize","10",1,"virtual-scroll-container"],["class","mat-list-item-hover",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["align","end"],["type","button","mat-stroked-button","","color","warn",1,"m-r-10",3,"click"],[2,"font-size","1.4rem"],["mat-flat-button","","color","primary",1,"m-r-8",3,"disabled"],[1,"mat-list-item-hover"],[1,"row","justify-content-between","m-l-4","m-r-4"],[3,"clickActionIcon","item","hasActionIcon","iconName","iconColor"]],template:function(m,S){if(1&m){const B=t.RV6();t.j41(0,"mat-card",1)(1,"mat-card-content")(2,"form")(3,"div",2)(4,"div",3)(5,"mat-label",4),t.EFF(6,"Select Case ID"),t.k0s(),t.j41(7,"mat-form-field",5),t.nrm(8,"input",6),t.j41(9,"mat-autocomplete",7,0),t.bIt("optionSelected",function(Ct){return t.eBV(B),t.Njj(S.onOptionSelected(Ct))}),t.Z7z(11,zt,2,2,"mat-option",8,t.fX1),t.nI1(13,"async"),t.k0s()()()(),t.DNE(14,Xt,26,6),t.k0s()()()}if(2&m){const B=t.sdS(10);t.R7$(8),t.Y8G("formControl",S.myControl)("matAutocomplete",B),t.R7$(),t.Y8G("displayWith",S.displayFn),t.R7$(2),t.Dyx(t.bMT(13,4,S.filteredOptions)),t.R7$(3),t.vxM(S.selectedCase?14:-1)}},dependencies:[l.tP,l.Zl,l.tL,l.cC,l.YV,l.iL,l.KS,l.$R,l.NB,k.MD,k.bT,k.Jj,T.YN,T.qT,T.me,T.BC,T.cb,T.vS,T.cV,u.Hu,u.RN,u.YY,u.m2,u.MM,u.dh,s.G,M.$3,Rt.wT,M.pN,V.rl,V.nJ,rt.fg,p._g,pt.jt,pt.YE,C.$z,f.An,_.iy,f.m_,y.Cn,C.Hl,b.mV,r.X4,r.Jc,h.Ph,a.iI,p.Wk,A.g7,R.YN,M.jL,q.D,rt.fS,Z.Ve,T.X1,T.l_,st,ft,_t.E9,_t.yg,_t.E$,_t.d6,X.y],styles:[".mat-column-select[_ngcontent-%COMP%]{padding-right:0!important}.document-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{display:inline-block}.virtual-scroll-container[_ngcontent-%COMP%]{height:300px;width:100%;overflow:auto}mat-list-item[_ngcontent-%COMP%]:hover{background:#e5f5ff!important}  mat-list-item:hover .profile-btn-dd{background-color:#e5f5ff!important}mat-list-item[_ngcontent-%COMP%]     i-tabler:hover{height:25px!important;width:25px!important}mat-list-item[_ngcontent-%COMP%]   i-tabler[_ngcontent-%COMP%]{cursor:poiner!important}"]})}return g})(),Ht=(()=>{class g{static#t=this.\u0275fac=function(m){return new(m||g)};static#e=this.\u0275cmp=t.VBU({type:g,selectors:[["app-document-access"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(m,S){1&m&&t.nrm(0,"app-document-access-table-pagination")},dependencies:[Zt],encapsulation:2})}return g})();var Nt=I(467),Kt=I(7575),Lt=I(9183),Jt=I(4412);let Qt=(()=>{class g{constructor(){this.uploadProgressSubject=new Jt.t(0),this.uploadProgress$=this.uploadProgressSubject.asObservable()}uploadFiles(i,m,S){const B=new FormData;return m.forEach(ot=>{B.append("files",ot,ot.name)}),S.fileBatchUpload(i,B).pipe((0,P.W)(ot=>{throw console.error("Error during file upload:",ot),ot}))}static#t=this.\u0275fac=function(m){return new(m||g)};static#e=this.\u0275prov=t.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})();var qt=I(1997);function te(g,J){if(1&g){const i=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",7),t.bIt("drop",function(S){t.eBV(i);const B=t.XpG();return t.Njj(B.onDrop(S))})("dragover",function(S){return t.eBV(i),t.Njj(S.preventDefault())})("click",function(){t.eBV(i);const S=t.sdS(8);return t.Njj(S.click())}),t.j41(3,"mat-icon",8),t.EFF(4,"cloud_upload"),t.k0s(),t.j41(5,"span"),t.EFF(6,"Drag and drop here or click to upload"),t.k0s(),t.j41(7,"input",9,0),t.bIt("change",function(S){t.eBV(i);const B=t.XpG();return t.Njj(B.onFileInputChange(S))}),t.k0s()()()()}}function ee(g,J){if(1&g){const i=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",10),t.nrm(3,"mat-spinner"),t.j41(4,"span"),t.EFF(5,"Uploading in progress..."),t.k0s(),t.j41(6,"input",9,0),t.bIt("change",function(S){t.eBV(i);const B=t.XpG();return t.Njj(B.onFileInputChange(S))}),t.k0s()()()()}}function ie(g,J){if(1&g){const i=t.RV6();t.j41(0,"div",24),t.bIt("click",function(){t.eBV(i);const S=t.XpG().index,B=t.XpG(2);return t.Njj(B.removeFile(S))}),t.j41(1,"mat-icon",25),t.EFF(2,"clear"),t.k0s()()}}function ne(g,J){1&g&&(t.j41(0,"div",26)(1,"mat-icon"),t.nrm(2,"mat-spinner",27),t.k0s()())}function re(g,J){1&g&&(t.j41(0,"div",28)(1,"mat-icon",29),t.EFF(2,"cloud_done"),t.k0s()())}function ae(g,J){if(1&g&&(t.j41(0,"mat-list-item")(1,"div",3)(2,"div",16)(3,"mat-icon",17),t.EFF(4,"description"),t.k0s()(),t.j41(5,"div",18)(6,"div",19),t.EFF(7),t.k0s(),t.j41(8,"div",20),t.EFF(9),t.nI1(10,"date"),t.k0s()(),t.DNE(11,ie,3,0,"div",21)(12,ne,3,0,"div",22)(13,re,3,0,"div",23),t.k0s()()),2&g){const i=J.$implicit,m=t.XpG(2);t.R7$(7),t.JRh(i.name),t.R7$(2),t.JRh(t.bMT(10,5,i.lastModified)),t.R7$(2),t.Y8G("ngIf",!m.progressStarted),t.R7$(),t.Y8G("ngIf",m.progressStarted),t.R7$(),t.Y8G("ngIf",!1)}}function se(g,J){if(1&g&&(t.j41(0,"div",11)(1,"div",12),t.EFF(2,"CASE_2024_NOV-21 "),t.j41(3,"span",13),t.EFF(4),t.k0s()(),t.nrm(5,"mat-divider"),t.j41(6,"mat-list",14),t.DNE(7,ae,14,7,"mat-list-item",15),t.k0s()()),2&g){const i=t.XpG();t.R7$(4),t.SpI("(",i.files.length," Selected)"),t.R7$(2),t.Y8G("disabled",i.progressStarted),t.R7$(),t.Y8G("ngForOf",i.files)}}function oe(g,J){if(1&g){const i=t.RV6();t.j41(0,"button",32),t.bIt("click",function(){t.eBV(i);const S=t.XpG(2);return t.Njj(S.startProgressUpload())}),t.EFF(1,"Start Upload"),t.k0s()}}function le(g,J){1&g&&(t.j41(0,"button",33),t.EFF(1,"Disabled"),t.k0s())}function ce(g,J){if(1&g&&(t.qex(0),t.DNE(1,oe,2,0,"button",30)(2,le,2,0,"button",31),t.bVm()),2&g){const i=t.XpG();t.R7$(),t.Y8G("ngIf",!i.progressStarted),t.R7$(),t.Y8G("ngIf",i.progressStarted)}}let de=(()=>{class g{constructor(i,m,S,B,ot){this.router=i,this.fileUploadService=m,this.componentApiService=S,this.alertService=B,this.fullPageLoaderService=ot,this.caseId="",this.backToCaseDetails=new t.bkB,this.progressStarted=!1,this.files=[],this.progress=0}ngOnInit(){}onDrop(i){i.preventDefault();const m=i.dataTransfer?.files;m&&this.addFiles(m)}onFileInputChange(i){const m=i.target;m&&m.files&&this.addFiles(m.files)}addFiles(i){for(let m=0;m<i.length;m++)this.files.push(i[m])}startUpload(){}uploadFiles(){this.files.length>0?(this.fullPageLoaderService.setLoadingStatus(!0),this.fileUploadService.uploadFiles(this.caseId,Array.from(this.files),this.componentApiService).subscribe({next:i=>{if(i.type===o.hv.Response){const m={id:this.caseId};this.fullPageLoaderService.setLoadingStatus(!1),console.log("Upload successful:",i.body?.message),this.alertService.successAlert("center","File upload success","",3e3,!0,!0,!0),this.router.navigate(["/document-managemnt/single-case"],{queryParams:m}),this.progressStarted=!1,this.backToCaseDetails.emit(!0)}},error:i=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Upload failed:",i),this.alertService.errorAlert("center","Faill to upload files","",3e3,!1,"",!1),this.progressStarted=!1,this.backToCaseDetails.emit(!0)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),this.progressStarted=!1}})):console.error("No files selected")}removeFile(i){this.files.splice(i,1)}startProgressUpload(){this.progressStarted=!0,this.uploadFiles()}getProgress(i){}static#t=this.\u0275fac=function(m){return new(m||g)(t.rXU(a.Ix),t.rXU(Qt),t.rXU(D),t.rXU(z.I),t.rXU(it.J))};static#e=this.\u0275cmp=t.VBU({type:g,selectors:[["app-file-upload-ui"]],inputs:{caseId:"caseId"},outputs:{backToCaseDetails:"backToCaseDetails"},standalone:!0,features:[t.aNF],decls:9,vars:4,consts:[["fileInput",""],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col"],["class","files-list-section mb-4 w-100",4,"ngIf"],[4,"ngIf"],[1,"upload-area",3,"drop","dragover","click"],[1,"upload-icon","mb-2",2,"font-size","48px"],["type","file","multiple","","hidden","",3,"change"],[1,"upload-area","upload-area-desabled"],[1,"files-list-section","mb-4","w-100"],["mat-subheader",""],[2,"font-size","small"],[1,"file-list",3,"disabled"],[4,"ngFor","ngForOf"],[1,"col-md-1","col-sm-1"],["matListItemIcon",""],[1,"col-md-9"],["matListItemTitle",""],["matListItemLine",""],["class","col-md-2",3,"click",4,"ngIf"],["style","padding-top: 15px;","class","col-md-2",4,"ngIf"],["class","col-md-2",4,"ngIf"],[1,"col-md-2",3,"click"],["matListItemIcon","",1,"cursor-pointer"],[1,"col-md-2",2,"padding-top","15px"],["color","accent","diameter","20"],[1,"col-md-2"],["matListItemIcon","",2,"color","rgb(4, 207, 7)"],["mat-raised-button","","color","primary","class","mt-3 w-100",3,"click",4,"ngIf"],["mat-stroked-button","","disabled","",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-3","w-100",3,"click"],["mat-stroked-button","","disabled",""]],template:function(m,S){1&m&&(t.j41(0,"div",1),t.DNE(1,te,9,0,"div",2)(2,ee,8,0,"div",2),t.j41(3,"div",3)(4,"div",4),t.DNE(5,se,8,3,"div",5),t.k0s()(),t.j41(6,"div",3)(7,"div",4),t.DNE(8,ce,3,2,"ng-container",6),t.k0s()()()),2&m&&(t.R7$(),t.Y8G("ngIf",!S.progressStarted),t.R7$(),t.Y8G("ngIf",S.progressStarted),t.R7$(3),t.Y8G("ngIf",S.files.length>0),t.R7$(3),t.Y8G("ngIf",S.files.length>0))},dependencies:[k.MD,k.Sq,k.bT,k.vh,f.m_,f.An,n.hM,Kt.PO,A.g7,pt.Fg,pt.jt,pt.YE,pt.ZV,pt.EI,qt.q,pt.C_,pt.yE,r.X4,Lt.LG],styles:[".container[_ngcontent-%COMP%]{width:50vw;max-width:100%;padding:0;margin:0;box-sizing:border-box}h1.mat-dialog-title[_ngcontent-%COMP%]{font-size:24px;color:#2196f3;text-align:center;margin-bottom:20px}.description[_ngcontent-%COMP%]{font-size:16px;text-align:center;margin-bottom:30px;color:#424242}.upload-area-desabled[_ngcontent-%COMP%]{border:2px dashed #4e5052!important;background-color:#ebf2f7!important}.upload-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:50px;background-color:#f1f8ff;border-radius:8px;border:2px dashed #2196f3;cursor:pointer;transition:border-color .3s ease;text-align:center;min-height:300px;width:100%;box-sizing:border-box}.upload-area[_ngcontent-%COMP%]:hover{border-color:#1976d2}.upload-area[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:60px;color:#1976d2;margin-bottom:10px}.upload-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#424242}.row[_ngcontent-%COMP%], .col[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0;padding:0;box-sizing:border-box}.file-list[_ngcontent-%COMP%]{flex-direction:column;margin-bottom:20px;overflow-y:auto;max-height:300px;width:100%}.file-list[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%]{font-size:small}.file-list[_ngcontent-%COMP%]   .mdc-list-item__secondary-text[_ngcontent-%COMP%]{font-size:smaller}.files-list-section[_ngcontent-%COMP%]{display:ruby}button[mat-raised-button][_ngcontent-%COMP%]{padding:12px 24px;font-size:16px;background-color:#2196f3;color:#fff;border-radius:8px;margin-top:20px;width:100%;transition:background-color .3s ease;border:none}button[mat-raised-button][_ngcontent-%COMP%]:hover{background-color:#1976d2}button[mat-stroked-button][_ngcontent-%COMP%]{padding:12px 24px;font-size:16px;background-color:#2092ec54!important;border-radius:8px;margin-top:20px;width:100%;transition:background-color .3s ease;border:none}@media (max-width: 600px){mat-dialog-content[_ngcontent-%COMP%]{padding:10px;min-width:100%}.upload-area[_ngcontent-%COMP%]{padding:20px;min-height:250px}.upload-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;color:#424242}.file-list[_ngcontent-%COMP%]{max-height:250px}.file-list-item[_ngcontent-%COMP%]{font-size:12px;padding:8px}.file-card[_ngcontent-%COMP%]{padding:12px;flex-direction:column;align-items:flex-start}.file-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.file-list-item[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-size:16px}button[mat-raised-button][_ngcontent-%COMP%]{padding:10px 20px;font-size:14px}}@media (min-width: 601px){.upload-area[_ngcontent-%COMP%]{padding:40px;min-height:280px}}@media (min-width: 769px){mat-dialog-content[_ngcontent-%COMP%]{padding:20px;min-width:500px;min-height:360px}.upload-area[_ngcontent-%COMP%]{padding:40px;min-height:180px}.file-card[_ngcontent-%COMP%]{padding:15px}button[mat-raised-button][_ngcontent-%COMP%]{padding:12px 24px;font-size:16px}.upload-icon[_ngcontent-%COMP%]{font-size:100px!important;display:contents!important}}"]})}return g})();var Et=I(9454),ue=I(7247),he=I.n(ue),fe=I(2578);let me=(()=>{class g{constructor(i){this.http=i}fetchFile(i){return this.http.get(i,{responseType:"blob"}).toPromise().then(m=>{if(m)return m;throw new Error("Failed to fetch file as blob")})}createAndDownloadZip(i,m){var S=this;return(0,Nt.A)(function*(){const B=new(he());for(const ot of i)try{console.log(`Fetching file from: ${ot}`);const Ct=yield S.fetchFile(ot),xt=ot.split("/").pop()||`file-${Date.now()}`;console.log(`Adding file to ZIP: ${xt}, Size: ${Ct.size}`),B.file(xt,Ct)}catch(Ct){console.error(`Error downloading file: ${ot}`,Ct)}B.generateAsync({type:"blob"}).then(ot=>{console.log("ZIP file created, downloading..."),S.downloadZip(ot,m)})})()}downloadZip(i,m){(0,fe.saveAs)(i,m)}static#t=this.\u0275fac=function(m){return new(m||g)(t.KVO(o.Qq))};static#e=this.\u0275prov=t.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})();const pe=()=>[5,10,20];function ge(g,J){1&g&&t.nrm(0,"i-tabler",16)}function _e(g,J){1&g&&(t.j41(0,"mat-error"),t.EFF(1," Case ID is required. "),t.k0s())}function ve(g,J){1&g&&(t.j41(0,"mat-error"),t.EFF(1," Case ID must be at least 3 characters long. "),t.k0s())}function be(g,J){1&g&&(t.j41(0,"mat-error"),t.EFF(1," Case ID cannot exceed 50 characters. "),t.k0s())}function ye(g,J){1&g&&t.nrm(0,"i-tabler",16)}function Ce(g,J){1&g&&(t.j41(0,"mat-error"),t.EFF(1," Name cannot exceed 300 characters. "),t.k0s())}function we(g,J){if(1&g){const i=t.RV6();t.j41(0,"mat-card-actions",17)(1,"button",18),t.bIt("click",function(){t.eBV(i);const S=t.XpG(2);return t.Njj(S.clickBack())}),t.j41(2,"mat-icon",19),t.EFF(3,"arrow_back"),t.k0s(),t.EFF(4," Back"),t.k0s(),t.j41(5,"button",20),t.bIt("click",function(){t.eBV(i);const S=t.XpG(2);return t.Njj(S.clickCreateCase())}),t.EFF(6,"Save This"),t.k0s()()}if(2&g){const i=t.XpG(2);t.R7$(5),t.Y8G("disabled",i.form.invalid||i.isReadOnly)}}function Se(g,J){if(1&g&&(t.j41(0,"div",4)(1,"div",5)(2,"mat-card",7)(3,"mat-card-content")(4,"form",8)(5,"div",4)(6,"div",5)(7,"mat-label",9),t.DNE(8,ge,1,0,"i-tabler",10),t.EFF(9," Case ID "),t.k0s(),t.j41(10,"mat-form-field",11),t.nrm(11,"input",12),t.DNE(12,_e,2,0,"mat-error",13)(13,ve,2,0,"mat-error",13)(14,be,2,0,"mat-error",13),t.k0s()(),t.j41(15,"div",5)(16,"mat-label",9),t.DNE(17,ye,1,0,"i-tabler",10),t.EFF(18," Description"),t.k0s(),t.j41(19,"mat-form-field",11),t.nrm(20,"textarea",14),t.DNE(21,Ce,2,0,"mat-error",13),t.k0s()()(),t.DNE(22,we,7,1,"mat-card-actions",15),t.k0s()()()()()),2&g){const i=t.XpG();t.R7$(4),t.Y8G("formGroup",i.form),t.R7$(4),t.Y8G("ngIf",!i.isAdmin),t.R7$(3),t.Y8G("disabled",!i.isAdmin),t.R7$(),t.Y8G("ngIf",i.f.case_id.hasError("required")&&(i.f.case_id.touched||i.f.case_id.dirty)),t.R7$(),t.Y8G("ngIf",i.f.case_id.hasError("minlength")&&(i.f.case_id.touched||i.f.case_id.dirty)),t.R7$(),t.Y8G("ngIf",i.f.case_id.hasError("maxlength")&&(i.f.case_id.touched||i.f.case_id.dirty)),t.R7$(3),t.Y8G("ngIf",!i.isAdmin),t.R7$(3),t.Y8G("disabled",!i.isAdmin),t.R7$(),t.Y8G("ngIf",i.f.description.hasError("maxlength")&&(i.f.description.touched||i.f.description.dirty)),t.R7$(),t.Y8G("ngIf",i.isAdmin)}}function ke(g,J){if(1&g){const i=t.RV6();t.j41(0,"div",21)(1,"button",22),t.bIt("click",function(){t.eBV(i);const S=t.XpG();return t.Njj(S.backToCase())}),t.j41(2,"mat-icon",19),t.EFF(3,"arrow_back"),t.k0s()(),t.j41(4,"app-file-upload-ui",23),t.bIt("backToCaseDetails",function(S){t.eBV(i);const B=t.XpG();return t.Njj(B.handleBackToCaseDetailsEvent(S))}),t.k0s()()}if(2&g){const i=t.XpG();t.R7$(4),t.Y8G("caseId",i.caseId)}}function xe(g,J){if(1&g){const i=t.RV6();t.j41(0,"div",30)(1,"button",36),t.bIt("click",function(){t.eBV(i);const S=t.XpG(3);return t.Njj(S.openFileUploadDialog())}),t.j41(2,"mat-icon",37),t.EFF(3,"upload_file"),t.k0s(),t.EFF(4," Upload Files "),t.k0s()()}if(2&g){const i=t.XpG(3);t.R7$(),t.Y8G("disabled",i.enableDownloadSelected||i.isReadOnly)}}function Ae(g,J){if(1&g){const i=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){t.eBV(i);const S=t.XpG(3);return t.Njj(S.downloadConfirm())}),t.j41(1,"mat-icon",38),t.EFF(2,"download_file"),t.k0s(),t.EFF(3," Download Files "),t.k0s()}if(2&g){const i=t.XpG(3);t.Y8G("disabled",!(i.selection.hasValue()&&i.selection.selected.length<=5))}}function De(g,J){1&g&&(t.j41(0,"button",39)(1,"mat-icon"),t.nrm(2,"mat-spinner",40),t.k0s(),t.EFF(3," Download Files "),t.k0s()),2&g&&t.Y8G("disabled",!0)}function Ee(g,J){if(1&g){const i=t.RV6();t.j41(0,"div",41)(1,"mat-form-field",42)(2,"input",43),t.bIt("keyup",function(S){t.eBV(i);const B=t.XpG(3);return t.Njj(B.applyFilter(S))}),t.k0s()()()}}function Ie(g,J){if(1&g){const i=t.RV6();t.j41(0,"th",55)(1,"mat-checkbox",56),t.bIt("change",function(S){t.eBV(i);const B=t.XpG(4);return t.Njj(S?B.toggleAllRows():null)}),t.k0s()()}if(2&g){const i=t.XpG(4);t.R7$(),t.Y8G("checked",i.selection.hasValue()&&i.isAllSelected())("indeterminate",i.selection.hasValue()&&!i.isAllSelected())("aria-label",i.checkboxLabel())}}function Te(g,J){if(1&g){const i=t.RV6();t.j41(0,"td",57)(1,"mat-checkbox",58),t.bIt("click",function(S){return t.eBV(i),t.Njj(S.stopPropagation())})("change",function(S){const B=t.eBV(i).$implicit,ot=t.XpG(4);return t.Njj(S?ot.selection.toggle(B):null)}),t.k0s()()}if(2&g){const i=J.$implicit,m=t.XpG(4);t.R7$(),t.Y8G("checked",m.selection.isSelected(i))("aria-label",m.checkboxLabel(i))}}function Re(g,J){if(1&g&&(t.j41(0,"td",59)(1,"div",60),t.nrm(2,"i-tabler",61),t.j41(3,"div",62)(4,"div"),t.EFF(5),t.k0s(),t.j41(6,"div",63),t.EFF(7),t.k0s()()()()),2&g){const i=J.$implicit;t.R7$(5),t.JRh(i.document_name),t.R7$(2),t.SpI("",i.file_size,"MB")}}function Fe(g,J){1&g&&(t.j41(0,"a",66),t.nrm(1,"i-tabler",67),t.k0s())}function Oe(g,J){1&g&&(t.j41(0,"a",66),t.nrm(1,"i-tabler",68),t.k0s())}function Pe(g,J){1&g&&(t.j41(0,"a",66),t.nrm(1,"i-tabler",69),t.k0s())}function Ue(g,J){if(1&g&&(t.j41(0,"td",59)(1,"div",64),t.DNE(2,Fe,2,0,"a",65)(3,Oe,2,0,"a",65)(4,Pe,2,0,"a",65),t.k0s()()),2&g){const i=t.XpG(4);t.R7$(2),t.Y8G("ngIf",i.isAdmin),t.R7$(),t.Y8G("ngIf",i.isAdmin),t.R7$(),t.Y8G("ngIf",!i.isAdmin)}}function ze(g,J){1&g&&t.nrm(0,"tr",70)}function je(g,J){if(1&g&&(t.j41(0,"div",44)(1,"div",45)(2,"div",4),t.nrm(3,"div",46),t.k0s()(),t.j41(4,"table",47),t.qex(5,48),t.DNE(6,Ie,2,3,"th",49)(7,Te,2,2,"td",50),t.bVm(),t.qex(8,51),t.DNE(9,Re,8,2,"td",52),t.bVm(),t.qex(10,53),t.DNE(11,Ue,5,3,"td",52),t.bVm(),t.DNE(12,ze,1,0,"tr",54),t.k0s()()),2&g){const i=t.XpG(3);t.R7$(4),t.Y8G("dataSource",i.dataSource),t.R7$(8),t.Y8G("matRowDefColumns",i.displayedColumns)}}function Ne(g,J){if(1&g&&(t.j41(0,"div",5)(1,"mat-card",25)(2,"mat-card-header")(3,"div",26)(4,"div",27)(5,"mat-label",28),t.EFF(6),t.k0s()()(),t.j41(7,"div",26),t.DNE(8,xe,5,1,"div",29),t.j41(9,"div",30),t.DNE(10,Ae,4,1,"button",31)(11,De,4,1,"button",32),t.k0s()()(),t.j41(12,"mat-card-content"),t.DNE(13,Ee,3,0,"div",33)(14,je,13,2,"div",34),t.nrm(15,"mat-paginator",35),t.k0s()()()),2&g){const i=t.XpG(2);t.R7$(6),t.SpI(" Documents (",i.documentTableData.length,") "),t.R7$(2),t.Y8G("ngIf",i.isAdmin),t.R7$(2),t.Y8G("ngIf",!i.enableDownloadSelected),t.R7$(),t.Y8G("ngIf",i.enableDownloadSelected),t.R7$(2),t.Y8G("ngIf",!i.isCaseCreation),t.R7$(),t.Y8G("ngIf",!i.isCaseCreation),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(7,pe))}}function Le(g,J){if(1&g&&(t.j41(0,"div",4),t.DNE(1,Ne,16,8,"div",24),t.k0s()),2&g){const i=t.XpG();t.R7$(),t.Y8G("ngIf",!i.isCaseCreation)}}function Be(g,J){if(1&g){const i=t.RV6();t.j41(0,"button",75),t.bIt("click",function(){t.eBV(i);const S=t.XpG(2);return t.Njj(S.deleteConfirmation())}),t.EFF(1,"Delete"),t.k0s()}if(2&g){const i=t.XpG(2);t.Y8G("disabled",i.isReadOnly)}}function Ge(g,J){if(1&g&&(t.j41(0,"mat-accordion",71)(1,"mat-expansion-panel",72)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t.EFF(4," Remove This Case "),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()(),t.j41(7,"mat-panel-description",73),t.DNE(8,Be,2,1,"button",74),t.k0s()()()),2&g){const i=t.XpG();t.R7$(),t.Y8G("expanded",!1),t.R7$(7),t.Y8G("ngIf",!i.isCaseCreation)}}let Me=(()=>{class g{constructor(i,m,S,B,ot,Ct,xt,Ft){this.location=i,this.router=m,this.activatedRoute=S,this.alertService=B,this.apiService=ot,this.authService=Ct,this.fullPageLoaderService=xt,this.fileDownloadService=Ft,this.isAdmin=!1,this.caseId="",this.isCaseCreation=!1,this.isReadOnly=!0,this.isLoading=!0,this.documentTableData=[],this.userTableData=[],this.displayedColumns=["select","document_name","action"],this.selection=new d.CB(!0,[]),this.enableDownloadSelected=!1,this.dataSource=new l.I6,this.removeDialogTitle="Do you want to remove?",this.messageBodayKey="",this.editRouterLink="",this.caseName="CASE_2012_SPE_15_1",this.caseDescription="Test description",this.isUpload=!1,this.selectedFilesList=[],this.deleteConfirmDialog=(0,t.WQX)(n.bZ),this.documentUploadDialog=(0,t.WQX)(n.bZ),this.separatorKeysCodes=[Y.Fm,Y.KE],this.currentUserOrGroup=(0,t.geq)(""),this.usersOrGroups=(0,t.vPA)([]),this.allUsersOrGroups=(0,t.vPA)([{name:"Dilupa",id:"100WS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"1",name:"Dilupa Marasinghe",email:"test@gmail.com",role:H.N.ADMIN,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-1.jpg"}},{name:"CASE November 1 -23",id:"CASE_441_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"CASE Jan 3 -23",id:"CASE_201_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Randima",id:"102RANWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"3",name:"Randima Senanayake",email:"test@gmail.com",role:H.N.USER,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-3.jpg"}},{name:"CASE Mrch 3 -12",id:"CASE_011_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Kasun",id:"100KSWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"5",name:"K.S.C.Janith",email:"test@gmail.com",role:H.N.USER,status:H.z.DEACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-5.jpg"}}]),this.filteredUsersOrGroups=(0,t.EWP)(()=>{const bt=this.currentUserOrGroup().toLowerCase(),Bt=new Set(this.usersOrGroups().map(kt=>kt.id));return this.allUsersOrGroups().filter(kt=>!Bt.has(kt.id)).filter(kt=>kt.name.toLowerCase().includes(bt))}),this.announcer=(0,t.WQX)(G.Ai),this.http=(0,t.WQX)(o.Qq),this.filteredFruits=(0,t.EWP)(()=>{const bt=this.currentUserOrGroup().toLowerCase(),Bt=new Set(this.usersOrGroups().map(kt=>kt.id));return this.allUsersOrGroups().filter(kt=>!Bt.has(kt.id)).filter(kt=>kt.name.toLowerCase().includes(bt))}),this.form=new T.gE({case_id:new T.MJ("",[T.k0.required,T.k0.minLength(3),T.k0.maxLength(50)]),description:new T.MJ("",[T.k0.maxLength(300)])})}get f(){return this.form.controls}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.isAdmin=this.authService.hasRole(H.N.ADMIN),!this.isAdmin&&this.form&&(this.f.case_id.disable(),this.f.description.disable()),this.enableDesableFrom(!this.isAdmin),this.isReadOnly=!this.isAdmin,this.activatedRoute.queryParams.subscribe(i=>{i.id&&(this.caseId=i.id,this.loadCaseData())}),this.userTableData=[{user_id:"1",name:"Dilupa Marasinghe",email:"test@gmail.com",role:H.N.ADMIN,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-1.jpg",mobileNumber:"+94712390348"},{user_id:"2",name:"Asith siriwardhana",email:"test@gmail.com",role:H.N.USER,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-2.jpg",mobileNumber:"+94712390348"},{user_id:"3",name:"Kasun janaka",email:"test@gmail.com",role:H.N.USER,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-3.jpg",mobileNumber:"+94712390348"},{user_id:"4",name:"Herath P.L.G",email:"test@gmail.com",role:H.N.USER,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-4.jpg",mobileNumber:"+94712390348"},{user_id:"5",name:"K.S.C.Janith",email:"test@gmail.com",role:H.N.USER,status:H.z.DEACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-5.jpg",mobileNumber:"+94712390348"},{user_id:"6",name:"Kamal Senath",email:"test@gmail.com",role:H.N.USER,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-6.jpg",mobileNumber:"+94712390348"},{user_id:"7",name:"Lal Guruge",email:"test@gmail.com",role:H.N.USER,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-7.jpg",mobileNumber:"+94712390348"},{user_id:"8",name:"Sahan H.L.R",email:"test@gmail.com",role:H.N.USER,status:H.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-8.jpg",mobileNumber:"+94712390348"}]}onToggleChange(){this.isAdmin?(this.f.case_id.enable(),this.f.description.enable()):(this.f.case_id.disable(),this.f.description.disable())}backToCase(){this.isUpload=!1}handleBackToCaseDetailsEvent(i){i&&(this.isUpload=!1,this.loadCaseData())}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}downloadConfirm(){if(this.selection.selected.length>0){const i=this.selection.selected.map(S=>S.document_name),m=this.generateHtmlList(i);this.alertService.confirmAlertWithHtml("Do you want to download below documents?",m,"warning",!0,"No",!0,"Yes, Proceed",!1,this.downloadSelected.bind(this))}}downloadConfirmForIconClick(i,m){if(i&&m){const B=this.generateHtmlList([m]);this.alertService.confirmAlertWithHtml("Do you want to download below documents?",B,"warning",!0,"No",!0,"Yes, Proceed",!1,this.sendSingleFileDownloadRequest.bind(this,i,m))}}generateHtmlList(i){return`<ul style="list-style-type: disclosure-closed;justify-content: center; display: grid;">\n    ${i.map(m=>`<li>${m}</li>`).join("")}\n  </ul>`}downloadSelected(){this.selection.selected.length>0?(console.log(this.selection.selected),this.sendBatchDownloadRequest()):this.alertService.errorToaster("top-end","Please select documents to download")}checkboxLabel(i){return i?`${this.selection.isSelected(i)?"deselect":"select"} row ${i.document_id}`:(this.isAllSelected()?"Deselect":"Select")+" all"}applyFilter(i){this.dataSource.filter=i.target.value.trim().toLowerCase()}add(i){const m=(i.value||"").trim();if(m){const S=this.allUsersOrGroups().find(B=>B.name.toLowerCase()===m.toLowerCase());S&&this.usersOrGroups.update(B=>[...B,S])}this.currentUserOrGroup.set("")}updateFilteredData(){this.filteredUsersOrGroups()}handleBackspace(){if(!this.currentUserOrGroup()){this.usersOrGroups()}}selected(i){const m=this.allUsersOrGroups().find(S=>S.name===i.option.value.name);m&&(this.usersOrGroups.update(S=>[...S,m]),this.allUsersOrGroups.update(S=>S.filter(B=>B.id!==m.id))),this.currentUserOrGroup.set("")}openFileUploadDialog(){this.isReadOnly||this.enableDownloadSelected||(this.isUpload=!0)}sendBatchDownloadRequest(){var m,i=this;this.selectedFilesList=[],this.selectedFilesList=this.selection.selected.map(m=>m.file_url),this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.fileBatchDownload(this.caseId,this.selectedFilesList).pipe((0,P.W)(m=>{throw console.error("Error during file download:",m),this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),m})).subscribe({next:(m=(0,Nt.A)(function*(S){i.fullPageLoaderService.setLoadingStatus(!1),i.alertService.successToster("center","Your download will begin now.",3e3),yield i.fileDownloadService.createAndDownloadZip(S.data,"my-files.zip")}),function(B){return m.apply(this,arguments)}),error:m=>{this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),console.error("Error in subscription:",m)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Batch download request completed.")}})}sendSingleFileDownloadRequest(i,m){var B,S=this;this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.singleFileDownload(this.caseId,i).pipe((0,P.W)(B=>{throw console.error("Error during single file download:",B),this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),B})).subscribe({next:(B=(0,Nt.A)(function*(ot){S.alertService.successToster("center","Your file download is starting now.",3e3),S.fullPageLoaderService.setLoadingStatus(!1)}),function(Ct){return B.apply(this,arguments)}),error:B=>{this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),console.error("Error in subscription:",B)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Single file download request completed.")}})}downloadSingleFile(i,m){const S=window.URL.createObjectURL(i),B=document.createElement("a");B.href=S,B.download=m,document.body.appendChild(B),B.click(),document.body.removeChild(B),window.URL.revokeObjectURL(S)}deleteConfirmation(){this.alertService.confirmAlert("Are you sure?",`Do you want to remove this Case?  ID: ${this.caseData.case_id}?`,"warning",!0,"No",!0,"Yes, Proceed",!0,this.removeCase.bind(this))}clickCreateCase(){this.isReadOnly||this.form.disabled||this.form.invalid||this.alertService.confirmAlert("Are you sure?",`Do you want to create this case with Case ID: ${this.form.value.case_id}`,"warning",!0,"No",!0,"Yes, Proceed",!1,this.submit.bind(this))}submit(){this.form.invalid?console.error("Form is invalid"):(this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.createNewCase({case_id:this.form.value.case_id,description:this.form.value.description}).subscribe({next:m=>{const S={id:m.data.id};console.log("Case creation successful:",m),this.alertService.successAlert("center","Case creation success","",3e3),this.router.navigate(["/document-managemnt/single-case"],{queryParams:S})},error:m=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Registration failed:",m),this.alertService.errorAlert("center","Case creation failed",m.error.errorCode===dt.C.ALREADY_EXIST||m.error.errorCode===dt.C.ACCESSDENIED?m.error.message:"",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case creation request completed.")}}))}removeCase(){!this.form.invalid||this.isCaseCreation||this.isReadOnly?(this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.removeCase(this.caseId).subscribe({next:i=>{console.log("Case deleation successful:",i),this.alertService.successAlert("center","Case removed successfully","",3e3),this.router.navigate(["/document-managemnt/document-upload"])},error:i=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Registration failed:",i),this.alertService.errorAlert("center","Failed to remove the Case",i.error.errorCode===dt.C.NOT_FOUND||i.error.errorCode===dt.C.ACCESSDENIED?i.error.message:"",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case creation request completed.")}})):console.error("Form is invalid")}enableDesableFrom(i){i?this.form.disable():this.form.enable()}loadCaseData(){if(!this.caseId)return this.isLoading=!0,this.isCaseCreation=!0,void console.error("User Id is invalid");this.isReadOnly=!St.q.hasCommonEditPermission(this.authService),this.isCaseCreation=!1,this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getOneCase(this.caseId).subscribe({next:i=>{console.log("Case fetching successful:",i),this.caseData=i.data,this.form.patchValue(this.caseData),this.isReadOnly&&this.form.disable(),this.documentTableData=this.caseData.documents,this.loadDocumentTableData(),console.log("this.caseData"),console.log(this.caseData),console.log("this.caseData"),this.isLoading=!1},error:i=>{this.enableDesableFrom(!0),this.fullPageLoaderService.setLoadingStatus(!1),console.error("Case loading failed:",i),i.error.errorCode===dt.C.NOT_FOUND?this.alertService.errorAlert("center","Case not found",i.error.message,3e3,!1,"",!1):i.error.errorCode===dt.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to load this case",i.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while loading case details","",3e3,!1,"",!1),this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case loading request completed.")}})}loadDocumentTableData(){this.dataSource=new l.I6(this.documentTableData),this.dataSource.paginator=this.paginator}clickBack(){this.location.back()}static#t=this.\u0275fac=function(m){return new(m||g)(t.rXU(k.aZ),t.rXU(a.Ix),t.rXU(a.nX),t.rXU(z.I),t.rXU(D),t.rXU(N.u),t.rXU(it.J),t.rXU(me))};static#e=this.\u0275cmp=t.VBU({type:g,selectors:[["app-single-case-table-pagination"]],viewQuery:function(m,S){if(1&m&&t.GBs(_.iy,5),2&m){let B;t.mGM(B=t.lsd())&&(S.paginator=B.first)}},inputs:{currentUserOrGroup:[1,"currentUserOrGroup"]},outputs:{currentUserOrGroup:"currentUserOrGroupChange"},standalone:!0,features:[t.Jv_([D,N.u,{provide:Et.$T,useValue:{expandedHeight:"48px",collapsedHeight:"48px",animationDuration:"225ms cubic-bezier(0.4,0.0,0.2,1)"}}]),t.aNF],decls:10,vars:6,consts:[[1,"container"],[3,"change","ngModelChange","ngModel"],["class","row",4,"ngIf"],["class","row justify-content-start",4,"ngIf"],[1,"row"],[1,"col"],["class","m-r-8","mat-flat-button","","color","warn",4,"ngIf"],[1,"b-1","shadow-none"],[3,"formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-2","d-block"],["style","color: black; vertical-align: middle; margin-bottom: 3px;","name","lock","class","icon-22",4,"ngIf"],["appearance","outline","color","primary",1,"w-100","m-b-0"],["formControlName","case_id","matInput","","placeholder","","value","CASE_NOV_102",3,"disabled"],[4,"ngIf"],["formControlName","description","matInput","","value","Test Description about case",3,"disabled"],["align","end",4,"ngIf"],["name","lock",1,"icon-22",2,"color","black","vertical-align","middle","margin-bottom","3px"],["align","end"],["type","button","mat-stroked-button","","color","warn",1,"m-r-10",3,"click"],[2,"font-size","1.4rem"],["type","button","mat-flat-button","","color","primary",1,"m-r-8",3,"click","disabled"],[1,"row","justify-content-start"],["mat-button","",3,"click"],[3,"backToCaseDetails","caseId"],["class","col",4,"ngIf"],[1,"document-card","b-1","shadow-none"],[1,"row","justify-content-between"],[1,"col","p-t-4"],[1,"mat-subtitle-1","f-s-18","f-w-600"],["class","col-sm-6 col-md-6 col-lg-6 p-t-6",4,"ngIf"],[1,"col-sm-6","col-md-6","col-lg-6","p-t-6"],["mat-stroked-button","",3,"disabled","click",4,"ngIf"],["class","download-mat-spinner","mat-stroked-button","",3,"disabled",4,"ngIf"],["class","col-left",4,"ngIf"],["class","table-responsive",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-stroked-button","",3,"click","disabled"],["aria-hidden","false",2,"color","#4456e9"],["aria-hidden","false",2,"color","#24db0e"],["mat-stroked-button","",1,"download-mat-spinner",3,"disabled"],["color","accent","diameter","20"],[1,"col-left"],["appearance","outline","color","primary",1,"w-50","m-b-0"],["matInput","","placeholder","Filter",3,"keyup"],[1,"table-responsive"],[1,"justify-content-between"],[1,"col","align-items-start","d-flex","align-items-center","gap-2"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","document_name"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","action"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[3,"change","checked","indeterminate","aria-label"],["mat-cell",""],[3,"click","change","checked","aria-label"],["mat-cell","",1,"mat-body-1"],[1,"d-flex","align-items-center"],["name","file-type-pdf",1,"icon-20",2,"color","rgb(190, 8, 8)","font-weight","bold"],[1,"d-flex","flex-column"],[2,"font-size","12px","color","gray","line-height","1"],[1,"d-flex","justify-content-center","gap-4"],["class","cursor-pointer",4,"ngIf"],[1,"cursor-pointer"],["name","edit",1,"icon-22"],["name","trash",1,"icon-22",2,"color","red"],["name","download",1,"icon-22",2,"color","rgb(16, 152, 6)","font-weight","bold"],["mat-row",""],["mat-flat-button","","color","warn",1,"m-r-8"],[3,"expanded"],[2,"justify-content","center"],["class","m-r-8","mat-flat-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","warn",1,"m-r-8",3,"click","disabled"]],template:function(m,S){1&m&&(t.j41(0,"div",0)(1,"p")(2,"mat-slide-toggle",1),t.bIt("change",function(){return S.onToggleChange()}),t.mxI("ngModelChange",function(ot){return t.DH7(S.isAdmin,ot)||(S.isAdmin=ot),ot}),t.EFF(3),t.k0s()(),t.DNE(4,Se,23,10,"div",2)(5,ke,5,1,"div",3)(6,Le,2,1,"div",2),t.j41(7,"div",4)(8,"div",5),t.DNE(9,Ge,9,2,"mat-accordion",6),t.k0s()()()),2&m&&(t.R7$(2),t.R50("ngModel",S.isAdmin),t.R7$(),t.JRh(S.isAdmin?"Admin View":"User View"),t.R7$(),t.Y8G("ngIf",!S.isUpload),t.R7$(),t.Y8G("ngIf",S.isUpload&&S.isAdmin),t.R7$(),t.Y8G("ngIf",!S.isUpload),t.R7$(3),t.Y8G("ngIf",!S.isCaseCreation&&S.isAdmin&&!S.isUpload))},dependencies:[l.tP,l.Zl,l.tL,l.cC,l.YV,l.iL,l.KS,l.$R,l.NB,k.MD,k.bT,T.YN,T.qT,T.me,T.BC,T.cb,T.vS,V.RG,V.rl,V.nJ,V.TL,T.X1,T.j4,T.JD,u.Hu,u.RN,u.YY,u.m2,u.MM,s.G,A.So,rt.fg,b.sG,Et.BS,Et.GK,Et.Z2,Et.WN,Et.Q6,C.$z,f.An,Lt.LG,_.iy,f.m_,y.Cn,C.Hl,b.mV,r.X4,r.Jc,h.Ph,a.iI,p.Wk,A.g7,R.YN,M.jL,de,Lt.D6,X.y,Et.MY],styles:[".mat-column-select[_ngcontent-%COMP%]{padding-right:0!important}.document-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{display:inline-block}.download-mat-spinner[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{width:18px!important;height:18px!important}mat-accordion[_ngcontent-%COMP%]{display:flex;justify-content:end}mat-panel-title[_ngcontent-%COMP%]{color:#f14d7c!important}mat-panel-description[_ngcontent-%COMP%]{justify-content:center}mat-expansion-panel-header[_ngcontent-%COMP%]   .mat-expansion-indicator[_ngcontent-%COMP%]{visibility:hidden!important}"]})}return g})(),Ve=(()=>{class g{static#t=this.\u0275fac=function(m){return new(m||g)};static#e=this.\u0275cmp=t.VBU({type:g,selectors:[["app-single-case-details"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(m,S){1&m&&t.nrm(0,"app-single-case-table-pagination")},dependencies:[Me]})}return g})();var Gt=I(2014);const $e=[{path:"",children:[{path:"document-upload",component:j,canActivate:[Gt.K],data:{title:"Available Cases",expectedRole:H.N.ADMIN}},{path:"document-access",component:Ht,canActivate:[Gt.K],data:{title:"Manage Document Access",expectedRole:H.N.ADMIN}},{path:"single-case",component:Ve,data:{title:"Case Detail"}}]}]},2578:function(Tt,w){var I,u;void 0!==(u="function"==typeof(I=function(){"use strict";function s(r,h,a){var c=new XMLHttpRequest;c.open("GET",r),c.responseType="blob",c.onload=function(){b(c.response,h,a)},c.onerror=function(){console.error("could not download file")},c.send()}function f(r){var h=new XMLHttpRequest;h.open("HEAD",r,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function y(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(h)}}var C="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,_=C.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=C.saveAs||("object"!=typeof window||window!==C?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(r,h,a){var c=C.URL||C.webkitURL,o=document.createElement("a");o.download=h=h||r.name||"download",o.rel="noopener","string"==typeof r?(o.href=r,o.origin===location.origin?y(o):f(o.href)?s(r,h,a):y(o,o.target="_blank")):(o.href=c.createObjectURL(r),setTimeout(function(){c.revokeObjectURL(o.href)},4e4),setTimeout(function(){y(o)},0))}:"msSaveOrOpenBlob"in navigator?function(r,h,a){if(h=h||r.name||"download","string"!=typeof r)navigator.msSaveOrOpenBlob(function l(r,h){return typeof h>"u"?h={autoBom:!1}:"object"!=typeof h&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\ufeff",r],{type:r.type}):r}(r,a),h);else if(f(r))s(r,h,a);else{var c=document.createElement("a");c.href=r,c.target="_blank",setTimeout(function(){y(c)})}}:function(r,h,a,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof r)return s(r,h,a);var o="application/octet-stream"===r.type,t=/constructor/i.test(C.HTMLElement)||C.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||o&&t||_)&&typeof FileReader<"u"){var D=new FileReader;D.onloadend=function(){var U=D.result;U=x?U:U.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=U:location=U,c=null},D.readAsDataURL(r)}else{var E=C.URL||C.webkitURL,L=E.createObjectURL(r);c?c.location=L:location.href=L,c=null,setTimeout(function(){E.revokeObjectURL(L)},4e4)}});C.saveAs=b.saveAs=b,Tt.exports=b})?I.apply(w,[]):I)&&(Tt.exports=u)},7247:Tt=>{Tt.exports=function w(I,k,u){function l(y,C){if(!k[y]){if(!I[y]){if(s)return s(y,!0);var b=new Error("Cannot find module '"+y+"'");throw b.code="MODULE_NOT_FOUND",b}var r=k[y]={exports:{}};I[y][0].call(r.exports,function(h){return l(I[y][1][h]||h)},r,r.exports,w,I,k,u)}return k[y].exports}for(var s=void 0,f=0;f<u.length;f++)l(u[f]);return l}({1:[function(w,I,k){"use strict";var u=w("./utils"),l=w("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";k.encode=function(f){for(var y,C,_,r,h,a,c=[],o=0,t=f.length,x=t,D="string"!==u.getTypeOf(f);o<f.length;)x=t-o,_=D?(y=f[o++],C=o<t?f[o++]:0,o<t?f[o++]:0):(y=f.charCodeAt(o++),C=o<t?f.charCodeAt(o++):0,o<t?f.charCodeAt(o++):0),r=(3&y)<<4|C>>4,h=1<x?(15&C)<<2|_>>6:64,a=2<x?63&_:64,c.push(s.charAt(y>>2)+s.charAt(r)+s.charAt(h)+s.charAt(a));return c.join("")},k.decode=function(f){var y,C,_,b,r,h,a=0,c=0,o="data:";if(f.substr(0,5)===o)throw new Error("Invalid base64 input, it looks like a data url.");var t,x=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===s.charAt(64)&&x--,f.charAt(f.length-2)===s.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(t=l.uint8array?new Uint8Array(0|x):new Array(0|x);a<f.length;)y=s.indexOf(f.charAt(a++))<<2|(b=s.indexOf(f.charAt(a++)))>>4,C=(15&b)<<4|(r=s.indexOf(f.charAt(a++)))>>2,_=(3&r)<<6|(h=s.indexOf(f.charAt(a++))),t[c++]=y,64!==r&&(t[c++]=C),64!==h&&(t[c++]=_);return t}},{"./support":30,"./utils":32}],2:[function(w,I,k){"use strict";var u=w("./external"),l=w("./stream/DataWorker"),s=w("./stream/Crc32Probe"),f=w("./stream/DataLengthProbe");function y(C,_,b,r,h){this.compressedSize=C,this.uncompressedSize=_,this.crc32=b,this.compression=r,this.compressedContent=h}y.prototype={getContentWorker:function(){var C=new l(u.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),_=this;return C.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),C},getCompressedWorker:function(){return new l(u.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(C,_,b){return C.pipe(new s).pipe(new f("uncompressedSize")).pipe(_.compressWorker(b)).pipe(new f("compressedSize")).withStreamInfo("compression",_)},I.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(w,I,k){"use strict";var u=w("./stream/GenericWorker");k.STORE={magic:"\0\0",compressWorker:function(){return new u("STORE compression")},uncompressWorker:function(){return new u("STORE decompression")}},k.DEFLATE=w("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(w,I,k){"use strict";var u=w("./utils"),l=function(){for(var s,f=[],y=0;y<256;y++){s=y;for(var C=0;C<8;C++)s=1&s?3988292384^s>>>1:s>>>1;f[y]=s}return f}();I.exports=function(s,f){return void 0!==s&&s.length?"string"!==u.getTypeOf(s)?function(y,C,_){var r=l,h=0+_;y^=-1;for(var a=0;a<h;a++)y=y>>>8^r[255&(y^C[a])];return~y}(0|f,s,s.length):function(y,C,_){var r=l,h=0+_;y^=-1;for(var a=0;a<h;a++)y=y>>>8^r[255&(y^C.charCodeAt(a))];return~y}(0|f,s,s.length):0}},{"./utils":32}],5:[function(w,I,k){"use strict";k.base64=!1,k.binary=!1,k.dir=!1,k.createFolders=!0,k.date=null,k.compression=null,k.compressionOptions=null,k.comment=null,k.unixPermissions=null,k.dosPermissions=null},{}],6:[function(w,I,k){"use strict";var u;u=typeof Promise<"u"?Promise:w("lie"),I.exports={Promise:u}},{lie:37}],7:[function(w,I,k){"use strict";var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=w("pako"),s=w("./utils"),f=w("./stream/GenericWorker"),y=u?"uint8array":"array";function C(_,b){f.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=b,this.meta={}}k.magic="\b\0",s.inherits(C,f),C.prototype.processChunk=function(_){this.meta=_.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(y,_.data),!1)},C.prototype.flush=function(){f.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},C.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},C.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(b){_.push({data:b,meta:_.meta})}},k.compressWorker=function(_){return new C("Deflate",_)},k.uncompressWorker=function(){return new C("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(w,I,k){"use strict";function u(r,h){var a,c="";for(a=0;a<h;a++)c+=String.fromCharCode(255&r),r>>>=8;return c}function l(r,h,a,c,o,t){var x,D,E=r.file,L=r.compression,U=t!==y.utf8encode,$=s.transformTo("string",t(E.name)),P=s.transformTo("string",y.utf8encode(E.name)),X=E.comment,H=s.transformTo("string",t(X)),v=s.transformTo("string",y.utf8encode(X)),z=P.length!==E.name.length,n=v.length!==X.length,N="",it="",V="",rt=E.dir,W=E.date,nt={crc32:0,compressedSize:0,uncompressedSize:0};h&&!a||(nt.crc32=r.crc32,nt.compressedSize=r.compressedSize,nt.uncompressedSize=r.uncompressedSize);var O=0;h&&(O|=8),U||!z&&!n||(O|=2048);var K,gt,F=0,et=0;rt&&(F|=16),"UNIX"===o?(et=798,F|=(gt=K=E.unixPermissions,K||(gt=rt?16893:33204),(65535&gt)<<16)):(et=20,F|=function(K){return 63&(K||0)}(E.dosPermissions)),x=W.getUTCHours(),x<<=6,x|=W.getUTCMinutes(),x<<=5,x|=W.getUTCSeconds()/2,D=W.getUTCFullYear()-1980,D<<=4,D|=W.getUTCMonth()+1,D<<=5,D|=W.getUTCDate(),z&&(it=u(1,1)+u(C($),4)+P,N+="up"+u(it.length,2)+it),n&&(V=u(1,1)+u(C(H),4)+v,N+="uc"+u(V.length,2)+V);var Q="";return Q+="\n\0",Q+=u(O,2),Q+=L.magic,Q+=u(x,2),Q+=u(D,2),Q+=u(nt.crc32,4),Q+=u(nt.compressedSize,4),Q+=u(nt.uncompressedSize,4),Q+=u($.length,2),Q+=u(N.length,2),{fileRecord:_.LOCAL_FILE_HEADER+Q+$+N,dirRecord:_.CENTRAL_FILE_HEADER+u(et,2)+Q+u(H.length,2)+"\0\0\0\0"+u(F,4)+u(c,4)+$+N+H}}var s=w("../utils"),f=w("../stream/GenericWorker"),y=w("../utf8"),C=w("../crc32"),_=w("../signature");function b(r,h,a,c){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=h,this.zipPlatform=a,this.encodeFileName=c,this.streamFiles=r,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(b,f),b.prototype.push=function(r){var h=r.meta.percent||0,a=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(r):(this.bytesWritten+=r.data.length,f.prototype.push.call(this,{data:r.data,meta:{currentFile:this.currentFile,percent:a?(h+100*(a-c-1))/a:100}}))},b.prototype.openedSource=function(r){this.currentSourceOffset=this.bytesWritten,this.currentFile=r.file.name;var h=this.streamFiles&&!r.file.dir;if(h){var a=l(r,h,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(r){this.accumulate=!1;var c,h=this.streamFiles&&!r.file.dir,a=l(r,h,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),h)this.push({data:(c=r,_.DATA_DESCRIPTOR+u(c.crc32,4)+u(c.compressedSize,4)+u(c.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var r=this.bytesWritten,h=0;h<this.dirRecords.length;h++)this.push({data:this.dirRecords[h],meta:{percent:100}});var o,t,x,L,c=(o=this.dirRecords.length,t=this.bytesWritten-r,x=r,L=s.transformTo("string",(0,this.encodeFileName)(this.zipComment)),_.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(o,2)+u(o,2)+u(t,4)+u(x,4)+u(L.length,2)+L);this.push({data:c,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(r){this._sources.push(r);var h=this;return r.on("data",function(a){h.processChunk(a)}),r.on("end",function(){h.closedSource(h.previous.streamInfo),h._sources.length?h.prepareNextSource():h.end()}),r.on("error",function(a){h.error(a)}),this},b.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(r){var h=this._sources;if(!f.prototype.error.call(this,r))return!1;for(var a=0;a<h.length;a++)try{h[a].error(r)}catch{}return!0},b.prototype.lock=function(){f.prototype.lock.call(this);for(var r=this._sources,h=0;h<r.length;h++)r[h].lock()},I.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(w,I,k){"use strict";var u=w("../compressions"),l=w("./ZipFileWorker");k.generateWorker=function(s,f,y){var C=new l(f.streamFiles,y,f.platform,f.encodeFileName),_=0;try{s.forEach(function(b,r){_++;var h=function(t,x){var D=t||x,E=u[D];if(!E)throw new Error(D+" is not a valid compression method !");return E}(r.options.compression,f.compression),c=r.dir,o=r.date;r._compressWorker(h,r.options.compressionOptions||f.compressionOptions||{}).withStreamInfo("file",{name:b,dir:c,date:o,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(C)}),C.entriesCount=_}catch(b){C.error(b)}return C}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(w,I,k){"use strict";function u(){if(!(this instanceof u))return new u;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new u;for(var s in this)"function"!=typeof this[s]&&(l[s]=this[s]);return l}}(u.prototype=w("./object")).loadAsync=w("./load"),u.support=w("./support"),u.defaults=w("./defaults"),u.version="3.10.1",u.loadAsync=function(l,s){return(new u).loadAsync(l,s)},u.external=w("./external"),I.exports=u},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(w,I,k){"use strict";var u=w("./utils"),l=w("./external"),s=w("./utf8"),f=w("./zipEntries"),y=w("./stream/Crc32Probe"),C=w("./nodejsUtils");function _(b){return new l.Promise(function(r,h){var a=b.decompressed.getContentWorker().pipe(new y);a.on("error",function(c){h(c)}).on("end",function(){a.streamInfo.crc32!==b.decompressed.crc32?h(new Error("Corrupted zip : CRC32 mismatch")):r()}).resume()})}I.exports=function(b,r){var h=this;return r=u.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),C.isNode&&C.isStream(b)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u.prepareContent("the loaded zip file",b,!0,r.optimizedBinaryString,r.base64).then(function(a){var c=new f(r);return c.load(a),c}).then(function(a){var c=[l.Promise.resolve(a)],o=a.files;if(r.checkCRC32)for(var t=0;t<o.length;t++)c.push(_(o[t]));return l.Promise.all(c)}).then(function(a){for(var c=a.shift(),o=c.files,t=0;t<o.length;t++){var x=o[t],D=x.fileNameStr,E=u.resolve(x.fileNameStr);h.file(E,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:r.createFolders}),x.dir||(h.file(E).unsafeOriginalName=D)}return c.zipComment.length&&(h.comment=c.zipComment),h})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(w,I,k){"use strict";var u=w("../utils"),l=w("../stream/GenericWorker");function s(f,y){l.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(y)}u.inherits(s,l),s.prototype._bindStream=function(f){var y=this;(this._stream=f).pause(),f.on("data",function(C){y.push({data:C,meta:{percent:0}})}).on("error",function(C){y.isPaused?this.generatedError=C:y.error(C)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},s.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},I.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(w,I,k){"use strict";var u=w("readable-stream").Readable;function l(s,f,y){u.call(this,f),this._helper=s;var C=this;s.on("data",function(_,b){C.push(_)||C._helper.pause(),y&&y(b)}).on("error",function(_){C.emit("error",_)}).on("end",function(){C.push(null)})}w("../utils").inherits(l,u),l.prototype._read=function(){this._helper.resume()},I.exports=l},{"../utils":32,"readable-stream":16}],14:[function(w,I,k){"use strict";I.exports={isNode:typeof Buffer<"u",newBufferFrom:function(u,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(u,l);if("number"==typeof u)throw new Error('The "data" argument must not be a number');return new Buffer(u,l)},allocBuffer:function(u){if(Buffer.alloc)return Buffer.alloc(u);var l=new Buffer(u);return l.fill(0),l},isBuffer:function(u){return Buffer.isBuffer(u)},isStream:function(u){return u&&"function"==typeof u.on&&"function"==typeof u.pause&&"function"==typeof u.resume}}},{}],15:[function(w,I,k){"use strict";function u(E,L,U){var $,P=s.getTypeOf(L),X=s.extend(U||{},C);X.date=X.date||new Date,null!==X.compression&&(X.compression=X.compression.toUpperCase()),"string"==typeof X.unixPermissions&&(X.unixPermissions=parseInt(X.unixPermissions,8)),X.unixPermissions&&16384&X.unixPermissions&&(X.dir=!0),X.dosPermissions&&16&X.dosPermissions&&(X.dir=!0),X.dir&&(E=o(E)),X.createFolders&&($=c(E))&&t.call(this,$,!0),U&&void 0!==U.binary||(X.binary=!("string"===P&&!1===X.binary&&!1===X.base64)),(L instanceof _&&0===L.uncompressedSize||X.dir||!L||0===L.length)&&(X.base64=!1,X.binary=!0,L="",X.compression="STORE",P="string");var v;v=L instanceof _||L instanceof f?L:h.isNode&&h.isStream(L)?new a(E,L):s.prepareContent(E,L,X.binary,X.optimizedBinaryString,X.base64);var z=new b(E,v,X);this.files[E]=z}var l=w("./utf8"),s=w("./utils"),f=w("./stream/GenericWorker"),y=w("./stream/StreamHelper"),C=w("./defaults"),_=w("./compressedObject"),b=w("./zipObject"),r=w("./generate"),h=w("./nodejsUtils"),a=w("./nodejs/NodejsStreamInputAdapter"),c=function(E){"/"===E.slice(-1)&&(E=E.substring(0,E.length-1));var L=E.lastIndexOf("/");return 0<L?E.substring(0,L):""},o=function(E){return"/"!==E.slice(-1)&&(E+="/"),E},t=function(E,L){return L=void 0!==L?L:C.createFolders,E=o(E),this.files[E]||u.call(this,E,null,{dir:!0,createFolders:L}),this.files[E]};function x(E){return"[object RegExp]"===Object.prototype.toString.call(E)}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var L,U,$;for(L in this.files)$=this.files[L],(U=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&E(U,$)},filter:function(E){var L=[];return this.forEach(function(U,$){E(U,$)&&L.push($)}),L},file:function(E,L,U){if(1!==arguments.length)return u.call(this,E=this.root+E,L,U),this;if(x(E)){var $=E;return this.filter(function(X,H){return!H.dir&&$.test(X)})}var P=this.files[this.root+E];return P&&!P.dir?P:null},folder:function(E){if(!E)return this;if(x(E))return this.filter(function(P,X){return X.dir&&E.test(P)});var U=t.call(this,this.root+E),$=this.clone();return $.root=U.name,$},remove:function(E){var L=this.files[E=this.root+E];if(L||("/"!==E.slice(-1)&&(E+="/"),L=this.files[E]),L&&!L.dir)delete this.files[E];else for(var U=this.filter(function(P,X){return X.name.slice(0,E.length)===E}),$=0;$<U.length;$++)delete this.files[U[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var L,U={};try{if((U=s.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),"binarystring"===U.type&&(U.type="string"),!U.type)throw new Error("No output type specified.");s.checkSupport(U.type),"darwin"!==U.platform&&"freebsd"!==U.platform&&"linux"!==U.platform&&"sunos"!==U.platform||(U.platform="UNIX"),"win32"===U.platform&&(U.platform="DOS"),L=r.generateWorker(this,U,U.comment||this.comment||"")}catch(P){(L=new f("error")).error(P)}return new y(L,U.type||"string",U.mimeType)},generateAsync:function(E,L){return this.generateInternalStream(E).accumulate(L)},generateNodeStream:function(E,L){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(L)}};I.exports=D},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(w,I,k){"use strict";I.exports=w("stream")},{stream:void 0}],17:[function(w,I,k){"use strict";var u=w("./DataReader");function l(s){u.call(this,s);for(var f=0;f<this.data.length;f++)s[f]=255&s[f]}w("../utils").inherits(l,u),l.prototype.byteAt=function(s){return this.data[this.zero+s]},l.prototype.lastIndexOfSignature=function(s){for(var f=s.charCodeAt(0),y=s.charCodeAt(1),C=s.charCodeAt(2),_=s.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===f&&this.data[b+1]===y&&this.data[b+2]===C&&this.data[b+3]===_)return b-this.zero;return-1},l.prototype.readAndCheckSignature=function(s){var f=s.charCodeAt(0),y=s.charCodeAt(1),C=s.charCodeAt(2),_=s.charCodeAt(3),b=this.readData(4);return f===b[0]&&y===b[1]&&C===b[2]&&_===b[3]},l.prototype.readData=function(s){if(this.checkOffset(s),0===s)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},I.exports=l},{"../utils":32,"./DataReader":18}],18:[function(w,I,k){"use strict";var u=w("../utils");function l(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var f,y=0;for(this.checkOffset(s),f=this.index+s-1;f>=this.index;f--)y=(y<<8)+this.byteAt(f);return this.index+=s,y},readString:function(s){return u.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},I.exports=l},{"../utils":32}],19:[function(w,I,k){"use strict";var u=w("./Uint8ArrayReader");function l(s){u.call(this,s)}w("../utils").inherits(l,u),l.prototype.readData=function(s){this.checkOffset(s);var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},I.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(w,I,k){"use strict";var u=w("./DataReader");function l(s){u.call(this,s)}w("../utils").inherits(l,u),l.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},l.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},l.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},l.prototype.readData=function(s){this.checkOffset(s);var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},I.exports=l},{"../utils":32,"./DataReader":18}],21:[function(w,I,k){"use strict";var u=w("./ArrayReader");function l(s){u.call(this,s)}w("../utils").inherits(l,u),l.prototype.readData=function(s){if(this.checkOffset(s),0===s)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},I.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(w,I,k){"use strict";var u=w("../utils"),l=w("../support"),s=w("./ArrayReader"),f=w("./StringReader"),y=w("./NodeBufferReader"),C=w("./Uint8ArrayReader");I.exports=function(_){var b=u.getTypeOf(_);return u.checkSupport(b),"string"!==b||l.uint8array?"nodebuffer"===b?new y(_):l.uint8array?new C(u.transformTo("uint8array",_)):new s(u.transformTo("array",_)):new f(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(w,I,k){"use strict";k.LOCAL_FILE_HEADER="PK\x03\x04",k.CENTRAL_FILE_HEADER="PK\x01\x02",k.CENTRAL_DIRECTORY_END="PK\x05\x06",k.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",k.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",k.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(w,I,k){"use strict";var u=w("./GenericWorker"),l=w("../utils");function s(f){u.call(this,"ConvertWorker to "+f),this.destType=f}l.inherits(s,u),s.prototype.processChunk=function(f){this.push({data:l.transformTo(this.destType,f.data),meta:f.meta})},I.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(w,I,k){"use strict";var u=w("./GenericWorker"),l=w("../crc32");function s(){u.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}w("../utils").inherits(s,u),s.prototype.processChunk=function(f){this.streamInfo.crc32=l(f.data,this.streamInfo.crc32||0),this.push(f)},I.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(w,I,k){"use strict";var u=w("../utils"),l=w("./GenericWorker");function s(f){l.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}u.inherits(s,l),s.prototype.processChunk=function(f){f&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+f.data.length),l.prototype.processChunk.call(this,f)},I.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(w,I,k){"use strict";var u=w("../utils"),l=w("./GenericWorker");function s(f){l.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(C){y.dataIsReady=!0,y.data=C,y.max=C&&C.length||0,y.type=u.getTypeOf(C),y.isPaused||y._tickAndRepeat()},function(C){y.error(C)})}u.inherits(s,l),s.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,u.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(u.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,y);break;case"uint8array":f=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":f=this.data.slice(this.index,y)}return this.index=y,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},I.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(w,I,k){"use strict";function u(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}u.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,s){return this._listeners[l].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,s){if(this._listeners[l])for(var f=0;f<this._listeners[l].length;f++)this._listeners[l][f].call(this,s)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var s=this;return l.on("data",function(f){s.processChunk(f)}),l.on("end",function(){s.end()}),l.on("error",function(f){s.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,s){return this.extraStreamInfo[l]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},I.exports=u},{}],29:[function(w,I,k){"use strict";var u=w("../utils"),l=w("./ConvertWorker"),s=w("./GenericWorker"),f=w("../base64"),y=w("../support"),C=w("../external"),_=null;if(y.nodestream)try{_=w("../nodejs/NodejsStreamOutputAdapter")}catch{}function r(h,a,c){var o=a;switch(a){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=a,this._mimeType=c,u.checkSupport(o),this._worker=h.pipe(new l(o)),h.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}r.prototype={accumulate:function(h){return function b(h,a){return new C.Promise(function(c,o){var t=[],x=h._internalType,D=h._outputType,E=h._mimeType;h.on("data",function(L,U){t.push(L),a&&a(U)}).on("error",function(L){t=[],o(L)}).on("end",function(){try{var L=function(U,$,P){switch(U){case"blob":return u.newBlob(u.transformTo("arraybuffer",$),P);case"base64":return f.encode($);default:return u.transformTo(U,$)}}(D,function(U,$){var P,X=0,H=null,v=0;for(P=0;P<$.length;P++)v+=$[P].length;switch(U){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(H=new Uint8Array(v),P=0;P<$.length;P++)H.set($[P],X),X+=$[P].length;return H;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+U+"'")}}(x,t),E);c(L)}catch(U){o(U)}t=[]}).resume()})}(this,h)},on:function(h,a){var c=this;return this._worker.on(h,"data"===h?function(o){a.call(c,o.data,o.meta)}:function(){u.delay(a,arguments,c)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(h){if(u.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:"nodebuffer"!==this._outputType},h)}},I.exports=r},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(w,I,k){"use strict";if(k.base64=!0,k.array=!0,k.string=!0,k.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",k.nodebuffer=typeof Buffer<"u",k.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")k.blob=!1;else{var u=new ArrayBuffer(0);try{k.blob=0===new Blob([u],{type:"application/zip"}).size}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(u),k.blob=0===l.getBlob("application/zip").size}catch{k.blob=!1}}}try{k.nodestream=!!w("readable-stream").Readable}catch{k.nodestream=!1}},{"readable-stream":16}],31:[function(w,I,k){"use strict";for(var u=w("./utils"),l=w("./support"),s=w("./nodejsUtils"),f=w("./stream/GenericWorker"),y=new Array(256),C=0;C<256;C++)y[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;function _(){f.call(this,"utf-8 decode"),this.leftOver=null}function b(){f.call(this,"utf-8 encode")}y[254]=y[254]=1,k.utf8encode=function(r){return l.nodebuffer?s.newBufferFrom(r,"utf-8"):function(h){var a,c,o,t,x,D=h.length,E=0;for(t=0;t<D;t++)55296==(64512&(c=h.charCodeAt(t)))&&t+1<D&&56320==(64512&(o=h.charCodeAt(t+1)))&&(c=65536+(c-55296<<10)+(o-56320),t++),E+=c<128?1:c<2048?2:c<65536?3:4;for(a=l.uint8array?new Uint8Array(E):new Array(E),t=x=0;x<E;t++)55296==(64512&(c=h.charCodeAt(t)))&&t+1<D&&56320==(64512&(o=h.charCodeAt(t+1)))&&(c=65536+(c-55296<<10)+(o-56320),t++),c<128?a[x++]=c:(c<2048?a[x++]=192|c>>>6:(c<65536?a[x++]=224|c>>>12:(a[x++]=240|c>>>18,a[x++]=128|c>>>12&63),a[x++]=128|c>>>6&63),a[x++]=128|63&c);return a}(r)},k.utf8decode=function(r){return l.nodebuffer?u.transformTo("nodebuffer",r).toString("utf-8"):function(h){var a,c,o,t,x=h.length,D=new Array(2*x);for(a=c=0;a<x;)if((o=h[a++])<128)D[c++]=o;else if(4<(t=y[o]))D[c++]=65533,a+=t-1;else{for(o&=2===t?31:3===t?15:7;1<t&&a<x;)o=o<<6|63&h[a++],t--;1<t?D[c++]=65533:o<65536?D[c++]=o:(D[c++]=55296|(o-=65536)>>10&1023,D[c++]=56320|1023&o)}return D.length!==c&&(D.subarray?D=D.subarray(0,c):D.length=c),u.applyFromCharCode(D)}(r=u.transformTo(l.uint8array?"uint8array":"array",r))},u.inherits(_,f),_.prototype.processChunk=function(r){var h=u.transformTo(l.uint8array?"uint8array":"array",r.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var a=h;(h=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),h.set(a,this.leftOver.length)}else h=this.leftOver.concat(h);this.leftOver=null}var c=function(t,x){var D;for((x=x||t.length)>t.length&&(x=t.length),D=x-1;0<=D&&128==(192&t[D]);)D--;return D<0||0===D?x:D+y[t[D]]>x?D:x}(h),o=h;c!==h.length&&(l.uint8array?(o=h.subarray(0,c),this.leftOver=h.subarray(c,h.length)):(o=h.slice(0,c),this.leftOver=h.slice(c,h.length))),this.push({data:k.utf8decode(o),meta:r.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:k.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},k.Utf8DecodeWorker=_,u.inherits(b,f),b.prototype.processChunk=function(r){this.push({data:k.utf8encode(r.data),meta:r.meta})},k.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(w,I,k){"use strict";var u=w("./support"),l=w("./base64"),s=w("./nodejsUtils"),f=w("./external");function y(a){return a}function C(a,c){for(var o=0;o<a.length;++o)c[o]=255&a.charCodeAt(o);return c}w("setimmediate"),k.newBlob=function(a,c){k.checkSupport("blob");try{return new Blob([a],{type:c})}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(a),o.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(a,c,o){var t=[],x=0,D=a.length;if(D<=o)return String.fromCharCode.apply(null,a);for(;x<D;)t.push(String.fromCharCode.apply(null,"array"===c||"nodebuffer"===c?a.slice(x,Math.min(x+o,D)):a.subarray(x,Math.min(x+o,D)))),x+=o;return t.join("")},stringifyByChar:function(a){for(var c="",o=0;o<a.length;o++)c+=String.fromCharCode(a[o]);return c},applyCanBeUsed:{uint8array:function(){try{return u.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return u.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch{return!1}}()}};function b(a){var c=65536,o=k.getTypeOf(a),t=!0;if("uint8array"===o?t=_.applyCanBeUsed.uint8array:"nodebuffer"===o&&(t=_.applyCanBeUsed.nodebuffer),t)for(;1<c;)try{return _.stringifyByChunk(a,o,c)}catch{c=Math.floor(c/2)}return _.stringifyByChar(a)}function r(a,c){for(var o=0;o<a.length;o++)c[o]=a[o];return c}k.applyFromCharCode=b;var h={};h.string={string:y,array:function(a){return C(a,new Array(a.length))},arraybuffer:function(a){return h.string.uint8array(a).buffer},uint8array:function(a){return C(a,new Uint8Array(a.length))},nodebuffer:function(a){return C(a,s.allocBuffer(a.length))}},h.array={string:b,array:y,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return s.newBufferFrom(a)}},h.arraybuffer={string:function(a){return b(new Uint8Array(a))},array:function(a){return r(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:y,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return s.newBufferFrom(new Uint8Array(a))}},h.uint8array={string:b,array:function(a){return r(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:y,nodebuffer:function(a){return s.newBufferFrom(a)}},h.nodebuffer={string:b,array:function(a){return r(a,new Array(a.length))},arraybuffer:function(a){return h.nodebuffer.uint8array(a).buffer},uint8array:function(a){return r(a,new Uint8Array(a.length))},nodebuffer:y},k.transformTo=function(a,c){if(c=c||"",!a)return c;k.checkSupport(a);var o=k.getTypeOf(c);return h[o][a](c)},k.resolve=function(a){for(var c=a.split("/"),o=[],t=0;t<c.length;t++){var x=c[t];"."===x||""===x&&0!==t&&t!==c.length-1||(".."===x?o.pop():o.push(x))}return o.join("/")},k.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":u.nodebuffer&&s.isBuffer(a)?"nodebuffer":u.uint8array&&a instanceof Uint8Array?"uint8array":u.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},k.checkSupport=function(a){if(!u[a.toLowerCase()])throw new Error(a+" is not supported by this platform")},k.MAX_VALUE_16BITS=65535,k.MAX_VALUE_32BITS=-1,k.pretty=function(a){var c,o,t="";for(o=0;o<(a||"").length;o++)t+="\\x"+((c=a.charCodeAt(o))<16?"0":"")+c.toString(16).toUpperCase();return t},k.delay=function(a,c,o){setImmediate(function(){a.apply(o||null,c||[])})},k.inherits=function(a,c){function o(){}o.prototype=c.prototype,a.prototype=new o},k.extend=function(){var a,c,o={};for(a=0;a<arguments.length;a++)for(c in arguments[a])Object.prototype.hasOwnProperty.call(arguments[a],c)&&void 0===o[c]&&(o[c]=arguments[a][c]);return o},k.prepareContent=function(a,c,o,t,x){return f.Promise.resolve(c).then(function(D){return u.blob&&(D instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(D)))&&typeof FileReader<"u"?new f.Promise(function(E,L){var U=new FileReader;U.onload=function($){E($.target.result)},U.onerror=function($){L($.target.error)},U.readAsArrayBuffer(D)}):D}).then(function(D){var L,E=k.getTypeOf(D);return E?("arraybuffer"===E?D=k.transformTo("uint8array",D):"string"===E&&(x?D=l.decode(D):o&&!0!==t&&(D=C(L=D,u.uint8array?new Uint8Array(L.length):new Array(L.length)))),D):f.Promise.reject(new Error("Can't read the data of '"+a+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(w,I,k){"use strict";var u=w("./reader/readerFor"),l=w("./utils"),s=w("./signature"),f=w("./zipEntry"),y=w("./support");function C(_){this.files=[],this.loadOptions=_}C.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(b)+", expected "+l.pretty(_)+")")}},isSignature:function(_,b){var r=this.reader.index;this.reader.setIndex(_);var h=this.reader.readString(4)===b;return this.reader.setIndex(r),h},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),r=l.transformTo(y.uint8array?"uint8array":"array",_);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,b,r,h=this.zip64EndOfCentralSize-44;0<h;)_=this.reader.readInt(2),b=this.reader.readInt(4),r=this.reader.readData(b),this.zip64ExtensibleData[_]={id:_,length:b,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,b;for(_=0;_<this.files.length;_++)this.reader.setIndex((b=this.files[_]).localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(_=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var b=_;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var h=b-r;if(0<h)this.isSignature(b,s.CENTRAL_FILE_HEADER)||(this.reader.zero=h);else if(h<0)throw new Error("Corrupted zip: missing "+Math.abs(h)+" bytes.")},prepareReader:function(_){this.reader=u(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},I.exports=C},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(w,I,k){"use strict";var u=w("./reader/readerFor"),l=w("./utils"),s=w("./compressedObject"),f=w("./crc32"),y=w("./utf8"),C=w("./compressions"),_=w("./support");function b(r,h){this.options=r,this.loadOptions=h}b.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(r){var h,a;if(r.skip(22),this.fileNameLength=r.readInt(2),a=r.readInt(2),this.fileName=r.readData(this.fileNameLength),r.skip(a),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(h=function(c){for(var o in C)if(Object.prototype.hasOwnProperty.call(C,o)&&C[o].magic===c)return C[o];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,h,r.readData(this.compressedSize))},readCentralPart:function(r){this.versionMadeBy=r.readInt(2),r.skip(2),this.bitFlag=r.readInt(2),this.compressionMethod=r.readString(2),this.date=r.readDate(),this.crc32=r.readInt(4),this.compressedSize=r.readInt(4),this.uncompressedSize=r.readInt(4);var h=r.readInt(2);if(this.extraFieldsLength=r.readInt(2),this.fileCommentLength=r.readInt(2),this.diskNumberStart=r.readInt(2),this.internalFileAttributes=r.readInt(2),this.externalFileAttributes=r.readInt(4),this.localHeaderOffset=r.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");r.skip(h),this.readExtraFields(r),this.parseZIP64ExtraField(r),this.fileComment=r.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var r=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==r&&(this.dosPermissions=63&this.externalFileAttributes),3==r&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var r=u(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=r.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=r.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=r.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=r.readInt(4))}},readExtraFields:function(r){var h,a,c,o=r.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});r.index+4<o;)h=r.readInt(2),a=r.readInt(2),c=r.readData(a),this.extraFields[h]={id:h,length:a,value:c};r.setIndex(o)},handleUTF8:function(){var r=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var h=this.findExtraFieldUnicodePath();if(null!==h)this.fileNameStr=h;else{var a=l.transformTo(r,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(a)}var c=this.findExtraFieldUnicodeComment();if(null!==c)this.fileCommentStr=c;else{var o=l.transformTo(r,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var r=this.extraFields[28789];if(r){var h=u(r.value);return 1!==h.readInt(1)||f(this.fileName)!==h.readInt(4)?null:y.utf8decode(h.readData(r.length-5))}return null},findExtraFieldUnicodeComment:function(){var r=this.extraFields[25461];if(r){var h=u(r.value);return 1!==h.readInt(1)||f(this.fileComment)!==h.readInt(4)?null:y.utf8decode(h.readData(r.length-5))}return null}},I.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(w,I,k){"use strict";function u(h,a,c){this.name=h,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=a,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var l=w("./stream/StreamHelper"),s=w("./stream/DataWorker"),f=w("./utf8"),y=w("./compressedObject"),C=w("./stream/GenericWorker");u.prototype={internalStream:function(h){var a=null,c="string";try{if(!h)throw new Error("No output type specified.");var o="string"===(c=h.toLowerCase())||"text"===c;"binarystring"!==c&&"text"!==c||(c="string"),a=this._decompressWorker();var t=!this._dataBinary;t&&!o&&(a=a.pipe(new f.Utf8EncodeWorker)),!t&&o&&(a=a.pipe(new f.Utf8DecodeWorker))}catch(x){(a=new C("error")).error(x)}return new l(a,c,"")},async:function(h,a){return this.internalStream(h).accumulate(a)},nodeStream:function(h,a){return this.internalStream(h||"nodebuffer").toNodejsStream(a)},_compressWorker:function(h,a){if(this._data instanceof y&&this._data.compression.magic===h.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new f.Utf8EncodeWorker)),y.createWorkerFrom(c,h,a)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof C?this._data:new s(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},r=0;r<_.length;r++)u.prototype[_[r]]=b;I.exports=u},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(w,I,k){(function(u){"use strict";var l,s,f=u.MutationObserver||u.WebKitMutationObserver;if(f){var y=0,C=new f(h),_=u.document.createTextNode("");C.observe(_,{characterData:!0}),l=function(){_.data=y=++y%2}}else if(u.setImmediate||void 0===u.MessageChannel)l="document"in u&&"onreadystatechange"in u.document.createElement("script")?function(){var a=u.document.createElement("script");a.onreadystatechange=function(){h(),a.onreadystatechange=null,a.parentNode.removeChild(a),a=null},u.document.documentElement.appendChild(a)}:function(){setTimeout(h,0)};else{var b=new u.MessageChannel;b.port1.onmessage=h,l=function(){b.port2.postMessage(0)}}var r=[];function h(){var a,c;s=!0;for(var o=r.length;o;){for(c=r,r=[],a=-1;++a<o;)c[a]();o=r.length}s=!1}I.exports=function(a){1!==r.push(a)||s||l()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(w,I,k){"use strict";var u=w("immediate");function l(){}var s={},f=["REJECTED"],y=["FULFILLED"],C=["PENDING"];function _(o){if("function"!=typeof o)throw new TypeError("resolver must be a function");this.state=C,this.queue=[],this.outcome=void 0,o!==l&&a(this,o)}function b(o,t,x){this.promise=o,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof x&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function r(o,t,x){u(function(){var D;try{D=t(x)}catch(E){return s.reject(o,E)}D===o?s.reject(o,new TypeError("Cannot resolve promise with itself")):s.resolve(o,D)})}function h(o){var t=o&&o.then;if(o&&("object"==typeof o||"function"==typeof o)&&"function"==typeof t)return function(){t.apply(o,arguments)}}function a(o,t){var x=!1;function D(U){x||(x=!0,s.reject(o,U))}function E(U){x||(x=!0,s.resolve(o,U))}var L=c(function(){t(E,D)});"error"===L.status&&D(L.value)}function c(o,t){var x={};try{x.value=o(t),x.status="success"}catch(D){x.status="error",x.value=D}return x}(I.exports=_).prototype.finally=function(o){if("function"!=typeof o)return this;var t=this.constructor;return this.then(function(x){return t.resolve(o()).then(function(){return x})},function(x){return t.resolve(o()).then(function(){throw x})})},_.prototype.catch=function(o){return this.then(null,o)},_.prototype.then=function(o,t){if("function"!=typeof o&&this.state===y||"function"!=typeof t&&this.state===f)return this;var x=new this.constructor(l);return this.state!==C?r(x,this.state===y?o:t,this.outcome):this.queue.push(new b(x,o,t)),x},b.prototype.callFulfilled=function(o){s.resolve(this.promise,o)},b.prototype.otherCallFulfilled=function(o){r(this.promise,this.onFulfilled,o)},b.prototype.callRejected=function(o){s.reject(this.promise,o)},b.prototype.otherCallRejected=function(o){r(this.promise,this.onRejected,o)},s.resolve=function(o,t){var x=c(h,t);if("error"===x.status)return s.reject(o,x.value);var D=x.value;if(D)a(o,D);else{o.state=y,o.outcome=t;for(var E=-1,L=o.queue.length;++E<L;)o.queue[E].callFulfilled(t)}return o},s.reject=function(o,t){o.state=f,o.outcome=t;for(var x=-1,D=o.queue.length;++x<D;)o.queue[x].callRejected(t);return o},_.resolve=function(o){return o instanceof this?o:s.resolve(new this(l),o)},_.reject=function(o){var t=new this(l);return s.reject(t,o)},_.all=function(o){var t=this;if("[object Array]"!==Object.prototype.toString.call(o))return this.reject(new TypeError("must be an array"));var x=o.length,D=!1;if(!x)return this.resolve([]);for(var E=new Array(x),L=0,U=-1,$=new this(l);++U<x;)P(o[U],U);return $;function P(X,H){t.resolve(X).then(function(v){E[H]=v,++L!==x||D||(D=!0,s.resolve($,E))},function(v){D||(D=!0,s.reject($,v))})}},_.race=function(o){if("[object Array]"!==Object.prototype.toString.call(o))return this.reject(new TypeError("must be an array"));var x=o.length,D=!1;if(!x)return this.resolve([]);for(var E=-1,L=new this(l);++E<x;)this.resolve(o[E]).then(function($){D||(D=!0,s.resolve(L,$))},function($){D||(D=!0,s.reject(L,$))});return L}},{immediate:36}],38:[function(w,I,k){"use strict";var u={};(0,w("./lib/utils/common").assign)(u,w("./lib/deflate"),w("./lib/inflate"),w("./lib/zlib/constants")),I.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(w,I,k){"use strict";var u=w("./zlib/deflate"),l=w("./utils/common"),s=w("./utils/strings"),f=w("./zlib/messages"),y=w("./zlib/zstream"),C=Object.prototype.toString,_=0,b=-1,r=0,h=8;function a(o){if(!(this instanceof a))return new a(o);this.options=l.assign({level:b,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:r,to:""},o||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var x=u.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(x!==_)throw new Error(f[x]);if(t.header&&u.deflateSetHeader(this.strm,t.header),t.dictionary){var D;if(D="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===C.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(x=u.deflateSetDictionary(this.strm,D))!==_)throw new Error(f[x]);this._dict_set=!0}}function c(o,t){var x=new a(t);if(x.push(o,!0),x.err)throw x.msg||f[x.err];return x.result}a.prototype.push=function(o,t){var x,D,E=this.strm,L=this.options.chunkSize;if(this.ended)return!1;D=t===~~t?t:!0===t?4:0,E.input="string"==typeof o?s.string2buf(o):"[object ArrayBuffer]"===C.call(o)?new Uint8Array(o):o,E.next_in=0,E.avail_in=E.input.length;do{if(0===E.avail_out&&(E.output=new l.Buf8(L),E.next_out=0,E.avail_out=L),1!==(x=u.deflate(E,D))&&x!==_)return this.onEnd(x),!(this.ended=!0);0!==E.avail_out&&(0!==E.avail_in||4!==D&&2!==D)||this.onData("string"===this.options.to?s.buf2binstring(l.shrinkBuf(E.output,E.next_out)):l.shrinkBuf(E.output,E.next_out))}while((0<E.avail_in||0===E.avail_out)&&1!==x);return 4===D?(x=u.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===_):2!==D||(this.onEnd(_),!(E.avail_out=0))},a.prototype.onData=function(o){this.chunks.push(o)},a.prototype.onEnd=function(o){o===_&&(this.result="string"===this.options.to?this.chunks.join(""):l.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},k.Deflate=a,k.deflate=c,k.deflateRaw=function(o,t){return(t=t||{}).raw=!0,c(o,t)},k.gzip=function(o,t){return(t=t||{}).gzip=!0,c(o,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(w,I,k){"use strict";var u=w("./zlib/inflate"),l=w("./utils/common"),s=w("./utils/strings"),f=w("./zlib/constants"),y=w("./zlib/messages"),C=w("./zlib/zstream"),_=w("./zlib/gzheader"),b=Object.prototype.toString;function r(a){if(!(this instanceof r))return new r(a);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},a||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,0===c.windowBits&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||a&&a.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&!(15&c.windowBits)&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var o=u.inflateInit2(this.strm,c.windowBits);if(o!==f.Z_OK)throw new Error(y[o]);this.header=new _,u.inflateGetHeader(this.strm,this.header)}function h(a,c){var o=new r(c);if(o.push(a,!0),o.err)throw o.msg||y[o.err];return o.result}r.prototype.push=function(a,c){var o,t,x,D,E,L,U=this.strm,$=this.options.chunkSize,P=this.options.dictionary,X=!1;if(this.ended)return!1;t=c===~~c?c:!0===c?f.Z_FINISH:f.Z_NO_FLUSH,U.input="string"==typeof a?s.binstring2buf(a):"[object ArrayBuffer]"===b.call(a)?new Uint8Array(a):a,U.next_in=0,U.avail_in=U.input.length;do{if(0===U.avail_out&&(U.output=new l.Buf8($),U.next_out=0,U.avail_out=$),(o=u.inflate(U,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&P&&(L="string"==typeof P?s.string2buf(P):"[object ArrayBuffer]"===b.call(P)?new Uint8Array(P):P,o=u.inflateSetDictionary(this.strm,L)),o===f.Z_BUF_ERROR&&!0===X&&(o=f.Z_OK,X=!1),o!==f.Z_STREAM_END&&o!==f.Z_OK)return this.onEnd(o),!(this.ended=!0);U.next_out&&(0!==U.avail_out&&o!==f.Z_STREAM_END&&(0!==U.avail_in||t!==f.Z_FINISH&&t!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(x=s.utf8border(U.output,U.next_out),D=U.next_out-x,E=s.buf2string(U.output,x),U.next_out=D,U.avail_out=$-D,D&&l.arraySet(U.output,U.output,x,D,0),this.onData(E)):this.onData(l.shrinkBuf(U.output,U.next_out)))),0===U.avail_in&&0===U.avail_out&&(X=!0)}while((0<U.avail_in||0===U.avail_out)&&o!==f.Z_STREAM_END);return o===f.Z_STREAM_END&&(t=f.Z_FINISH),t===f.Z_FINISH?(o=u.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===f.Z_OK):t!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(U.avail_out=0))},r.prototype.onData=function(a){this.chunks.push(a)},r.prototype.onEnd=function(a){a===f.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):l.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},k.Inflate=r,k.inflate=h,k.inflateRaw=function(a,c){return(c=c||{}).raw=!0,h(a,c)},k.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(w,I,k){"use strict";var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";k.assign=function(f){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var C=y.shift();if(C){if("object"!=typeof C)throw new TypeError(C+"must be non-object");for(var _ in C)C.hasOwnProperty(_)&&(f[_]=C[_])}}return f},k.shrinkBuf=function(f,y){return f.length===y?f:f.subarray?f.subarray(0,y):(f.length=y,f)};var l={arraySet:function(f,y,C,_,b){if(y.subarray&&f.subarray)f.set(y.subarray(C,C+_),b);else for(var r=0;r<_;r++)f[b+r]=y[C+r]},flattenChunks:function(f){var y,C,_,b,r,h;for(y=_=0,C=f.length;y<C;y++)_+=f[y].length;for(h=new Uint8Array(_),y=b=0,C=f.length;y<C;y++)h.set(r=f[y],b),b+=r.length;return h}},s={arraySet:function(f,y,C,_,b){for(var r=0;r<_;r++)f[b+r]=y[C+r]},flattenChunks:function(f){return[].concat.apply([],f)}};k.setTyped=function(f){f?(k.Buf8=Uint8Array,k.Buf16=Uint16Array,k.Buf32=Int32Array,k.assign(k,l)):(k.Buf8=Array,k.Buf16=Array,k.Buf32=Array,k.assign(k,s))},k.setTyped(u)},{}],42:[function(w,I,k){"use strict";var u=w("./common"),l=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var f=new u.Buf8(256),y=0;y<256;y++)f[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function C(_,b){if(b<65537&&(_.subarray&&s||!_.subarray&&l))return String.fromCharCode.apply(null,u.shrinkBuf(_,b));for(var r="",h=0;h<b;h++)r+=String.fromCharCode(_[h]);return r}f[254]=f[254]=1,k.string2buf=function(_){var b,r,h,a,c,o=_.length,t=0;for(a=0;a<o;a++)55296==(64512&(r=_.charCodeAt(a)))&&a+1<o&&56320==(64512&(h=_.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(h-56320),a++),t+=r<128?1:r<2048?2:r<65536?3:4;for(b=new u.Buf8(t),a=c=0;c<t;a++)55296==(64512&(r=_.charCodeAt(a)))&&a+1<o&&56320==(64512&(h=_.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(h-56320),a++),r<128?b[c++]=r:(r<2048?b[c++]=192|r>>>6:(r<65536?b[c++]=224|r>>>12:(b[c++]=240|r>>>18,b[c++]=128|r>>>12&63),b[c++]=128|r>>>6&63),b[c++]=128|63&r);return b},k.buf2binstring=function(_){return C(_,_.length)},k.binstring2buf=function(_){for(var b=new u.Buf8(_.length),r=0,h=b.length;r<h;r++)b[r]=_.charCodeAt(r);return b},k.buf2string=function(_,b){var r,h,a,c,o=b||_.length,t=new Array(2*o);for(r=h=0;r<o;)if((a=_[r++])<128)t[h++]=a;else if(4<(c=f[a]))t[h++]=65533,r+=c-1;else{for(a&=2===c?31:3===c?15:7;1<c&&r<o;)a=a<<6|63&_[r++],c--;1<c?t[h++]=65533:a<65536?t[h++]=a:(t[h++]=55296|(a-=65536)>>10&1023,t[h++]=56320|1023&a)}return C(t,h)},k.utf8border=function(_,b){var r;for((b=b||_.length)>_.length&&(b=_.length),r=b-1;0<=r&&128==(192&_[r]);)r--;return r<0||0===r?b:r+f[_[r]]>b?r:b}},{"./common":41}],43:[function(w,I,k){"use strict";I.exports=function(u,l,s,f){for(var y=65535&u,C=u>>>16&65535,_=0;0!==s;){for(s-=_=2e3<s?2e3:s;C=C+(y=y+l[f++]|0)|0,--_;);y%=65521,C%=65521}return y|C<<16}},{}],44:[function(w,I,k){"use strict";I.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(w,I,k){"use strict";var u=function(){for(var l,s=[],f=0;f<256;f++){l=f;for(var y=0;y<8;y++)l=1&l?3988292384^l>>>1:l>>>1;s[f]=l}return s}();I.exports=function(l,s,f,y){var C=u,_=y+f;l^=-1;for(var b=y;b<_;b++)l=l>>>8^C[255&(l^s[b])];return~l}},{}],46:[function(w,I,k){"use strict";var u,l=w("../utils/common"),s=w("./trees"),f=w("./adler32"),y=w("./crc32"),C=w("./messages"),_=0,r=0,h=-2,o=2,t=8,D=286,E=30,L=19,U=2*D+1,$=15,P=3,X=258,H=X+P+1,v=42,z=113;function rt(e,j){return e.msg=C[j],j}function W(e){return(e<<1)-(4<e?9:0)}function nt(e){for(var j=e.length;0<=--j;)e[j]=0}function O(e){var j=e.state,T=j.pending;T>e.avail_out&&(T=e.avail_out),0!==T&&(l.arraySet(e.output,j.pending_buf,j.pending_out,T,e.next_out),e.next_out+=T,j.pending_out+=T,e.total_out+=T,e.avail_out-=T,j.pending-=T,0===j.pending&&(j.pending_out=0))}function F(e,j){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,j),e.block_start=e.strstart,O(e.strm)}function et(e,j){e.pending_buf[e.pending++]=j}function Q(e,j){e.pending_buf[e.pending++]=j>>>8&255,e.pending_buf[e.pending++]=255&j}function K(e,j){var T,p,d=e.max_chain_length,A=e.strstart,G=e.prev_length,M=e.nice_match,R=e.strstart>e.w_size-H?e.strstart-(e.w_size-H):0,Y=e.window,q=e.w_mask,Z=e.prev,tt=e.strstart+X,ct=Y[A+G-1],st=Y[A+G];e.prev_length>=e.good_match&&(d>>=2),M>e.lookahead&&(M=e.lookahead);do{if(Y[(T=j)+G]===st&&Y[T+G-1]===ct&&Y[T]===Y[A]&&Y[++T]===Y[A+1]){A+=2,T++;do{}while(Y[++A]===Y[++T]&&Y[++A]===Y[++T]&&Y[++A]===Y[++T]&&Y[++A]===Y[++T]&&Y[++A]===Y[++T]&&Y[++A]===Y[++T]&&Y[++A]===Y[++T]&&Y[++A]===Y[++T]&&A<tt);if(p=X-(tt-A),A=tt-X,G<p){if(e.match_start=j,M<=(G=p))break;ct=Y[A+G-1],st=Y[A+G]}}}while((j=Z[j&q])>R&&0!=--d);return G<=e.lookahead?G:e.lookahead}function ut(e){var j,T,p,d,A,G,M,R,Y,q,Z=e.w_size;do{if(d=e.window_size-e.lookahead-e.strstart,e.strstart>=Z+(Z-H)){for(l.arraySet(e.window,e.window,Z,Z,0),e.match_start-=Z,e.strstart-=Z,e.block_start-=Z,j=T=e.hash_size;p=e.head[--j],e.head[j]=Z<=p?p-Z:0,--T;);for(j=T=Z;p=e.prev[--j],e.prev[j]=Z<=p?p-Z:0,--T;);d+=Z}if(0===e.strm.avail_in)break;if(M=e.window,R=e.strstart+e.lookahead,q=void 0,(Y=d)<(q=(G=e.strm).avail_in)&&(q=Y),T=0===q?0:(G.avail_in-=q,l.arraySet(M,G.input,G.next_in,q,R),1===G.state.wrap?G.adler=f(G.adler,M,q,R):2===G.state.wrap&&(G.adler=y(G.adler,M,q,R)),G.next_in+=q,G.total_in+=q,q),e.lookahead+=T,e.lookahead+e.insert>=P)for(e.ins_h=e.window[A=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[A+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[A+P-1])&e.hash_mask,e.prev[A&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=A,A++,e.insert--,!(e.lookahead+e.insert<P)););}while(e.lookahead<H&&0!==e.strm.avail_in)}function gt(e,j){for(var T,p;;){if(e.lookahead<H){if(ut(e),e.lookahead<H&&j===_)return 1;if(0===e.lookahead)break}if(T=0,e.lookahead>=P&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+P-1])&e.hash_mask,T=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==T&&e.strstart-T<=e.w_size-H&&(e.match_length=K(e,T)),e.match_length>=P)if(p=s._tr_tally(e,e.strstart-e.match_start,e.match_length-P),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=P){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+P-1])&e.hash_mask,T=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else p=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(p&&(F(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<P-1?e.strstart:P-1,4===j?(F(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?1:2}function at(e,j){for(var T,p,d;;){if(e.lookahead<H){if(ut(e),e.lookahead<H&&j===_)return 1;if(0===e.lookahead)break}if(T=0,e.lookahead>=P&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+P-1])&e.hash_mask,T=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=P-1,0!==T&&e.prev_length<e.max_lazy_match&&e.strstart-T<=e.w_size-H&&(e.match_length=K(e,T),e.match_length<=5&&(1===e.strategy||e.match_length===P&&4096<e.strstart-e.match_start)&&(e.match_length=P-1)),e.prev_length>=P&&e.match_length<=e.prev_length){for(d=e.strstart+e.lookahead-P,p=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-P),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=d&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+P-1])&e.hash_mask,T=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=P-1,e.strstart++,p&&(F(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((p=s._tr_tally(e,0,e.window[e.strstart-1]))&&F(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(p=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<P-1?e.strstart:P-1,4===j?(F(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?1:2}function lt(e,j,T,p,d){this.good_length=e,this.max_lazy=j,this.nice_length=T,this.max_chain=p,this.func=d}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=t,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*U),this.dyn_dtree=new l.Buf16(2*(2*E+1)),this.bl_tree=new l.Buf16(2*(2*L+1)),nt(this.dyn_ltree),nt(this.dyn_dtree),nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16($+1),this.heap=new l.Buf16(2*D+1),nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*D+1),nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ht(e){var j;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=o,(j=e.state).pending=0,j.pending_out=0,j.wrap<0&&(j.wrap=-j.wrap),j.status=j.wrap?v:z,e.adler=2===j.wrap?0:1,j.last_flush=_,s._tr_init(j),r):rt(e,h)}function wt(e){var T,j=ht(e);return j===r&&((T=e.state).window_size=2*T.w_size,nt(T.head),T.max_lazy_match=u[T.level].max_lazy,T.good_match=u[T.level].good_length,T.nice_match=u[T.level].nice_length,T.max_chain_length=u[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=P-1,T.match_available=0,T.ins_h=0),j}function yt(e,j,T,p,d,A){if(!e)return h;var G=1;if(-1===j&&(j=6),p<0?(G=0,p=-p):15<p&&(G=2,p-=16),d<1||9<d||T!==t||p<8||15<p||j<0||9<j||A<0||4<A)return rt(e,h);8===p&&(p=9);var M=new mt;return(e.state=M).strm=e,M.wrap=G,M.gzhead=null,M.w_bits=p,M.w_size=1<<M.w_bits,M.w_mask=M.w_size-1,M.hash_bits=d+7,M.hash_size=1<<M.hash_bits,M.hash_mask=M.hash_size-1,M.hash_shift=~~((M.hash_bits+P-1)/P),M.window=new l.Buf8(2*M.w_size),M.head=new l.Buf16(M.hash_size),M.prev=new l.Buf16(M.w_size),M.lit_bufsize=1<<d+6,M.pending_buf_size=4*M.lit_bufsize,M.pending_buf=new l.Buf8(M.pending_buf_size),M.d_buf=1*M.lit_bufsize,M.l_buf=3*M.lit_bufsize,M.level=j,M.strategy=A,M.method=T,wt(e)}u=[new lt(0,0,0,0,function(e,j){var T=65535;for(T>e.pending_buf_size-5&&(T=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ut(e),0===e.lookahead&&j===_)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var p=e.block_start+T;if((0===e.strstart||e.strstart>=p)&&(e.lookahead=e.strstart-p,e.strstart=p,F(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-H&&(F(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===j?(F(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&F(e,!1),1)}),new lt(4,4,8,4,gt),new lt(4,5,16,8,gt),new lt(4,6,32,32,gt),new lt(4,4,16,16,at),new lt(8,16,32,32,at),new lt(8,16,128,128,at),new lt(8,32,128,256,at),new lt(32,128,258,1024,at),new lt(32,258,258,4096,at)],k.deflateInit=function(e,j){return yt(e,j,t,15,8,0)},k.deflateInit2=yt,k.deflateReset=wt,k.deflateResetKeep=ht,k.deflateSetHeader=function(e,j){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=j,r):h},k.deflate=function(e,j){var T,p,d,A;if(!e||!e.state||5<j||j<0)return e?rt(e,h):h;if(p=e.state,!e.output||!e.input&&0!==e.avail_in||666===p.status&&4!==j)return rt(e,0===e.avail_out?-5:h);if(p.strm=e,T=p.last_flush,p.last_flush=j,p.status===v)if(2===p.wrap)e.adler=0,et(p,31),et(p,139),et(p,8),p.gzhead?(et(p,(p.gzhead.text?1:0)+(p.gzhead.hcrc?2:0)+(p.gzhead.extra?4:0)+(p.gzhead.name?8:0)+(p.gzhead.comment?16:0)),et(p,255&p.gzhead.time),et(p,p.gzhead.time>>8&255),et(p,p.gzhead.time>>16&255),et(p,p.gzhead.time>>24&255),et(p,9===p.level?2:2<=p.strategy||p.level<2?4:0),et(p,255&p.gzhead.os),p.gzhead.extra&&p.gzhead.extra.length&&(et(p,255&p.gzhead.extra.length),et(p,p.gzhead.extra.length>>8&255)),p.gzhead.hcrc&&(e.adler=y(e.adler,p.pending_buf,p.pending,0)),p.gzindex=0,p.status=69):(et(p,0),et(p,0),et(p,0),et(p,0),et(p,0),et(p,9===p.level?2:2<=p.strategy||p.level<2?4:0),et(p,3),p.status=z);else{var G=t+(p.w_bits-8<<4)<<8;G|=(2<=p.strategy||p.level<2?0:p.level<6?1:6===p.level?2:3)<<6,0!==p.strstart&&(G|=32),G+=31-G%31,p.status=z,Q(p,G),0!==p.strstart&&(Q(p,e.adler>>>16),Q(p,65535&e.adler)),e.adler=1}if(69===p.status)if(p.gzhead.extra){for(d=p.pending;p.gzindex<(65535&p.gzhead.extra.length)&&(p.pending!==p.pending_buf_size||(p.gzhead.hcrc&&p.pending>d&&(e.adler=y(e.adler,p.pending_buf,p.pending-d,d)),O(e),d=p.pending,p.pending!==p.pending_buf_size));)et(p,255&p.gzhead.extra[p.gzindex]),p.gzindex++;p.gzhead.hcrc&&p.pending>d&&(e.adler=y(e.adler,p.pending_buf,p.pending-d,d)),p.gzindex===p.gzhead.extra.length&&(p.gzindex=0,p.status=73)}else p.status=73;if(73===p.status)if(p.gzhead.name){d=p.pending;do{if(p.pending===p.pending_buf_size&&(p.gzhead.hcrc&&p.pending>d&&(e.adler=y(e.adler,p.pending_buf,p.pending-d,d)),O(e),d=p.pending,p.pending===p.pending_buf_size)){A=1;break}A=p.gzindex<p.gzhead.name.length?255&p.gzhead.name.charCodeAt(p.gzindex++):0,et(p,A)}while(0!==A);p.gzhead.hcrc&&p.pending>d&&(e.adler=y(e.adler,p.pending_buf,p.pending-d,d)),0===A&&(p.gzindex=0,p.status=91)}else p.status=91;if(91===p.status)if(p.gzhead.comment){d=p.pending;do{if(p.pending===p.pending_buf_size&&(p.gzhead.hcrc&&p.pending>d&&(e.adler=y(e.adler,p.pending_buf,p.pending-d,d)),O(e),d=p.pending,p.pending===p.pending_buf_size)){A=1;break}A=p.gzindex<p.gzhead.comment.length?255&p.gzhead.comment.charCodeAt(p.gzindex++):0,et(p,A)}while(0!==A);p.gzhead.hcrc&&p.pending>d&&(e.adler=y(e.adler,p.pending_buf,p.pending-d,d)),0===A&&(p.status=103)}else p.status=103;if(103===p.status&&(p.gzhead.hcrc?(p.pending+2>p.pending_buf_size&&O(e),p.pending+2<=p.pending_buf_size&&(et(p,255&e.adler),et(p,e.adler>>8&255),e.adler=0,p.status=z)):p.status=z),0!==p.pending){if(O(e),0===e.avail_out)return p.last_flush=-1,r}else if(0===e.avail_in&&W(j)<=W(T)&&4!==j)return rt(e,-5);if(666===p.status&&0!==e.avail_in)return rt(e,-5);if(0!==e.avail_in||0!==p.lookahead||j!==_&&666!==p.status){var M=2===p.strategy?function(R,Y){for(var q;;){if(0===R.lookahead&&(ut(R),0===R.lookahead)){if(Y===_)return 1;break}if(R.match_length=0,q=s._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,q&&(F(R,!1),0===R.strm.avail_out))return 1}return R.insert=0,4===Y?(F(R,!0),0===R.strm.avail_out?3:4):R.last_lit&&(F(R,!1),0===R.strm.avail_out)?1:2}(p,j):3===p.strategy?function(R,Y){for(var q,Z,tt,ct,st=R.window;;){if(R.lookahead<=X){if(ut(R),R.lookahead<=X&&Y===_)return 1;if(0===R.lookahead)break}if(R.match_length=0,R.lookahead>=P&&0<R.strstart&&(Z=st[tt=R.strstart-1])===st[++tt]&&Z===st[++tt]&&Z===st[++tt]){ct=R.strstart+X;do{}while(Z===st[++tt]&&Z===st[++tt]&&Z===st[++tt]&&Z===st[++tt]&&Z===st[++tt]&&Z===st[++tt]&&Z===st[++tt]&&Z===st[++tt]&&tt<ct);R.match_length=X-(ct-tt),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=P?(q=s._tr_tally(R,1,R.match_length-P),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(q=s._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),q&&(F(R,!1),0===R.strm.avail_out))return 1}return R.insert=0,4===Y?(F(R,!0),0===R.strm.avail_out?3:4):R.last_lit&&(F(R,!1),0===R.strm.avail_out)?1:2}(p,j):u[p.level].func(p,j);if(3!==M&&4!==M||(p.status=666),1===M||3===M)return 0===e.avail_out&&(p.last_flush=-1),r;if(2===M&&(1===j?s._tr_align(p):5!==j&&(s._tr_stored_block(p,0,0,!1),3===j&&(nt(p.head),0===p.lookahead&&(p.strstart=0,p.block_start=0,p.insert=0))),O(e),0===e.avail_out))return p.last_flush=-1,r}return 4!==j?r:p.wrap<=0?1:(2===p.wrap?(et(p,255&e.adler),et(p,e.adler>>8&255),et(p,e.adler>>16&255),et(p,e.adler>>24&255),et(p,255&e.total_in),et(p,e.total_in>>8&255),et(p,e.total_in>>16&255),et(p,e.total_in>>24&255)):(Q(p,e.adler>>>16),Q(p,65535&e.adler)),O(e),0<p.wrap&&(p.wrap=-p.wrap),0!==p.pending?r:1)},k.deflateEnd=function(e){var j;return e&&e.state?(j=e.state.status)!==v&&69!==j&&73!==j&&91!==j&&103!==j&&j!==z&&666!==j?rt(e,h):(e.state=null,j===z?rt(e,-3):r):h},k.deflateSetDictionary=function(e,j){var T,p,d,A,G,M,R,Y,q=j.length;if(!e||!e.state||2===(A=(T=e.state).wrap)||1===A&&T.status!==v||T.lookahead)return h;for(1===A&&(e.adler=f(e.adler,j,q,0)),T.wrap=0,q>=T.w_size&&(0===A&&(nt(T.head),T.strstart=0,T.block_start=0,T.insert=0),Y=new l.Buf8(T.w_size),l.arraySet(Y,j,q-T.w_size,T.w_size,0),j=Y,q=T.w_size),G=e.avail_in,M=e.next_in,R=e.input,e.avail_in=q,e.next_in=0,e.input=j,ut(T);T.lookahead>=P;){for(p=T.strstart,d=T.lookahead-(P-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[p+P-1])&T.hash_mask,T.prev[p&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=p,p++,--d;);T.strstart=p,T.lookahead=P-1,ut(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=P-1,T.match_available=0,e.next_in=M,e.input=R,e.avail_in=G,T.wrap=A,r},k.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(w,I,k){"use strict";I.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(w,I,k){"use strict";I.exports=function(u,l){var s,f,y,C,_,b,r,h,a,c,o,t,x,D,E,L,U,$,P,X,H,v,z,n,N;n=u.input,y=(f=u.next_in)+(u.avail_in-5),N=u.output,_=(C=u.next_out)-(l-u.avail_out),b=C+(u.avail_out-257),r=(s=u.state).dmax,h=s.wsize,a=s.whave,c=s.wnext,o=s.window,t=s.hold,x=s.bits,D=s.lencode,E=s.distcode,L=(1<<s.lenbits)-1,U=(1<<s.distbits)-1;t:do{x<15&&(t+=n[f++]<<x,t+=n[f++]<<(x+=8),x+=8),$=D[t&L];e:for(;;){if(t>>>=P=$>>>24,x-=P,0==(P=$>>>16&255))N[C++]=65535&$;else{if(!(16&P)){if(!(64&P)){$=D[(65535&$)+(t&(1<<P)-1)];continue e}if(32&P){s.mode=12;break t}u.msg="invalid literal/length code",s.mode=30;break t}X=65535&$,(P&=15)&&(x<P&&(t+=n[f++]<<x,x+=8),X+=t&(1<<P)-1,t>>>=P,x-=P),x<15&&(t+=n[f++]<<x,t+=n[f++]<<(x+=8),x+=8),$=E[t&U];i:for(;;){if(t>>>=P=$>>>24,x-=P,!(16&(P=$>>>16&255))){if(!(64&P)){$=E[(65535&$)+(t&(1<<P)-1)];continue i}u.msg="invalid distance code",s.mode=30;break t}if(H=65535&$,x<(P&=15)&&(t+=n[f++]<<x,(x+=8)<P&&(t+=n[f++]<<x,x+=8)),r<(H+=t&(1<<P)-1)){u.msg="invalid distance too far back",s.mode=30;break t}if(t>>>=P,x-=P,(P=C-_)<H){if(a<(P=H-P)&&s.sane){u.msg="invalid distance too far back",s.mode=30;break t}if(z=o,(v=0)===c){if(v+=h-P,P<X){for(X-=P;N[C++]=o[v++],--P;);v=C-H,z=N}}else if(c<P){if(v+=h+c-P,(P-=c)<X){for(X-=P;N[C++]=o[v++],--P;);if(v=0,c<X){for(X-=P=c;N[C++]=o[v++],--P;);v=C-H,z=N}}}else if(v+=c-P,P<X){for(X-=P;N[C++]=o[v++],--P;);v=C-H,z=N}for(;2<X;)N[C++]=z[v++],N[C++]=z[v++],N[C++]=z[v++],X-=3;X&&(N[C++]=z[v++],1<X&&(N[C++]=z[v++]))}else{for(v=C-H;N[C++]=N[v++],N[C++]=N[v++],N[C++]=N[v++],2<(X-=3););X&&(N[C++]=N[v++],1<X&&(N[C++]=N[v++]))}break}}break}}while(f<y&&C<b);f-=X=x>>3,t&=(1<<(x-=X<<3))-1,u.next_in=f,u.next_out=C,u.avail_in=f<y?y-f+5:5-(f-y),u.avail_out=C<b?b-C+257:257-(C-b),s.hold=t,s.bits=x}},{}],49:[function(w,I,k){"use strict";var u=w("../utils/common"),l=w("./adler32"),s=w("./crc32"),f=w("./inffast"),y=w("./inftrees"),b=0,r=-2,h=1,a=852,c=592;function o(v){return(v>>>24&255)+(v>>>8&65280)+((65280&v)<<8)+((255&v)<<24)}function t(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(v){var z;return v&&v.state?(v.total_in=v.total_out=(z=v.state).total=0,v.msg="",z.wrap&&(v.adler=1&z.wrap),z.mode=h,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new u.Buf32(a),z.distcode=z.distdyn=new u.Buf32(c),z.sane=1,z.back=-1,b):r}function D(v){var z;return v&&v.state?((z=v.state).wsize=0,z.whave=0,z.wnext=0,x(v)):r}function E(v,z){var n,N;return v&&v.state?(N=v.state,z<0?(n=0,z=-z):(n=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?r:(null!==N.window&&N.wbits!==z&&(N.window=null),N.wrap=n,N.wbits=z,D(v))):r}function L(v,z){var n,N;return v?(N=new t,(v.state=N).window=null,(n=E(v,z))!==b&&(v.state=null),n):r}var U,$,P=!0;function X(v){if(P){var z;for(U=new u.Buf32(512),$=new u.Buf32(32),z=0;z<144;)v.lens[z++]=8;for(;z<256;)v.lens[z++]=9;for(;z<280;)v.lens[z++]=7;for(;z<288;)v.lens[z++]=8;for(y(1,v.lens,0,288,U,0,v.work,{bits:9}),z=0;z<32;)v.lens[z++]=5;y(2,v.lens,0,32,$,0,v.work,{bits:5}),P=!1}v.lencode=U,v.lenbits=9,v.distcode=$,v.distbits=5}function H(v,z,n,N){var it,V=v.state;return null===V.window&&(V.wsize=1<<V.wbits,V.wnext=0,V.whave=0,V.window=new u.Buf8(V.wsize)),N>=V.wsize?(u.arraySet(V.window,z,n-V.wsize,V.wsize,0),V.wnext=0,V.whave=V.wsize):(N<(it=V.wsize-V.wnext)&&(it=N),u.arraySet(V.window,z,n-N,it,V.wnext),(N-=it)?(u.arraySet(V.window,z,n-N,N,0),V.wnext=N,V.whave=V.wsize):(V.wnext+=it,V.wnext===V.wsize&&(V.wnext=0),V.whave<V.wsize&&(V.whave+=it))),0}k.inflateReset=D,k.inflateReset2=E,k.inflateResetKeep=x,k.inflateInit=function(v){return L(v,15)},k.inflateInit2=L,k.inflate=function(v,z){var n,N,it,V,rt,W,nt,O,F,et,Q,K,ut,gt,at,lt,mt,ht,wt,yt,e,j,T,p,d=0,A=new u.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&0!==v.avail_in)return r;12===(n=v.state).mode&&(n.mode=13),rt=v.next_out,it=v.output,V=v.next_in,N=v.input,O=n.hold,F=n.bits,et=W=v.avail_in,Q=nt=v.avail_out,j=b;t:for(;;)switch(n.mode){case h:if(0===n.wrap){n.mode=13;break}for(;F<16;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}if(2&n.wrap&&35615===O){A[n.check=0]=255&O,A[1]=O>>>8&255,n.check=s(n.check,A,2,0),F=O=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&O)<<8)+(O>>8))%31){v.msg="incorrect header check",n.mode=30;break}if(8!=(15&O)){v.msg="unknown compression method",n.mode=30;break}if(F-=4,e=8+(15&(O>>>=4)),0===n.wbits)n.wbits=e;else if(e>n.wbits){v.msg="invalid window size",n.mode=30;break}n.dmax=1<<e,v.adler=n.check=1,n.mode=512&O?10:12,F=O=0;break;case 2:for(;F<16;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}if(n.flags=O,8!=(255&n.flags)){v.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){v.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=O>>8&1),512&n.flags&&(A[0]=255&O,A[1]=O>>>8&255,n.check=s(n.check,A,2,0)),F=O=0,n.mode=3;case 3:for(;F<32;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}n.head&&(n.head.time=O),512&n.flags&&(A[0]=255&O,A[1]=O>>>8&255,A[2]=O>>>16&255,A[3]=O>>>24&255,n.check=s(n.check,A,4,0)),F=O=0,n.mode=4;case 4:for(;F<16;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}n.head&&(n.head.xflags=255&O,n.head.os=O>>8),512&n.flags&&(A[0]=255&O,A[1]=O>>>8&255,n.check=s(n.check,A,2,0)),F=O=0,n.mode=5;case 5:if(1024&n.flags){for(;F<16;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}n.length=O,n.head&&(n.head.extra_len=O),512&n.flags&&(A[0]=255&O,A[1]=O>>>8&255,n.check=s(n.check,A,2,0)),F=O=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(W<(K=n.length)&&(K=W),K&&(n.head&&(e=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),u.arraySet(n.head.extra,N,V,K,e)),512&n.flags&&(n.check=s(n.check,N,K,V)),W-=K,V+=K,n.length-=K),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===W)break t;for(K=0;e=N[V+K++],n.head&&e&&n.length<65536&&(n.head.name+=String.fromCharCode(e)),e&&K<W;);if(512&n.flags&&(n.check=s(n.check,N,K,V)),W-=K,V+=K,e)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===W)break t;for(K=0;e=N[V+K++],n.head&&e&&n.length<65536&&(n.head.comment+=String.fromCharCode(e)),e&&K<W;);if(512&n.flags&&(n.check=s(n.check,N,K,V)),W-=K,V+=K,e)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;F<16;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}if(O!==(65535&n.check)){v.msg="header crc mismatch",n.mode=30;break}F=O=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),v.adler=n.check=0,n.mode=12;break;case 10:for(;F<32;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}v.adler=n.check=o(O),F=O=0,n.mode=11;case 11:if(0===n.havedict)return v.next_out=rt,v.avail_out=nt,v.next_in=V,v.avail_in=W,n.hold=O,n.bits=F,2;v.adler=n.check=1,n.mode=12;case 12:if(5===z||6===z)break t;case 13:if(n.last){O>>>=7&F,F-=7&F,n.mode=27;break}for(;F<3;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}switch(n.last=1&O,F-=1,3&(O>>>=1)){case 0:n.mode=14;break;case 1:if(X(n),n.mode=20,6!==z)break;O>>>=2,F-=2;break t;case 2:n.mode=17;break;case 3:v.msg="invalid block type",n.mode=30}O>>>=2,F-=2;break;case 14:for(O>>>=7&F,F-=7&F;F<32;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}if((65535&O)!=(O>>>16^65535)){v.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&O,F=O=0,n.mode=15,6===z)break t;case 15:n.mode=16;case 16:if(K=n.length){if(W<K&&(K=W),nt<K&&(K=nt),0===K)break t;u.arraySet(it,N,V,K,rt),W-=K,V+=K,nt-=K,rt+=K,n.length-=K;break}n.mode=12;break;case 17:for(;F<14;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}if(n.nlen=257+(31&O),F-=5,n.ndist=1+(31&(O>>>=5)),F-=5,n.ncode=4+(15&(O>>>=5)),O>>>=4,F-=4,286<n.nlen||30<n.ndist){v.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;F<3;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}n.lens[G[n.have++]]=7&O,O>>>=3,F-=3}for(;n.have<19;)n.lens[G[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,j=y(0,n.lens,0,19,n.lencode,0,n.work,T={bits:n.lenbits}),n.lenbits=T.bits,j){v.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;lt=(d=n.lencode[O&(1<<n.lenbits)-1])>>>16&255,mt=65535&d,!((at=d>>>24)<=F);){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}if(mt<16)O>>>=at,F-=at,n.lens[n.have++]=mt;else{if(16===mt){for(p=at+2;F<p;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}if(O>>>=at,F-=at,0===n.have){v.msg="invalid bit length repeat",n.mode=30;break}e=n.lens[n.have-1],K=3+(3&O),O>>>=2,F-=2}else if(17===mt){for(p=at+3;F<p;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}F-=at,e=0,K=3+(7&(O>>>=at)),O>>>=3,F-=3}else{for(p=at+7;F<p;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}F-=at,e=0,K=11+(127&(O>>>=at)),O>>>=7,F-=7}if(n.have+K>n.nlen+n.ndist){v.msg="invalid bit length repeat",n.mode=30;break}for(;K--;)n.lens[n.have++]=e}}if(30===n.mode)break;if(0===n.lens[256]){v.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,j=y(1,n.lens,0,n.nlen,n.lencode,0,n.work,T={bits:n.lenbits}),n.lenbits=T.bits,j){v.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,j=y(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T={bits:n.distbits}),n.distbits=T.bits,j){v.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===z)break t;case 20:n.mode=21;case 21:if(6<=W&&258<=nt){v.next_out=rt,v.avail_out=nt,v.next_in=V,v.avail_in=W,n.hold=O,n.bits=F,f(v,Q),rt=v.next_out,it=v.output,nt=v.avail_out,V=v.next_in,N=v.input,W=v.avail_in,O=n.hold,F=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;lt=(d=n.lencode[O&(1<<n.lenbits)-1])>>>16&255,mt=65535&d,!((at=d>>>24)<=F);){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}if(lt&&!(240&lt)){for(ht=at,wt=lt,yt=mt;lt=(d=n.lencode[yt+((O&(1<<ht+wt)-1)>>ht)])>>>16&255,mt=65535&d,!(ht+(at=d>>>24)<=F);){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}O>>>=ht,F-=ht,n.back+=ht}if(O>>>=at,F-=at,n.back+=at,n.length=mt,0===lt){n.mode=26;break}if(32&lt){n.back=-1,n.mode=12;break}if(64&lt){v.msg="invalid literal/length code",n.mode=30;break}n.extra=15&lt,n.mode=22;case 22:if(n.extra){for(p=n.extra;F<p;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}n.length+=O&(1<<n.extra)-1,O>>>=n.extra,F-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;lt=(d=n.distcode[O&(1<<n.distbits)-1])>>>16&255,mt=65535&d,!((at=d>>>24)<=F);){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}if(!(240&lt)){for(ht=at,wt=lt,yt=mt;lt=(d=n.distcode[yt+((O&(1<<ht+wt)-1)>>ht)])>>>16&255,mt=65535&d,!(ht+(at=d>>>24)<=F);){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}O>>>=ht,F-=ht,n.back+=ht}if(O>>>=at,F-=at,n.back+=at,64&lt){v.msg="invalid distance code",n.mode=30;break}n.offset=mt,n.extra=15&lt,n.mode=24;case 24:if(n.extra){for(p=n.extra;F<p;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}n.offset+=O&(1<<n.extra)-1,O>>>=n.extra,F-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){v.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===nt)break t;if(n.offset>(K=Q-nt)){if((K=n.offset-K)>n.whave&&n.sane){v.msg="invalid distance too far back",n.mode=30;break}ut=K>n.wnext?n.wsize-(K-=n.wnext):n.wnext-K,K>n.length&&(K=n.length),gt=n.window}else gt=it,ut=rt-n.offset,K=n.length;for(nt<K&&(K=nt),nt-=K,n.length-=K;it[rt++]=gt[ut++],--K;);0===n.length&&(n.mode=21);break;case 26:if(0===nt)break t;it[rt++]=n.length,nt--,n.mode=21;break;case 27:if(n.wrap){for(;F<32;){if(0===W)break t;W--,O|=N[V++]<<F,F+=8}if(v.total_out+=Q-=nt,n.total+=Q,Q&&(v.adler=n.check=n.flags?s(n.check,it,Q,rt-Q):l(n.check,it,Q,rt-Q)),Q=nt,(n.flags?O:o(O))!==n.check){v.msg="incorrect data check",n.mode=30;break}F=O=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;F<32;){if(0===W)break t;W--,O+=N[V++]<<F,F+=8}if(O!==(4294967295&n.total)){v.msg="incorrect length check",n.mode=30;break}F=O=0}n.mode=29;case 29:j=1;break t;case 30:j=-3;break t;case 31:return-4;default:return r}return v.next_out=rt,v.avail_out=nt,v.next_in=V,v.avail_in=W,n.hold=O,n.bits=F,(n.wsize||Q!==v.avail_out&&n.mode<30&&(n.mode<27||4!==z))&&H(v,v.output,v.next_out,Q-v.avail_out)?(n.mode=31,-4):(Q-=v.avail_out,v.total_in+=et-=v.avail_in,v.total_out+=Q,n.total+=Q,n.wrap&&Q&&(v.adler=n.check=n.flags?s(n.check,it,Q,v.next_out-Q):l(n.check,it,Q,v.next_out-Q)),v.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==et&&0===Q||4===z)&&j===b&&(j=-5),j)},k.inflateEnd=function(v){if(!v||!v.state)return r;var z=v.state;return z.window&&(z.window=null),v.state=null,b},k.inflateGetHeader=function(v,z){var n;return v&&v.state&&2&(n=v.state).wrap?((n.head=z).done=!1,b):r},k.inflateSetDictionary=function(v,z){var n,N=z.length;return v&&v.state?0!==(n=v.state).wrap&&11!==n.mode?r:11===n.mode&&l(1,z,N,0)!==n.check?-3:H(v,z,N,N)?(n.mode=31,-4):(n.havedict=1,b):r},k.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(w,I,k){"use strict";var u=w("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];I.exports=function(C,_,b,r,h,a,c,o){var t,x,D,E,L,U,$,P,X,H=o.bits,v=0,z=0,n=0,N=0,it=0,V=0,rt=0,W=0,nt=0,O=0,F=null,et=0,Q=new u.Buf16(16),K=new u.Buf16(16),ut=null,gt=0;for(v=0;v<=15;v++)Q[v]=0;for(z=0;z<r;z++)Q[_[b+z]]++;for(it=H,N=15;1<=N&&0===Q[N];N--);if(N<it&&(it=N),0===N)return h[a++]=20971520,h[a++]=20971520,o.bits=1,0;for(n=1;n<N&&0===Q[n];n++);for(it<n&&(it=n),v=W=1;v<=15;v++)if(W<<=1,(W-=Q[v])<0)return-1;if(0<W&&(0===C||1!==N))return-1;for(K[1]=0,v=1;v<15;v++)K[v+1]=K[v]+Q[v];for(z=0;z<r;z++)0!==_[b+z]&&(c[K[_[b+z]]++]=z);if(U=0===C?(F=ut=c,19):1===C?(F=l,et-=257,ut=s,gt-=257,256):(F=f,ut=y,-1),v=n,L=a,rt=z=O=0,D=-1,E=(nt=1<<(V=it))-1,1===C&&852<nt||2===C&&592<nt)return 1;for(;;){for($=v-rt,X=c[z]<U?(P=0,c[z]):c[z]>U?(P=ut[gt+c[z]],F[et+c[z]]):(P=96,0),t=1<<v-rt,n=x=1<<V;h[L+(O>>rt)+(x-=t)]=$<<24|P<<16|X,0!==x;);for(t=1<<v-1;O&t;)t>>=1;if(0!==t?(O&=t-1,O+=t):O=0,z++,0==--Q[v]){if(v===N)break;v=_[b+c[z]]}if(it<v&&(O&E)!==D){for(0===rt&&(rt=it),L+=n,W=1<<(V=v-rt);V+rt<N&&!((W-=Q[V+rt])<=0);)V++,W<<=1;if(nt+=1<<V,1===C&&852<nt||2===C&&592<nt)return 1;h[D=O&E]=it<<24|V<<16|L-a}}return 0!==O&&(h[L+O]=v-rt<<24|64<<16),o.bits=it,0}},{"../utils/common":41}],51:[function(w,I,k){"use strict";I.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(w,I,k){"use strict";var u=w("../utils/common");function f(d){for(var A=d.length;0<=--A;)d[A]=0}var _=256,b=286,r=30,c=15,o=16,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(576);f(H);var v=new Array(60);f(v);var z=new Array(512);f(z);var n=new Array(256);f(n);var N=new Array(29);f(N);var it,V,rt,W=new Array(r);function nt(d,A,G,M,R){this.static_tree=d,this.extra_bits=A,this.extra_base=G,this.elems=M,this.max_length=R,this.has_stree=d&&d.length}function O(d,A){this.dyn_tree=d,this.max_code=0,this.stat_desc=A}function F(d){return d<256?z[d]:z[256+(d>>>7)]}function et(d,A){d.pending_buf[d.pending++]=255&A,d.pending_buf[d.pending++]=A>>>8&255}function Q(d,A,G){d.bi_valid>o-G?(d.bi_buf|=A<<d.bi_valid&65535,et(d,d.bi_buf),d.bi_buf=A>>o-d.bi_valid,d.bi_valid+=G-o):(d.bi_buf|=A<<d.bi_valid&65535,d.bi_valid+=G)}function K(d,A,G){Q(d,G[2*A],G[2*A+1])}function ut(d,A){for(var G=0;G|=1&d,d>>>=1,G<<=1,0<--A;);return G>>>1}function gt(d,A,G){var M,R,Y=new Array(c+1),q=0;for(M=1;M<=c;M++)Y[M]=q=q+G[M-1]<<1;for(R=0;R<=A;R++){var Z=d[2*R+1];0!==Z&&(d[2*R]=ut(Y[Z]++,Z))}}function at(d){var A;for(A=0;A<b;A++)d.dyn_ltree[2*A]=0;for(A=0;A<r;A++)d.dyn_dtree[2*A]=0;for(A=0;A<19;A++)d.bl_tree[2*A]=0;d.dyn_ltree[512]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0}function lt(d){8<d.bi_valid?et(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0}function mt(d,A,G,M){var R=2*A,Y=2*G;return d[R]<d[Y]||d[R]===d[Y]&&M[A]<=M[G]}function ht(d,A,G){for(var M=d.heap[G],R=G<<1;R<=d.heap_len&&(R<d.heap_len&&mt(A,d.heap[R+1],d.heap[R],d.depth)&&R++,!mt(A,M,d.heap[R],d.depth));)d.heap[G]=d.heap[R],G=R,R<<=1;d.heap[G]=M}function wt(d,A,G){var M,R,Y,q,Z=0;if(0!==d.last_lit)for(;M=d.pending_buf[d.d_buf+2*Z]<<8|d.pending_buf[d.d_buf+2*Z+1],R=d.pending_buf[d.l_buf+Z],Z++,0===M?K(d,R,A):(K(d,(Y=n[R])+_+1,A),0!==(q=U[Y])&&Q(d,R-=N[Y],q),K(d,Y=F(--M),G),0!==(q=$[Y])&&Q(d,M-=W[Y],q)),Z<d.last_lit;);K(d,256,A)}function yt(d,A){var G,M,R,Y=A.dyn_tree,q=A.stat_desc.static_tree,Z=A.stat_desc.has_stree,tt=A.stat_desc.elems,ct=-1;for(d.heap_len=0,d.heap_max=573,G=0;G<tt;G++)0!==Y[2*G]?(d.heap[++d.heap_len]=ct=G,d.depth[G]=0):Y[2*G+1]=0;for(;d.heap_len<2;)Y[2*(R=d.heap[++d.heap_len]=ct<2?++ct:0)]=1,d.depth[R]=0,d.opt_len--,Z&&(d.static_len-=q[2*R+1]);for(A.max_code=ct,G=d.heap_len>>1;1<=G;G--)ht(d,Y,G);for(R=tt;G=d.heap[1],d.heap[1]=d.heap[d.heap_len--],ht(d,Y,1),M=d.heap[1],d.heap[--d.heap_max]=G,d.heap[--d.heap_max]=M,Y[2*R]=Y[2*G]+Y[2*M],d.depth[R]=(d.depth[G]>=d.depth[M]?d.depth[G]:d.depth[M])+1,Y[2*G+1]=Y[2*M+1]=R,d.heap[1]=R++,ht(d,Y,1),2<=d.heap_len;);d.heap[--d.heap_max]=d.heap[1],function(st,_t){var St,dt,vt,ft,At,Rt,pt=_t.dyn_tree,Ot=_t.max_code,Ut=_t.stat_desc.static_tree,zt=_t.stat_desc.has_stree,jt=_t.stat_desc.extra_bits,Pt=_t.stat_desc.extra_base,Dt=_t.stat_desc.max_length,It=0;for(ft=0;ft<=c;ft++)st.bl_count[ft]=0;for(pt[2*st.heap[st.heap_max]+1]=0,St=st.heap_max+1;St<573;St++)Dt<(ft=pt[2*pt[2*(dt=st.heap[St])+1]+1]+1)&&(ft=Dt,It++),pt[2*dt+1]=ft,Ot<dt||(st.bl_count[ft]++,At=0,Pt<=dt&&(At=jt[dt-Pt]),st.opt_len+=(Rt=pt[2*dt])*(ft+At),zt&&(st.static_len+=Rt*(Ut[2*dt+1]+At)));if(0!==It){do{for(ft=Dt-1;0===st.bl_count[ft];)ft--;st.bl_count[ft]--,st.bl_count[ft+1]+=2,st.bl_count[Dt]--,It-=2}while(0<It);for(ft=Dt;0!==ft;ft--)for(dt=st.bl_count[ft];0!==dt;)Ot<(vt=st.heap[--St])||(pt[2*vt+1]!==ft&&(st.opt_len+=(ft-pt[2*vt+1])*pt[2*vt],pt[2*vt+1]=ft),dt--)}}(d,A),gt(Y,ct,d.bl_count)}function e(d,A,G){var M,R,Y=-1,q=A[1],Z=0,tt=7,ct=4;for(0===q&&(tt=138,ct=3),A[2*(G+1)+1]=65535,M=0;M<=G;M++)R=q,q=A[2*(M+1)+1],++Z<tt&&R===q||(Z<ct?d.bl_tree[2*R]+=Z:0!==R?(R!==Y&&d.bl_tree[2*R]++,d.bl_tree[32]++):Z<=10?d.bl_tree[34]++:d.bl_tree[36]++,Y=R,ct=(Z=0)===q?(tt=138,3):R===q?(tt=6,3):(tt=7,4))}function j(d,A,G){var M,R,Y=-1,q=A[1],Z=0,tt=7,ct=4;for(0===q&&(tt=138,ct=3),M=0;M<=G;M++)if(R=q,q=A[2*(M+1)+1],!(++Z<tt&&R===q)){if(Z<ct)for(;K(d,R,d.bl_tree),0!=--Z;);else 0!==R?(R!==Y&&(K(d,R,d.bl_tree),Z--),K(d,16,d.bl_tree),Q(d,Z-3,2)):Z<=10?(K(d,17,d.bl_tree),Q(d,Z-3,3)):(K(d,18,d.bl_tree),Q(d,Z-11,7));Y=R,ct=(Z=0)===q?(tt=138,3):R===q?(tt=6,3):(tt=7,4)}}f(W);var T=!1;function p(d,A,G,M){var R,Y,q;Q(d,0+(M?1:0),3),Y=A,q=G,lt(R=d),et(R,q),et(R,~q),u.arraySet(R.pending_buf,R.window,Y,q,R.pending),R.pending+=q}k._tr_init=function(d){T||(function(){var A,G,M,R,Y,q=new Array(c+1);for(R=M=0;R<28;R++)for(N[R]=M,A=0;A<1<<U[R];A++)n[M++]=R;for(n[M-1]=R,R=Y=0;R<16;R++)for(W[R]=Y,A=0;A<1<<$[R];A++)z[Y++]=R;for(Y>>=7;R<r;R++)for(W[R]=Y<<7,A=0;A<1<<$[R]-7;A++)z[256+Y++]=R;for(G=0;G<=c;G++)q[G]=0;for(A=0;A<=143;)H[2*A+1]=8,A++,q[8]++;for(;A<=255;)H[2*A+1]=9,A++,q[9]++;for(;A<=279;)H[2*A+1]=7,A++,q[7]++;for(;A<=287;)H[2*A+1]=8,A++,q[8]++;for(gt(H,287,q),A=0;A<r;A++)v[2*A+1]=5,v[2*A]=ut(A,5);it=new nt(H,U,257,b,c),V=new nt(v,$,0,r,c),rt=new nt(new Array(0),P,0,19,7)}(),T=!0),d.l_desc=new O(d.dyn_ltree,it),d.d_desc=new O(d.dyn_dtree,V),d.bl_desc=new O(d.bl_tree,rt),d.bi_buf=0,d.bi_valid=0,at(d)},k._tr_stored_block=p,k._tr_flush_block=function(d,A,G,M){var R,Y,q=0;0<d.level?(2===d.strm.data_type&&(d.strm.data_type=function(Z){var tt,ct=4093624447;for(tt=0;tt<=31;tt++,ct>>>=1)if(1&ct&&0!==Z.dyn_ltree[2*tt])return 0;if(0!==Z.dyn_ltree[18]||0!==Z.dyn_ltree[20]||0!==Z.dyn_ltree[26])return 1;for(tt=32;tt<_;tt++)if(0!==Z.dyn_ltree[2*tt])return 1;return 0}(d)),yt(d,d.l_desc),yt(d,d.d_desc),q=function(Z){var tt;for(e(Z,Z.dyn_ltree,Z.l_desc.max_code),e(Z,Z.dyn_dtree,Z.d_desc.max_code),yt(Z,Z.bl_desc),tt=18;3<=tt&&0===Z.bl_tree[2*X[tt]+1];tt--);return Z.opt_len+=3*(tt+1)+5+5+4,tt}(d),(Y=d.static_len+3+7>>>3)<=(R=d.opt_len+3+7>>>3)&&(R=Y)):R=Y=G+5,G+4<=R&&-1!==A?p(d,A,G,M):4===d.strategy||Y===R?(Q(d,2+(M?1:0),3),wt(d,H,v)):(Q(d,4+(M?1:0),3),function(Z,tt,ct,st){var _t;for(Q(Z,tt-257,5),Q(Z,ct-1,5),Q(Z,st-4,4),_t=0;_t<st;_t++)Q(Z,Z.bl_tree[2*X[_t]+1],3);j(Z,Z.dyn_ltree,tt-1),j(Z,Z.dyn_dtree,ct-1)}(d,d.l_desc.max_code+1,d.d_desc.max_code+1,q+1),wt(d,d.dyn_ltree,d.dyn_dtree)),at(d),M&&lt(d)},k._tr_tally=function(d,A,G){return d.pending_buf[d.d_buf+2*d.last_lit]=A>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&A,d.pending_buf[d.l_buf+d.last_lit]=255&G,d.last_lit++,0===A?d.dyn_ltree[2*G]++:(d.matches++,A--,d.dyn_ltree[2*(n[G]+_+1)]++,d.dyn_dtree[2*F(A)]++),d.last_lit===d.lit_bufsize-1},k._tr_align=function(d){var A;Q(d,2,3),K(d,256,H),16===(A=d).bi_valid?(et(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}},{"../utils/common":41}],53:[function(w,I,k){"use strict";I.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(w,I,k){(function(u){!function(l,s){"use strict";if(!l.setImmediate){var f,y,C,_,b=1,r={},h=!1,a=l.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(l);c=c&&c.setTimeout?c:l,f="[object process]"==={}.toString.call(l.process)?function(D){process.nextTick(function(){t(D)})}:function(){if(l.postMessage&&!l.importScripts){var D=!0,E=l.onmessage;return l.onmessage=function(){D=!1},l.postMessage("","*"),l.onmessage=E,D}}()?(_="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",x,!1):l.attachEvent("onmessage",x),function(D){l.postMessage(_+D,"*")}):l.MessageChannel?((C=new MessageChannel).port1.onmessage=function(D){t(D.data)},function(D){C.port2.postMessage(D)}):a&&"onreadystatechange"in a.createElement("script")?(y=a.documentElement,function(D){var E=a.createElement("script");E.onreadystatechange=function(){t(D),E.onreadystatechange=null,y.removeChild(E),E=null},y.appendChild(E)}):function(D){setTimeout(t,0,D)},c.setImmediate=function(D){"function"!=typeof D&&(D=new Function(""+D));for(var E=new Array(arguments.length-1),L=0;L<E.length;L++)E[L]=arguments[L+1];return r[b]={callback:D,args:E},f(b),b++},c.clearImmediate=o}function o(D){delete r[D]}function t(D){if(h)setTimeout(t,0,D);else{var E=r[D];if(E){h=!0;try{!function(L){var U=L.callback,$=L.args;switch($.length){case 0:U();break;case 1:U($[0]);break;case 2:U($[0],$[1]);break;case 3:U($[0],$[1],$[2]);break;default:U.apply(s,$)}}(E)}finally{o(D),h=!1}}}}function x(D){D.source===l&&"string"==typeof D.data&&0===D.data.indexOf(_)&&t(+D.data.slice(_.length))}}(typeof self>"u"?void 0===u?this:u:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}}]);