(self.webpackChunkdocument_management_system_lw_frontend=self.webpackChunkdocument_management_system_lw_frontend||[]).push([[695],{8076:(Ut,st,m)=>{"use strict";m.r(st),m.d(st,{DocumentManagemntRoutes:()=>hl});var M=m(177),G=m(5596),w=m(9159),re=m(7722),te=m(9213),_e=m(9115),Z=m(8834),se=m(6695),le=m(450),C=m(4912),T=m(2529),j=m(2168),U=m(6633),z=m(1626),i=m(3953),lt=m(7843);let q=(()=>{class e{constructor(t){this.apiService=t}getOneCase(t){return this.apiService.get(`/cases/find/${t}`)}getAllCases(t){return this.apiService.get(`/cases/?case_id=${t}`)}getAllCasesWithServerSidePagination(t,a,o,r){const c=(new z.Nl).set("page",t.toString()).set("limit",a.toString()).set("sortBy",o).set("order",r);return this.apiService.get("/cases",c)}getAllowedUsersByDocId(t){return this.apiService.get(`/documents/${t}/users`)}getAllUsers(){return this.apiService.get("/users")}createNewCase(t,a){return this.apiService.post("/cases",t,a)}updateCase(t,a,o){return this.apiService.put(`/cases/${a}`,t,o)}removeCase(t){return this.apiService.delete(`/cases/${t}`)}removeDocumentCasecase(t){return this.apiService.delete(`/documents/${t}`)}fileBatchUpload(t,a){const o={headers:new z.Lr({Accept:"application/json"}),reportProgress:!0,observe:"events"};return this.apiService.post(`/documents/batch-upload/${t}`,a,o)}fileBatchDownload(t,a){return this.apiService.post("/documents/batch-download/",{case_id:t,fileKeys:a})}singleFileDownload(t,a){return this.apiService.post("/documents/single-download",{case_id:t,fileUrl:a},{responseType:"blob"})}updateDocumentAccess(t,a,o){return this.apiService.put("/documents/assign-access",{documentId:a,userIds:t},o)}static#e=this.\u0275fac=function(a){return new(a||e)(i.KVO(lt.Z))};static#t=this.\u0275prov=i.jDH({token:e,factory:e.\u0275fac})}return e})();var ct=m(2042),Ie=m(9172),he=m(5558),_i=m(6354),dt=m(9437),Lt=m(7224),A=m(5505),$a=m(8149),ft=m(7418),Fe=m(4006),ut=m(9088),_t=m(4535),we=m(2102),ht=m(9631);const Ba=()=>[5,10,25,100];function Za(e,n){if(1&e){const t=i.RV6();i.j41(0,"mat-form-field",11)(1,"input",12),i.bIt("keyup",function(o){i.eBV(t);const r=i.XpG();return i.Njj(r.applyFilter(o))}),i.k0s()()}}function Va(e,n){1&e&&i.nrm(0,"app-content-loader",13),2&e&&i.Y8G("loaderType","button")}function Ya(e,n){1&e&&(i.j41(0,"button",14),i.nrm(1,"i-tabler",15),i.k0s()),2&e&&i.Y8G("routerLink","/document-managemnt/single-case")}function Xa(e,n){1&e&&(i.j41(0,"th",26),i.EFF(1," Case ID "),i.k0s())}function Ha(e,n){if(1&e&&(i.j41(0,"td",27)(1,"div",28)(2,"div",29)(3,"h6",30),i.EFF(4),i.k0s()()()()),2&e){const t=n.$implicit;i.R7$(4),i.SpI(" ",t.case_id," ")}}function Ka(e,n){1&e&&(i.j41(0,"th",26),i.EFF(1," Documents "),i.k0s())}function Wa(e,n){if(1&e&&(i.j41(0,"td",31),i.nrm(1,"i-tabler",32),i.EFF(2),i.k0s()),2&e){const t=n.$implicit;i.R7$(2),i.SpI(" ",t.documents.length," ")}}function Ja(e,n){1&e&&(i.j41(0,"th",26),i.EFF(1," Last Updated Date "),i.k0s())}function Qa(e,n){if(1&e&&(i.j41(0,"td",33),i.EFF(1),i.nI1(2,"date"),i.k0s()),2&e){const t=n.$implicit;i.R7$(),i.SpI(" ",i.i5U(2,1,t.updatedAt,"dd MMM yyyy, HH:mm:ss")," ")}}function qa(e,n){1&e&&i.nrm(0,"tr",34)}function en(e,n){if(1&e){const t=i.RV6();i.j41(0,"tr",35),i.bIt("click",function(){const o=i.eBV(t).$implicit,r=i.XpG(2);return i.Njj(r.navigateSingleCase(o))}),i.k0s()}}function tn(e,n){if(1&e&&(i.j41(0,"table",16),i.qex(1,17),i.DNE(2,Xa,2,0,"th",18)(3,Ha,5,1,"td",19),i.bVm(),i.qex(4,20),i.DNE(5,Ka,2,0,"th",18)(6,Wa,3,1,"td",21),i.bVm(),i.qex(7,22),i.DNE(8,Ja,2,0,"th",18)(9,Qa,3,4,"td",23),i.bVm(),i.DNE(10,qa,1,0,"tr",24)(11,en,1,0,"tr",25),i.k0s()),2&e){const t=i.XpG();i.Y8G("dataSource",t.dataSource),i.R7$(10),i.Y8G("matHeaderRowDef",t.displayedColumns),i.R7$(),i.Y8G("matRowDefColumns",t.displayedColumns)}}function an(e,n){1&e&&i.nrm(0,"app-content-loader",36),2&e&&i.Y8G("loaderType","table")}function nn(e,n){1&e&&i.nrm(0,"app-content-loader",13),2&e&&i.Y8G("loaderType","paginator")}let on=(()=>{class e{constructor(t,a,o,r,c,l,_){this.router=t,this.activatedRoute=a,this.apiService=o,this.alertService=r,this.deleteConfirmDialog=c,this.authService=l,this.fullPageLoaderService=_,this.tableData=[],this.displayedColumns=["id","documents","last_updated"],this.removeDialogTitle="Do you want to remove?",this.messageBodayKey="",this.editRouterLink="",this.resultsLength=0,this.isLoadingResults=!0,this.isLoading=!0,this.isRateLimitReached=!1,this.pageSize=5,this.isAdmin=!1,this.caseId="",this.dataSource=new w.I6}ngOnInit(){this.isAdmin=this.authService.hasRole(A.N.ADMIN)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.sort&&(this.dataSource.sort=this.sort),this.paginator.page.pipe((0,Ie.Z)({}),(0,he.n)(()=>(this.isLoadingResults=!0,this.requestTableData(this.sort?this.sort.active:"case_id",this.sort?this.sort.direction:"asc")))).subscribe(t=>{this.isLoadingResults=!1,this.tableData=t,this.dataSource=new w.I6(this.tableData)})}isBackDisabled(){return 0===this.paginator.pageIndex}isNextDisabled(){return this.paginator.pageIndex===Math.ceil(this.resultsLength/this.paginator.pageSize)-1}requestTableData(t,a){return this.apiService.getAllCasesWithServerSidePagination(this.paginator.pageIndex,this.paginator.pageSize,t,a).pipe((0,_i.T)(o=>(this.resultsLength=o.total,o.data)),(0,dt.W)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,[])))}onPageChange(){this.isLoadingResults=!0,this.requestTableData(this.sort?this.sort.active:"case_id",this.sort?this.sort.direction:"asc").subscribe(o=>{this.isLoadingResults=!1,this.resultsLength=o.total,this.dataSource.data=o.data})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}openDialog(t,a,o){this.deleteConfirmDialog.open(U.P,{width:"30%",enterAnimationDuration:t,exitAnimationDuration:a,data:{item:o[this.messageBodayKey],title:this.removeDialogTitle}})}navigateSingleCase(t){console.log(t),this.router.navigate(["/document-managemnt/single-case"],{queryParams:{id:t.id}})}static#e=this.\u0275fac=function(a){return new(a||e)(i.rXU(j.Ix),i.rXU(j.nX),i.rXU(q),i.rXU(ft.I),i.rXU(Fe.bZ),i.rXU(ut.u),i.rXU(_t.J))};static#t=this.\u0275cmp=i.VBU({type:e,selectors:[["app-case-table-pagination"]],viewQuery:function(a,o){if(1&a&&(i.GBs(ct.B4,5),i.GBs(se.iy,5)),2&a){let r;i.mGM(r=i.lsd())&&(o.sort=r.first),i.mGM(r=i.lsd())&&(o.paginator=r.first)}},standalone:!0,features:[i.Jv_([q,M.vh]),i.aNF],decls:13,vars:12,consts:[[1,"cardWithShadow"],[1,"row","justify-content-between","m-l-4","m-r-4"],[1,"col-left"],["appearance","outline","class","w-100 m-b-0","color","primary",4,"ngIf"],[1,"col-right","m-r-30","m-t-2"],[3,"loaderType",4,"ngIf"],["color","primary","mat-stroked-button","",3,"routerLink",4,"ngIf"],[1,"table-responsive"],["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["style","padding-top: 2px !important;",3,"loaderType",4,"ngIf"],[3,"page","length","pageSize","pageSizeOptions"],["appearance","outline","color","primary",1,"w-100","m-b-0"],["matInput","","placeholder","Filter",3,"keyup"],[3,"loaderType"],["color","primary","mat-stroked-button","",3,"routerLink"],["name","users-plus",1,"icon-22",2,"color","blue"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","documents"],["mat-cell","",4,"matCellDef"],["matColumnDef","last_updated"],["mat-cell","","class","mat-body-1 f-s-12 f-w-600",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],[1,"d-flex","align-items-center"],[1,"m-l-16"],[1,"mat-body-1","f-s-12","f-w-600"],["mat-cell",""],["name","file-type-pdf",1,"icon-22"],["mat-cell","",1,"mat-body-1","f-s-12","f-w-600"],["mat-header-row",""],["mat-row","",3,"click"],[2,"padding-top","2px !important",3,"loaderType"]],template:function(a,o){1&a&&(i.j41(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"div",2),i.DNE(4,Za,2,0,"mat-form-field",3),i.k0s(),i.j41(5,"div",4),i.DNE(6,Va,1,1,"app-content-loader",5)(7,Ya,2,1,"button",6),i.k0s()(),i.j41(8,"div",7),i.DNE(9,tn,12,3,"table",8)(10,an,1,1,"app-content-loader",9)(11,nn,1,1,"app-content-loader",5),i.k0s(),i.j41(12,"mat-paginator",10),i.bIt("page",function(){return o.onPageChange()}),i.k0s()()()),2&a&&(i.R7$(4),i.Y8G("ngIf",!o.isLoadingResults),i.R7$(2),i.Y8G("ngIf",o.isLoadingResults),i.R7$(),i.Y8G("ngIf",!o.isLoadingResults),i.R7$(2),i.Y8G("ngIf",!o.isLoadingResults),i.R7$(),i.Y8G("ngIf",o.isLoadingResults),i.R7$(),i.Y8G("ngIf",o.isLoadingResults),i.R7$(),i.xc7("visibility",o.isLoadingResults?"hidden":"visible"),i.Y8G("length",o.resultsLength)("pageSize",o.pageSize)("pageSizeOptions",i.lJ4(11,Ba)))},dependencies:[w.tP,w.Zl,w.tL,w.ji,w.cC,w.YV,w.iL,w.KS,w.$R,w.YZ,w.NB,M.MD,M.bT,M.vh,G.Hu,G.RN,G.m2,re.G,we.rl,ht.fg,Z.$z,se.iy,te.m_,_e.Cn,Z.Hl,le.mV,C.X4,C.Jc,T.Ph,j.iI,j.Wk,Lt.y,$a.G],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:#43cdf7!important}"]})}return e})(),rn=(()=>{class e{static#e=this.\u0275fac=function(a){return new(a||e)};static#t=this.\u0275cmp=i.VBU({type:e,selectors:[["app-document-upload"]],standalone:!0,features:[i.aNF],decls:1,vars:0,template:function(a,o){1&a&&i.nrm(0,"app-case-table-pagination")},dependencies:[on],encapsulation:2})}return e})();var O=m(9417),Ot=m(5951),hi=m(5024),mt=m(2765),mi=m(8617),pt=m(850),pi=m(6471),gt=m(7336),sn=m(771),ln=m(2798),cn=m(152),dn=m(1985);let fn=(()=>{class e{transform(t,a){if(!t||!a)return t;const o=a.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(o)||r.email.toLowerCase().includes(o)||r.role.toLowerCase().includes(o))}static#e=this.\u0275fac=function(a){return new(a||e)};static#t=this.\u0275pipe=i.EJ8({name:"userFilter",type:e,pure:!0,standalone:!0})}return e})();var bt=m(5478),Ue=m(356),Y=m(2155),ee=function(e){return e.NEW="NEW",e.REMOVED="REMOVED",e.CURRENT="CURRENT",e}(ee||{});let un=(()=>{class e{transform(t,a,o){return t&&0!=a.size?t.filter(r=>o?a.has(r.user_id+"")&&a.get(r.user_id+"")!==ee.REMOVED:!a.has(r.user_id+"")||a.get(r.user_id+"")===ee.REMOVED):o?[]:t}static#e=this.\u0275fac=function(a){return new(a||e)};static#t=this.\u0275pipe=i.EJ8({name:"userFilterByAccessStatus",type:e,pure:!1,standalone:!0})}return e})();class gi{static getRandomColor(){let t="#";for(let a=0;a<6;a++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}}var _n=m(6600),ce=m(3902);const hn=()=>[5,10,20],mn=()=>({standalone:!0});function pn(e,n){if(1&e&&(i.j41(0,"mat-option",8),i.EFF(1),i.k0s()),2&e){const t=n.$implicit;i.Y8G("value",t),i.R7$(),i.JRh(t.case_id)}}function gn(e,n){1&e&&(i.j41(0,"th",29),i.EFF(1," Select "),i.k0s())}function bn(e,n){if(1&e){const t=i.RV6();i.j41(0,"td",30)(1,"mat-radio-button",31),i.bIt("change",function(o){const r=i.eBV(t).$implicit,c=i.XpG(2);return i.Njj(c.onRowSelectionChange(o,r))}),i.k0s()()}if(2&e){const t=n.$implicit,a=i.XpG(2);i.R7$(),i.Y8G("checked",t.document_id===a.currentSelectedDocumentId)("value",t)("aria-label","Select "+t.document_name)}}function vn(e,n){if(1&e&&(i.j41(0,"td",32)(1,"div",33),i.nrm(2,"i-tabler",34),i.j41(3,"div",35)(4,"div"),i.EFF(5),i.k0s(),i.j41(6,"div",36),i.EFF(7),i.k0s()()()()),2&e){const t=n.$implicit;i.R7$(5),i.JRh(t.document_name),i.R7$(2),i.SpI("",t.file_size,"MB")}}function wn(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",38)(1,"a",19),i.nrm(2,"i-tabler",39),i.k0s(),i.j41(3,"a",40),i.bIt("click",function(){i.eBV(t);const o=i.XpG().$implicit,r=i.XpG(2);return i.Njj(r.deleteConfirmation(o.document_name))}),i.nrm(4,"i-tabler",41),i.k0s()()}}function Cn(e,n){if(1&e&&(i.j41(0,"td",32),i.DNE(1,wn,5,0,"div",37),i.k0s()),2&e){const t=n.$implicit,a=i.XpG(2);i.R7$(),i.Y8G("ngIf",a.currentSelectedDocumentId===t.document_id)}}function Sn(e,n){1&e&&i.nrm(0,"tr",42)}function xn(e,n){if(1&e){const t=i.RV6();i.j41(0,"mat-list-item",54)(1,"div",55)(2,"app-user-thumbnail",56),i.bIt("clickActionIcon",function(o){i.eBV(t);const r=i.XpG(3);return i.Njj(r.removeAccessWarn(o))}),i.k0s()()()}if(2&e){const t=n.$implicit;i.R7$(2),i.Y8G("item",t)("hasActionIcon",!0)("iconName","circle-minus")("iconColor","rgb(219, 10, 59)")}}function kn(e,n){if(1&e){const t=i.RV6();i.j41(0,"mat-list-item")(1,"div",55)(2,"app-user-thumbnail",56),i.bIt("clickActionIcon",function(o){i.eBV(t);const r=i.XpG(3);return i.Njj(r.giveAccessWarn(o))}),i.k0s()()()}if(2&e){const t=n.$implicit;i.R7$(2),i.Y8G("item",t)("hasActionIcon",!0)("iconName","circle-plus")("iconColor","rgb(10, 17, 219)")}}function yn(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",2)(1,"div",3)(2,"div",43)(3,"mat-form-field",44)(4,"input",45),i.mxI("ngModelChange",function(o){i.eBV(t);const r=i.XpG(2);return i.DH7(r.filterText,o)||(r.filterText=o),i.Njj(o)}),i.k0s()()()()(),i.j41(5,"div",2)(6,"div",3)(7,"mat-card",1)(8,"mat-card-header")(9,"mat-card-title",46),i.EFF(10),i.nI1(11,"userFilterByAccessStatus"),i.nI1(12,"userFilter"),i.k0s()(),i.j41(13,"mat-card-content")(14,"cdk-virtual-scroll-viewport",47)(15,"mat-list"),i.DNE(16,xn,3,4,"mat-list-item",48),i.nI1(17,"userFilterByAccessStatus"),i.nI1(18,"userFilter"),i.k0s()()()()(),i.j41(19,"div",3)(20,"mat-card",1)(21,"mat-card-header")(22,"mat-card-title",46),i.EFF(23),i.nI1(24,"userFilterByAccessStatus"),i.k0s()(),i.j41(25,"mat-card-content")(26,"cdk-virtual-scroll-viewport",47)(27,"mat-list"),i.DNE(28,kn,3,4,"mat-list-item",49),i.nI1(29,"userFilterByAccessStatus"),i.nI1(30,"userFilter"),i.k0s()()()()()(),i.j41(31,"mat-card-actions",50)(32,"button",51),i.bIt("click",function(){i.eBV(t);const o=i.XpG(2);return i.Njj(o.clickBack())}),i.j41(33,"mat-icon",52),i.EFF(34,"arrow_back"),i.k0s(),i.EFF(35," Back"),i.k0s(),i.j41(36,"button",53),i.EFF(37,"Save This"),i.k0s()()}if(2&e){const t=i.XpG(2);i.R7$(4),i.Y8G("ngModelOptions",i.lJ4(34,mn)),i.R50("ngModel",t.filterText),i.R7$(6),i.SpI("Allowed Members (",i.i5U(12,13,i.brH(11,9,t.userTableDataNotAllowed,t.updatedUserIdMap,!0),t.filterText).length,") "),i.R7$(6),i.Y8G("cdkVirtualForOf",i.i5U(18,20,i.brH(17,16,t.userTableDataNotAllowed,t.updatedUserIdMap,!0),t.filterText))("cdkVirtualForTrackBy",t.trackByUserId),i.R7$(7),i.SpI("Not Allowed Members (",i.brH(24,23,t.userTableDataNotAllowed,t.updatedUserIdMap,!1).length,")"),i.R7$(5),i.Y8G("cdkVirtualForOf",i.i5U(30,31,i.brH(29,27,t.userTableDataNotAllowed,t.updatedUserIdMap,!1),t.filterText))("cdkVirtualForTrackBy",t.trackByUserId),i.R7$(8),i.Y8G("disabled",!t.selectedCase)}}function Dn(e,n){if(1&e){const t=i.RV6();i.j41(0,"mat-card",9)(1,"mat-card-header")(2,"div",10)(3,"div",11)(4,"mat-label",12),i.EFF(5),i.k0s()()()(),i.j41(6,"mat-card-content")(7,"div",13)(8,"mat-form-field",14)(9,"input",15),i.bIt("keyup",function(o){i.eBV(t);const r=i.XpG();return i.Njj(r.applyFilter(o))}),i.k0s()()(),i.j41(10,"div",16)(11,"div",17)(12,"div",2)(13,"div",18),i.nrm(14,"span",19),i.k0s()()(),i.j41(15,"table",20),i.qex(16,21),i.DNE(17,gn,2,0,"th",22)(18,bn,2,3,"td",23),i.bVm(),i.qex(19,24),i.DNE(20,vn,8,2,"td",25),i.bVm(),i.qex(21,26),i.DNE(22,Cn,2,1,"td",25),i.bVm(),i.DNE(23,Sn,1,0,"tr",27),i.k0s()(),i.nrm(24,"mat-paginator",28),i.k0s()(),i.DNE(25,yn,38,35)}if(2&e){const t=i.XpG();i.R7$(5),i.SpI(" Documents (",t.tableData.length,") "),i.R7$(10),i.Y8G("dataSource",t.dataSource),i.R7$(8),i.Y8G("matRowDefColumns",t.displayedColumns),i.R7$(),i.Y8G("pageSizeOptions",i.lJ4(5,hn)),i.R7$(),i.vxM(t.currentSelectedDocumentId?25:-1)}}let En=(()=>{class e{constructor(t,a,o,r,c,l){this.location=t,this.router=a,this.alertService=o,this.authService=r,this.fullPageLoaderService=c,this.apiService=l,this.caseId="",this.isReadOnly=!0,this.isLoading=!0,this.myControl=new O.MJ(""),this.isAdmin=!0,this.tableData=[],this.selectData=[],this.userTableDataAllowed=[],this.userTableDataNotAllowed=[],this.filterText="",this.displayedColumns=["select","name","action"],this.selection=new hi.CB(!0,[]),this.dataSource=new w.I6,this.removeDialogTitle="Do you want to fremove?",this.messageBodayKey="",this.editRouterLink="",this.caseName="CASE_2012_SPE_15_1",this.caseDescription="Test description",this.isUpload=!1,this.updatedUserIdMap=new Map,this.userCurrentMap=new Map,this.currentSelectedDocumentId="",this.deleteConfirmDialog=(0,i.WQX)(Fe.bZ),this.documentUploadDialog=(0,i.WQX)(Fe.bZ),this.separatorKeysCodes=[gt.Fm,gt.KE],this.currentUserOrGroup=(0,i.geq)(""),this.usersOrGroups=(0,i.vPA)([]),this.allUsersOrGroups=(0,i.vPA)([{name:"Dilupa",id:"100WS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"1",name:"Dilupa Marasinghe",email:"test@gmail.com",role:A.N.ADMIN,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-1.jpg"}},{name:"CASE November 1 -23",id:"CASE_441_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"CASE Jan 3 -23",id:"CASE_201_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Randima",id:"102RANWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"3",name:"Randima Senanayake",email:"test@gmail.com",role:A.N.USER,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-3.jpg"}},{name:"CASE Mrch 3 -12",id:"CASE_011_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Kasun",id:"100KSWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"5",name:"K.S.C.Janith",email:"test@gmail.com",role:A.N.USER,status:A.z.DEACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-5.jpg"}}]),this.filteredUsersOrGroups=(0,i.EWP)(()=>{const _=this.currentUserOrGroup().toLowerCase(),s=new Set(this.usersOrGroups().map(d=>d.id));return this.allUsersOrGroups().filter(d=>!s.has(d.id)).filter(d=>d.name.toLowerCase().includes(_))}),this.announcer=(0,i.WQX)(mi.Ai),this.filteredFruits=(0,i.EWP)(()=>{const _=this.currentUserOrGroup().toLowerCase(),s=new Set(this.usersOrGroups().map(d=>d.id));return this.allUsersOrGroups().filter(d=>!s.has(d.id)).filter(d=>d.name.toLowerCase().includes(_))})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}trackByUserId(t,a){return a.user_id}ngOnInit(){this.loadAllUsers(),this.dataSource=new w.I6(this.tableData),this.filteredOptions=this.myControl.valueChanges.pipe((0,Ie.Z)(""),(0,cn.B)(300),(0,he.n)(t=>this.searchCases(t)))}searchCases(t){return!t||t.length<2?new dn.c(a=>{a.next([]),a.complete()}):this.apiService.getAllCases(t).pipe((0,_i.T)(a=>a.data))}loadAllCaseData(){if(!this.caseId)return this.isLoading=!0,void console.error("User Id is invalid");this.isReadOnly=!Ue.q.hasCommonEditPermission(this.authService),this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getOneCase(this.caseId).subscribe({next:t=>{console.log("Case fetching successful:",t),this.caseData=t.data,this.tableData=this.caseData.documents,this.loadDocumentTableData(),console.log("this.caseData"),console.log(this.caseData),console.log("this.caseData"),this.isLoading=!1},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Case loading failed:",t),t.error.errorCode===Y.C.NOT_FOUND?this.alertService.errorAlert("center","Case not found",t.error.message,3e3,!1,"",!1):t.error.errorCode===Y.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to load this case",t.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while loading case details","",3e3,!1,"",!1),this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case loading request completed.")}})}loadCaseData(){if(!this.caseId)return this.isLoading=!0,void console.error("User Id is invalid");this.isReadOnly=!Ue.q.hasCommonEditPermission(this.authService),this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getOneCase(this.caseId).subscribe({next:t=>{console.log("Case fetching successful:",t),this.caseData=t.data,this.tableData=this.caseData.documents,this.loadDocumentTableData(),console.log("this.caseData"),console.log(this.caseData),console.log("this.caseData"),this.isLoading=!1},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Case loading failed:",t),t.error.errorCode===Y.C.NOT_FOUND?this.alertService.errorAlert("center","Case not found",t.error.message,3e3,!1,"",!1):t.error.errorCode===Y.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to load this case",t.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while loading case details","",3e3,!1,"",!1),this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case loading request completed.")}})}loadAllUsers(){this.isReadOnly=!Ue.q.hasCommonEditPermission(this.authService),this.updatedUserIdMap=new Map,this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getAllUsers().subscribe({next:t=>{console.log("All users fetching successful - Document access:",t),this.userTableDataNotAllowed=t.data,this.userTableDataNotAllowed.map(a=>a.profile_image=gi.getRandomColor()),this.isLoading=!1},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("All user loading failed:",t),this.alertService.errorAlert("center","Error while loading user details","",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("All user details loading request completed.")}})}loadAllowedUsers(t){if(!t)return this.isLoading=!0,void console.error("Document Id is invalid");this.isReadOnly=!Ue.q.hasCommonEditPermission(this.authService),this.updatedUserIdMap=new Map,this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getAllowedUsersByDocId(t).subscribe({next:a=>{console.log("Document access details fetching successful:",a),this.userTableDataAllowed=a.data,this.userTableDataAllowed.forEach(o=>{this.updatedUserIdMap.set(o.user_id.toString(),ee.CURRENT),this.userCurrentMap.set(o.user_id,o)}),this.userTableDataAllowed.map(o=>o.profile_image=gi.getRandomColor()),console.log("documentId"),console.log(t),console.log("documentId"),this.isLoading=!1},error:a=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Document access details loading failed:",a),a.error.errorCode===Y.C.NOT_FOUND?this.alertService.errorAlert("center","Document ID not found",a.error.message,3e3,!1,"",!1):a.error.errorCode===Y.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to use document access details",a.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while document access details","",3e3,!1,"",!1),this.updatedUserIdMap=new Map,this.userCurrentMap=new Map,this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Document access details loading request completed.")}})}loadDocumentTableData(){this.dataSource=new w.I6(this.tableData),this.dataSource.paginator=this.paginator}onRowSelectionChange(t,a){console.log("Selected Row:",a),this.loadAllowedUsers(a.document_id),this.currentSelectedDocumentId=a.document_id}onOptionSelected(t){console.log(t.option.value),this.selectedCase=t.option.value,this.caseId=this.selectedCase.id,this.loadCaseData()}onToggleChange(){}backToCase(){this.isUpload=!1}clickBack(){this.location.back()}removeAccessWarn(t){console.log(t),this.alertService.confirmAlert("Are you sure?",`Removing access for this user: ${t.name}`,"warning",!0,"No",!0,"Yes, Proceed",!1,this.removeUserFromAllowedList.bind(this,t))}giveAccessWarn(t){console.log(t),this.alertService.confirmAlert("Are you sure?",`Enabling access for this user: ${t.name}`,"warning",!0,"No",!0,"Yes, Proceed",!1,this.addUserToAllowedMap.bind(this,t))}addUserToAllowedMap(t){const a=t.user_id.toString();this.updatedUserIdMap.has(a)&&this.updatedUserIdMap.get(a)===ee.CURRENT||(this.userCurrentMap.has(a)&&this.updatedUserIdMap.set(a,ee.CURRENT),this.updatedUserIdMap.has(a)||this.updatedUserIdMap.set(a,ee.NEW),this.updateUserDocumentAccess())}removeUserFromAllowedList(t){const a=t.user_id.toString();!this.updatedUserIdMap.has(a)||this.updatedUserIdMap.get(a)===ee.REMOVED||(this.updatedUserIdMap.has(a)&&(this.updatedUserIdMap.get(a)===ee.NEW?this.updatedUserIdMap.delete(a):this.updatedUserIdMap.set(a,ee.REMOVED)),this.updateUserDocumentAccess())}updateUserDocumentAccess(){this.fullPageLoaderService.setLoadingStatus(!0);const t=this.currentSelectedDocumentId,a=Array.from(this.updatedUserIdMap.entries()).filter(([o,r])=>r!==ee.REMOVED).map(([o])=>o.toString());this.apiService.updateDocumentAccess(a,t).subscribe({next:o=>{console.log("Document access modification successfull:",o),this.alertService.successToster("top-end","The document access settings have been updated successfully",5e3),this.isLoading=!1},error:o=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Document access modification  failed:",o),o.error.errorCode===Y.C.NOT_FOUND?this.alertService.errorAlert("center","Document not found",o.error.message,3e3,!1,"",!1):o.error.errorCode===Y.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to update the document access",o.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while updating document access","",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),this.loadAllCaseData(),console.log("Document access modification request completed.")}})}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.document_id}`:(this.isAllSelected()?"Deselect":"Select")+" all"}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}add(t){const a=(t.value||"").trim();if(a){const o=this.allUsersOrGroups().find(r=>r.name.toLowerCase()===a.toLowerCase());o&&this.usersOrGroups.update(r=>[...r,o])}this.currentUserOrGroup.set("")}remove(t){this.usersOrGroups.update(a=>{const o=a.findIndex(r=>r.id===t.id);return o<0?a:(a.splice(o,1),this.announcer.announce(`Removed ${t.name}`),[...a])}),this.allUsersOrGroups.update(a=>[...a,t]),this.updateFilteredData()}updateFilteredData(){this.filteredUsersOrGroups()}handleBackspace(){if(!this.currentUserOrGroup()){const t=this.usersOrGroups();t.length>0&&this.remove(t[t.length-1])}}selected(t){const a=this.allUsersOrGroups().find(o=>o.name===t.option.value.name);a&&(this.usersOrGroups.update(o=>[...o,a]),this.allUsersOrGroups.update(o=>o.filter(r=>r.id!==a.id))),this.currentUserOrGroup.set("")}openFileUploadDialog(){this.isUpload=!0}_filter(t){const a=t.toLowerCase();return this.selectData.filter(o=>o.case_id.toLowerCase().includes(a))}displayFn(t){return t&&t.case_id?t.case_id:""}deleteConfirmation(t){this.alertService.confirmAlert("Are you sure?",`Do you want to remove this document?  ID: ${t}?`,"warning",!0,"No",!0,"Yes, Proceed",!0,this.removeDocumentCascade.bind(this))}removeDocumentCascade(){this.isReadOnly=!Ue.q.hasCommonEditPermission(this.authService),this.currentSelectedDocumentId||this.isAdmin||!this.isReadOnly||this.isLoading?(this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.removeDocumentCasecase(this.currentSelectedDocumentId).subscribe({next:t=>{console.log("Document casecade deleation successful:",t),this.alertService.successAlert("center","Document removed successfully","",3e3),this.loadCaseData(),this.loadAllUsers()},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Document casecade deleation failed:",t),this.alertService.errorAlert("center","Failed to remove the Document",t.error.errorCode===Y.C.NOT_FOUND||t.error.errorCode===Y.C.ACCESSDENIED?t.error.message:"",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Document casecade deleation request completed.")}})):console.error("Cannot preceed to remove document")}static#e=this.\u0275fac=function(a){return new(a||e)(i.rXU(M.aZ),i.rXU(j.Ix),i.rXU(ft.I),i.rXU(ut.u),i.rXU(_t.J),i.rXU(q))};static#t=this.\u0275cmp=i.VBU({type:e,selectors:[["app-document-access-table-pagination"]],viewQuery:function(a,o){if(1&a&&i.GBs(se.iy,5),2&a){let r;i.mGM(r=i.lsd())&&(o.paginator=r.first)}},inputs:{currentUserOrGroup:[1,"currentUserOrGroup"]},outputs:{currentUserOrGroup:"currentUserOrGroupChange"},standalone:!0,features:[i.Jv_([q]),i.aNF],decls:15,vars:6,consts:[["auto","matAutocomplete"],[1,"b-1","shadow-none"],[1,"row"],[1,"col-md-6"],[1,"mat-subtitle-2","f-s-14","f-w-600"],["appearance","outline","color","primary",1,"w-100","m-b-0","m-t-2"],["matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value"],[1,"document-card","b-1","shadow-none"],[1,"row","justify-content-between"],[1,"col","p-t-4"],[1,"mat-subtitle-1","f-s-18","f-w-600"],[1,"col-left","col-md-4"],["appearance","outline","color","primary",1,"w-100","m-b-0"],["matInput","","placeholder","Filter",3,"keyup"],[1,"table-responsive"],[1,"justify-content-between"],[1,"col","align-items-start","d-flex","align-items-center","gap-2"],[1,"cursor-pointer"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","action"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[3,"change","checked","value","aria-label"],["mat-cell","",1,"mat-body-1"],[1,"d-flex","align-items-center"],["name","file-type-pdf",1,"icon-20",2,"color","rgb(190, 8, 8)","font-weight","bold"],[1,"d-flex","flex-column"],[2,"font-size","12px","color","gray","line-height","1"],["class","d-flex justify-content-center gap-4",4,"ngIf"],[1,"d-flex","justify-content-center","gap-4"],["name","edit",1,"icon-22"],[1,"cursor-pointer",3,"click"],["name","trash",1,"icon-22",2,"color","red"],["mat-row",""],[1,"col-left","m-b-6"],["appearance","outline","color","primary",1,"w-100","m-b-0",2,"margin-top","-0.06rem !important"],["matInput","","placeholder","Filter",3,"ngModelChange","ngModelOptions","ngModel"],[1,"m-t-8","m-b-0"],["itemSize","10",1,"virtual-scroll-container"],["class","mat-list-item-hover",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["align","end"],["type","button","mat-stroked-button","","color","warn",1,"m-r-10",3,"click"],[2,"font-size","1.4rem"],["mat-flat-button","","color","primary",1,"m-r-8",3,"disabled"],[1,"mat-list-item-hover"],[1,"row","justify-content-between","m-l-4","m-r-4"],[3,"clickActionIcon","item","hasActionIcon","iconName","iconColor"]],template:function(a,o){if(1&a){const r=i.RV6();i.j41(0,"mat-card",1)(1,"mat-card-content")(2,"form")(3,"div",2)(4,"div",3)(5,"mat-label",4),i.EFF(6,"Select Case ID"),i.k0s(),i.j41(7,"mat-form-field",5),i.nrm(8,"input",6),i.j41(9,"mat-autocomplete",7,0),i.bIt("optionSelected",function(l){return i.eBV(r),i.Njj(o.onOptionSelected(l))}),i.Z7z(11,pn,2,2,"mat-option",8,i.fX1),i.nI1(13,"async"),i.k0s()()()(),i.DNE(14,Dn,26,6),i.k0s()()()}if(2&a){const r=i.sdS(10);i.R7$(8),i.Y8G("formControl",o.myControl)("matAutocomplete",r),i.R7$(),i.Y8G("displayWith",o.displayFn),i.R7$(2),i.Dyx(i.bMT(13,4,o.filteredOptions)),i.R7$(3),i.vxM(o.selectedCase?14:-1)}},dependencies:[w.tP,w.Zl,w.tL,w.cC,w.YV,w.iL,w.KS,w.$R,w.NB,M.MD,M.bT,M.Jj,O.YN,O.qT,O.me,O.BC,O.cb,O.vS,O.cV,G.Hu,G.RN,G.YY,G.m2,G.MM,G.dh,re.G,pt.$3,_n.wT,pt.pN,we.rl,we.nJ,ht.fg,Ot._g,ce.jt,ce.YE,Z.$z,te.An,se.iy,te.m_,_e.Cn,Z.Hl,le.mV,C.X4,C.Jc,T.Ph,j.iI,Ot.Wk,mt.g7,pi.YN,pt.jL,sn.D,ht.fS,ln.Ve,O.X1,O.l_,fn,un,bt.E9,bt.yg,bt.E$,bt.d6,Lt.y],styles:[".mat-column-select[_ngcontent-%COMP%]{padding-right:0!important}.document-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{display:inline-block}.virtual-scroll-container[_ngcontent-%COMP%]{height:300px;width:100%;overflow:auto}mat-list-item[_ngcontent-%COMP%]:hover{background:#e5f5ff!important}  mat-list-item:hover .profile-btn-dd{background-color:#e5f5ff!important}mat-list-item[_ngcontent-%COMP%]     i-tabler:hover{height:25px!important;width:25px!important}mat-list-item[_ngcontent-%COMP%]   i-tabler[_ngcontent-%COMP%]{cursor:poiner!important}"]})}return e})(),Tn=(()=>{class e{static#e=this.\u0275fac=function(a){return new(a||e)};static#t=this.\u0275cmp=i.VBU({type:e,selectors:[["app-document-access"]],standalone:!0,features:[i.aNF],decls:1,vars:0,template:function(a,o){1&a&&i.nrm(0,"app-document-access-table-pagination")},dependencies:[En],encapsulation:2})}return e})();var $e=m(467),An=m(7575),Nt=m(9183),Rn=m(4412);let In=(()=>{class e{constructor(){this.uploadProgressSubject=new Rn.t(0),this.uploadProgress$=this.uploadProgressSubject.asObservable()}uploadFiles(t,a,o){const r=new FormData;return a.forEach(c=>{r.append("files",c,c.name)}),o.fileBatchUpload(t,r).pipe((0,dt.W)(c=>{throw console.error("Error during file upload:",c),c}))}static#e=this.\u0275fac=function(a){return new(a||e)};static#t=this.\u0275prov=i.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Fn=m(1997);function Un(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",3)(1,"div",4)(2,"div",7),i.bIt("drop",function(o){i.eBV(t);const r=i.XpG();return i.Njj(r.onDrop(o))})("dragover",function(o){return i.eBV(t),i.Njj(o.preventDefault())})("click",function(){i.eBV(t);const o=i.sdS(8);return i.Njj(o.click())}),i.j41(3,"mat-icon",8),i.EFF(4,"cloud_upload"),i.k0s(),i.j41(5,"span"),i.EFF(6,"Drag and drop here or click to upload"),i.k0s(),i.j41(7,"input",9,0),i.bIt("change",function(o){i.eBV(t);const r=i.XpG();return i.Njj(r.onFileInputChange(o))}),i.k0s()()()()}}function Ln(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",3)(1,"div",4)(2,"div",10),i.nrm(3,"mat-spinner"),i.j41(4,"span"),i.EFF(5,"Uploading in progress..."),i.k0s(),i.j41(6,"input",9,0),i.bIt("change",function(o){i.eBV(t);const r=i.XpG();return i.Njj(r.onFileInputChange(o))}),i.k0s()()()()}}function On(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",24),i.bIt("click",function(){i.eBV(t);const o=i.XpG().index,r=i.XpG(2);return i.Njj(r.removeFile(o))}),i.j41(1,"mat-icon",25),i.EFF(2,"clear"),i.k0s()()}}function Nn(e,n){1&e&&(i.j41(0,"div",26)(1,"mat-icon"),i.nrm(2,"mat-spinner",27),i.k0s()())}function Pn(e,n){1&e&&(i.j41(0,"div",28)(1,"mat-icon",29),i.EFF(2,"cloud_done"),i.k0s()())}function jn(e,n){if(1&e&&(i.j41(0,"mat-list-item")(1,"div",3)(2,"div",16)(3,"mat-icon",17),i.EFF(4,"description"),i.k0s()(),i.j41(5,"div",18)(6,"div",19),i.EFF(7),i.k0s(),i.j41(8,"div",20),i.EFF(9),i.nI1(10,"date"),i.k0s()(),i.DNE(11,On,3,0,"div",21)(12,Nn,3,0,"div",22)(13,Pn,3,0,"div",23),i.k0s()()),2&e){const t=n.$implicit,a=i.XpG(2);i.R7$(7),i.JRh(t.name),i.R7$(2),i.JRh(i.bMT(10,5,t.lastModified)),i.R7$(2),i.Y8G("ngIf",!a.progressStarted),i.R7$(),i.Y8G("ngIf",a.progressStarted),i.R7$(),i.Y8G("ngIf",!1)}}function zn(e,n){if(1&e&&(i.j41(0,"div",11)(1,"div",12),i.EFF(2,"CASE_2024_NOV-21 "),i.j41(3,"span",13),i.EFF(4),i.k0s()(),i.nrm(5,"mat-divider"),i.j41(6,"mat-list",14),i.DNE(7,jn,14,7,"mat-list-item",15),i.k0s()()),2&e){const t=i.XpG();i.R7$(4),i.SpI("(",t.files.length," Selected)"),i.R7$(2),i.Y8G("disabled",t.progressStarted),i.R7$(),i.Y8G("ngForOf",t.files)}}function Mn(e,n){if(1&e){const t=i.RV6();i.j41(0,"button",32),i.bIt("click",function(){i.eBV(t);const o=i.XpG(2);return i.Njj(o.startProgressUpload())}),i.EFF(1,"Start Upload"),i.k0s()}}function Gn(e,n){1&e&&(i.j41(0,"button",33),i.EFF(1,"Disabled"),i.k0s())}function $n(e,n){if(1&e&&(i.qex(0),i.DNE(1,Mn,2,0,"button",30)(2,Gn,2,0,"button",31),i.bVm()),2&e){const t=i.XpG();i.R7$(),i.Y8G("ngIf",!t.progressStarted),i.R7$(),i.Y8G("ngIf",t.progressStarted)}}let Bn=(()=>{class e{constructor(t,a,o,r,c){this.router=t,this.fileUploadService=a,this.componentApiService=o,this.alertService=r,this.fullPageLoaderService=c,this.caseId="",this.backToCaseDetails=new i.bkB,this.progressStarted=!1,this.files=[],this.progress=0}ngOnInit(){}onDrop(t){t.preventDefault();const a=t.dataTransfer?.files;a&&this.addFiles(a)}onFileInputChange(t){const a=t.target;a&&a.files&&this.addFiles(a.files)}addFiles(t){for(let a=0;a<t.length;a++)this.files.push(t[a])}startUpload(){}uploadFiles(){this.files.length>0?(this.fullPageLoaderService.setLoadingStatus(!0),this.fileUploadService.uploadFiles(this.caseId,Array.from(this.files),this.componentApiService).subscribe({next:t=>{if(t.type===z.hv.Response){const a={id:this.caseId};this.fullPageLoaderService.setLoadingStatus(!1),console.log("Upload successful:",t.body?.message),this.alertService.successAlert("center","File upload success","",3e3,!0,!0,!0),this.router.navigate(["/document-managemnt/single-case"],{queryParams:a}),this.progressStarted=!1,this.backToCaseDetails.emit(!0)}},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Upload failed:",t),this.alertService.errorAlert("center","Faill to upload files","",3e3,!1,"",!1),this.progressStarted=!1,this.backToCaseDetails.emit(!0)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),this.progressStarted=!1}})):console.error("No files selected")}removeFile(t){this.files.splice(t,1)}startProgressUpload(){this.progressStarted=!0,this.uploadFiles()}getProgress(t){}static#e=this.\u0275fac=function(a){return new(a||e)(i.rXU(j.Ix),i.rXU(In),i.rXU(q),i.rXU(ft.I),i.rXU(_t.J))};static#t=this.\u0275cmp=i.VBU({type:e,selectors:[["app-file-upload-ui"]],inputs:{caseId:"caseId"},outputs:{backToCaseDetails:"backToCaseDetails"},standalone:!0,features:[i.aNF],decls:9,vars:4,consts:[["fileInput",""],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col"],["class","files-list-section mb-4 w-100",4,"ngIf"],[4,"ngIf"],[1,"upload-area",3,"drop","dragover","click"],[1,"upload-icon","mb-2",2,"font-size","48px"],["type","file","multiple","","hidden","",3,"change"],[1,"upload-area","upload-area-desabled"],[1,"files-list-section","mb-4","w-100"],["mat-subheader",""],[2,"font-size","small"],[1,"file-list",3,"disabled"],[4,"ngFor","ngForOf"],[1,"col-md-1","col-sm-1"],["matListItemIcon",""],[1,"col-md-9"],["matListItemTitle",""],["matListItemLine",""],["class","col-md-2",3,"click",4,"ngIf"],["style","padding-top: 15px;","class","col-md-2",4,"ngIf"],["class","col-md-2",4,"ngIf"],[1,"col-md-2",3,"click"],["matListItemIcon","",1,"cursor-pointer"],[1,"col-md-2",2,"padding-top","15px"],["color","accent","diameter","20"],[1,"col-md-2"],["matListItemIcon","",2,"color","rgb(4, 207, 7)"],["mat-raised-button","","color","primary","class","mt-3 w-100",3,"click",4,"ngIf"],["mat-stroked-button","","disabled","",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-3","w-100",3,"click"],["mat-stroked-button","","disabled",""]],template:function(a,o){1&a&&(i.j41(0,"div",1),i.DNE(1,Un,9,0,"div",2)(2,Ln,8,0,"div",2),i.j41(3,"div",3)(4,"div",4),i.DNE(5,zn,8,3,"div",5),i.k0s()(),i.j41(6,"div",3)(7,"div",4),i.DNE(8,$n,3,2,"ng-container",6),i.k0s()()()),2&a&&(i.R7$(),i.Y8G("ngIf",!o.progressStarted),i.R7$(),i.Y8G("ngIf",o.progressStarted),i.R7$(3),i.Y8G("ngIf",o.files.length>0),i.R7$(3),i.Y8G("ngIf",o.files.length>0))},dependencies:[M.MD,M.Sq,M.bT,M.vh,te.m_,te.An,Fe.hM,An.PO,mt.g7,ce.Fg,ce.jt,ce.YE,ce.ZV,ce.EI,Fn.q,ce.C_,ce.yE,C.X4,Nt.LG],styles:[".container[_ngcontent-%COMP%]{width:50vw;max-width:100%;padding:0;margin:0;box-sizing:border-box}h1.mat-dialog-title[_ngcontent-%COMP%]{font-size:24px;color:#2196f3;text-align:center;margin-bottom:20px}.description[_ngcontent-%COMP%]{font-size:16px;text-align:center;margin-bottom:30px;color:#424242}.upload-area-desabled[_ngcontent-%COMP%]{border:2px dashed #4e5052!important;background-color:#ebf2f7!important}.upload-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:50px;background-color:#f1f8ff;border-radius:8px;border:2px dashed #2196f3;cursor:pointer;transition:border-color .3s ease;text-align:center;min-height:300px;width:100%;box-sizing:border-box}.upload-area[_ngcontent-%COMP%]:hover{border-color:#1976d2}.upload-area[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:60px;color:#1976d2;margin-bottom:10px}.upload-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#424242}.row[_ngcontent-%COMP%], .col[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0;padding:0;box-sizing:border-box}.file-list[_ngcontent-%COMP%]{flex-direction:column;margin-bottom:20px;overflow-y:auto;max-height:300px;width:100%}.file-list[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%]{font-size:small}.file-list[_ngcontent-%COMP%]   .mdc-list-item__secondary-text[_ngcontent-%COMP%]{font-size:smaller}.files-list-section[_ngcontent-%COMP%]{display:ruby}button[mat-raised-button][_ngcontent-%COMP%]{padding:12px 24px;font-size:16px;background-color:#2196f3;color:#fff;border-radius:8px;margin-top:20px;width:100%;transition:background-color .3s ease;border:none}button[mat-raised-button][_ngcontent-%COMP%]:hover{background-color:#1976d2}button[mat-stroked-button][_ngcontent-%COMP%]{padding:12px 24px;font-size:16px;background-color:#2092ec54!important;border-radius:8px;margin-top:20px;width:100%;transition:background-color .3s ease;border:none}@media (max-width: 600px){mat-dialog-content[_ngcontent-%COMP%]{padding:10px;min-width:100%}.upload-area[_ngcontent-%COMP%]{padding:20px;min-height:250px}.upload-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;color:#424242}.file-list[_ngcontent-%COMP%]{max-height:250px}.file-list-item[_ngcontent-%COMP%]{font-size:12px;padding:8px}.file-card[_ngcontent-%COMP%]{padding:12px;flex-direction:column;align-items:flex-start}.file-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.file-list-item[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-size:16px}button[mat-raised-button][_ngcontent-%COMP%]{padding:10px 20px;font-size:14px}}@media (min-width: 601px){.upload-area[_ngcontent-%COMP%]{padding:40px;min-height:280px}}@media (min-width: 769px){mat-dialog-content[_ngcontent-%COMP%]{padding:20px;min-width:500px;min-height:360px}.upload-area[_ngcontent-%COMP%]{padding:40px;min-height:180px}.file-card[_ngcontent-%COMP%]{padding:15px}button[mat-raised-button][_ngcontent-%COMP%]{padding:12px 24px;font-size:16px}.upload-icon[_ngcontent-%COMP%]{font-size:100px!important;display:contents!important}}"]})}return e})();var Ce=m(9454),Zn=m(9350),Vn=m(7707);function Le(e){let n=e.length;for(;--n>=0;)e[n]=0}const Gt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),vt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),eo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),yi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),de=new Array(576);Le(de);const Ve=new Array(60);Le(Ve);const Ye=new Array(512);Le(Ye);const Xe=new Array(256);Le(Xe);const $t=new Array(29);Le($t);const wt=new Array(30);function Bt(e,n,t,a,o){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=a,this.max_length=o,this.has_stree=e&&e.length}let Di,Ei,Ti;function Zt(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}Le(wt);const Ai=e=>e<256?Ye[e]:Ye[256+(e>>>7)],He=(e,n)=>{e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255},H=(e,n,t)=>{e.bi_valid>16-t?(e.bi_buf|=n<<e.bi_valid&65535,He(e,e.bi_buf),e.bi_buf=n>>16-e.bi_valid,e.bi_valid+=t-16):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},ie=(e,n,t)=>{H(e,t[2*n],t[2*n+1])},Ri=(e,n)=>{let t=0;do{t|=1&e,e>>>=1,t<<=1}while(--n>0);return t>>>1},Ii=(e,n,t)=>{const a=new Array(16);let r,c,o=0;for(r=1;r<=15;r++)o=o+t[r-1]<<1,a[r]=o;for(c=0;c<=n;c++){let l=e[2*c+1];0!==l&&(e[2*c]=Ri(a[l]++,l))}},Fi=e=>{let n;for(n=0;n<286;n++)e.dyn_ltree[2*n]=0;for(n=0;n<30;n++)e.dyn_dtree[2*n]=0;for(n=0;n<19;n++)e.bl_tree[2*n]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ui=e=>{e.bi_valid>8?He(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Li=(e,n,t,a)=>{const o=2*n,r=2*t;return e[o]<e[r]||e[o]===e[r]&&a[n]<=a[t]},Vt=(e,n,t)=>{const a=e.heap[t];let o=t<<1;for(;o<=e.heap_len&&(o<e.heap_len&&Li(n,e.heap[o+1],e.heap[o],e.depth)&&o++,!Li(n,a,e.heap[o],e.depth));)e.heap[t]=e.heap[o],t=o,o<<=1;e.heap[t]=a},Oi=(e,n,t)=>{let a,o,c,l,r=0;if(0!==e.sym_next)do{a=255&e.pending_buf[e.sym_buf+r++],a+=(255&e.pending_buf[e.sym_buf+r++])<<8,o=e.pending_buf[e.sym_buf+r++],0===a?ie(e,o,n):(c=Xe[o],ie(e,c+256+1,n),l=Gt[c],0!==l&&(o-=$t[c],H(e,o,l)),a--,c=Ai(a),ie(e,c,t),l=vt[c],0!==l&&(a-=wt[c],H(e,a,l)))}while(r<e.sym_next);ie(e,256,n)},Yt=(e,n)=>{const t=n.dyn_tree,a=n.stat_desc.static_tree,o=n.stat_desc.has_stree,r=n.stat_desc.elems;let c,l,s,_=-1;for(e.heap_len=0,e.heap_max=573,c=0;c<r;c++)0!==t[2*c]?(e.heap[++e.heap_len]=_=c,e.depth[c]=0):t[2*c+1]=0;for(;e.heap_len<2;)s=e.heap[++e.heap_len]=_<2?++_:0,t[2*s]=1,e.depth[s]=0,e.opt_len--,o&&(e.static_len-=a[2*s+1]);for(n.max_code=_,c=e.heap_len>>1;c>=1;c--)Vt(e,t,c);s=r;do{c=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Vt(e,t,1),l=e.heap[1],e.heap[--e.heap_max]=c,e.heap[--e.heap_max]=l,t[2*s]=t[2*c]+t[2*l],e.depth[s]=(e.depth[c]>=e.depth[l]?e.depth[c]:e.depth[l])+1,t[2*c+1]=t[2*l+1]=s,e.heap[1]=s++,Vt(e,t,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,n)=>{const t=n.dyn_tree,a=n.max_code,o=n.stat_desc.static_tree,r=n.stat_desc.has_stree,c=n.stat_desc.extra_bits,l=n.stat_desc.extra_base,_=n.stat_desc.max_length;let s,d,S,u,f,p,P=0;for(u=0;u<=15;u++)e.bl_count[u]=0;for(t[2*e.heap[e.heap_max]+1]=0,s=e.heap_max+1;s<573;s++)d=e.heap[s],u=t[2*t[2*d+1]+1]+1,u>_&&(u=_,P++),t[2*d+1]=u,!(d>a)&&(e.bl_count[u]++,f=0,d>=l&&(f=c[d-l]),p=t[2*d],e.opt_len+=p*(u+f),r&&(e.static_len+=p*(o[2*d+1]+f)));if(0!==P){do{for(u=_-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[_]--,P-=2}while(P>0);for(u=_;0!==u;u--)for(d=e.bl_count[u];0!==d;)S=e.heap[--s],!(S>a)&&(t[2*S+1]!==u&&(e.opt_len+=(u-t[2*S+1])*t[2*S],t[2*S+1]=u),d--)}})(e,n),Ii(t,_,e.bl_count)},Ni=(e,n,t)=>{let a,r,o=-1,c=n[1],l=0,_=7,s=4;for(0===c&&(_=138,s=3),n[2*(t+1)+1]=65535,a=0;a<=t;a++)r=c,c=n[2*(a+1)+1],!(++l<_&&r===c)&&(l<s?e.bl_tree[2*r]+=l:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):l<=10?e.bl_tree[34]++:e.bl_tree[36]++,l=0,o=r,0===c?(_=138,s=3):r===c?(_=6,s=3):(_=7,s=4))},Pi=(e,n,t)=>{let a,r,o=-1,c=n[1],l=0,_=7,s=4;for(0===c&&(_=138,s=3),a=0;a<=t;a++)if(r=c,c=n[2*(a+1)+1],!(++l<_&&r===c)){if(l<s)do{ie(e,r,e.bl_tree)}while(0!=--l);else 0!==r?(r!==o&&(ie(e,r,e.bl_tree),l--),ie(e,16,e.bl_tree),H(e,l-3,2)):l<=10?(ie(e,17,e.bl_tree),H(e,l-3,3)):(ie(e,18,e.bl_tree),H(e,l-11,7));l=0,o=r,0===c?(_=138,s=3):r===c?(_=6,s=3):(_=7,s=4)}};let ji=!1;const zi=(e,n,t,a)=>{H(e,0+(a?1:0),3),Ui(e),He(e,t),He(e,~t),t&&e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t};var bo={_tr_init:e=>{ji||((()=>{let e,n,t,a,o;const r=new Array(16);for(t=0,a=0;a<28;a++)for($t[a]=t,e=0;e<1<<Gt[a];e++)Xe[t++]=a;for(Xe[t-1]=a,o=0,a=0;a<16;a++)for(wt[a]=o,e=0;e<1<<vt[a];e++)Ye[o++]=a;for(o>>=7;a<30;a++)for(wt[a]=o<<7,e=0;e<1<<vt[a]-7;e++)Ye[256+o++]=a;for(n=0;n<=15;n++)r[n]=0;for(e=0;e<=143;)de[2*e+1]=8,e++,r[8]++;for(;e<=255;)de[2*e+1]=9,e++,r[9]++;for(;e<=279;)de[2*e+1]=7,e++,r[7]++;for(;e<=287;)de[2*e+1]=8,e++,r[8]++;for(Ii(de,287,r),e=0;e<30;e++)Ve[2*e+1]=5,Ve[2*e]=Ri(e,5);Di=new Bt(de,Gt,257,286,15),Ei=new Bt(Ve,vt,0,30,15),Ti=new Bt(new Array(0),eo,0,19,7)})(),ji=!0),e.l_desc=new Zt(e.dyn_ltree,Di),e.d_desc=new Zt(e.dyn_dtree,Ei),e.bl_desc=new Zt(e.bl_tree,Ti),e.bi_buf=0,e.bi_valid=0,Fi(e)},_tr_stored_block:zi,_tr_flush_block:(e,n,t,a)=>{let o,r,c=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Yt(e,e.l_desc),Yt(e,e.d_desc),c=(e=>{let n;for(Ni(e,e.dyn_ltree,e.l_desc.max_code),Ni(e,e.dyn_dtree,e.d_desc.max_code),Yt(e,e.bl_desc),n=18;n>=3&&0===e.bl_tree[2*yi[n]+1];n--);return e.opt_len+=3*(n+1)+5+5+4,n})(e),o=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,r<=o&&(o=r)):o=r=t+5,t+4<=o&&-1!==n?zi(e,n,t,a):4===e.strategy||r===o?(H(e,2+(a?1:0),3),Oi(e,de,Ve)):(H(e,4+(a?1:0),3),((e,n,t,a)=>{let o;for(H(e,n-257,5),H(e,t-1,5),H(e,a-4,4),o=0;o<a;o++)H(e,e.bl_tree[2*yi[o]+1],3);Pi(e,e.dyn_ltree,n-1),Pi(e,e.dyn_dtree,t-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),Oi(e,e.dyn_ltree,e.dyn_dtree)),Fi(e),a&&Ui(e)},_tr_tally:(e,n,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,0===n?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(Xe[t]+256+1)]++,e.dyn_dtree[2*Ai(n)]++),e.sym_next===e.sym_end),_tr_align:e=>{H(e,2,3),ie(e,256,de),(e=>{16===e.bi_valid?(He(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Ke=(e,n,t,a)=>{let o=65535&e,r=e>>>16&65535,c=0;for(;0!==t;){c=t>2e3?2e3:t,t-=c;do{o=o+n[a++]|0,r=r+o|0}while(--c);o%=65521,r%=65521}return o|r<<16};const wo=new Uint32Array((()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n})());var $=(e,n,t,a)=>{const o=wo,r=a+t;e^=-1;for(let c=a;c<r;c++)e=e>>>8^o[255&(e^n[c])];return~e},xe={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ke={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Co,_tr_stored_block:Xt,_tr_flush_block:So,_tr_tally:me,_tr_align:xo}=bo,{Z_NO_FLUSH:pe,Z_PARTIAL_FLUSH:ko,Z_FULL_FLUSH:yo,Z_FINISH:J,Z_BLOCK:Mi,Z_OK:V,Z_STREAM_END:Gi,Z_STREAM_ERROR:ae,Z_DATA_ERROR:Do,Z_BUF_ERROR:Ht,Z_DEFAULT_COMPRESSION:Eo,Z_FILTERED:To,Z_HUFFMAN_ONLY:Ct,Z_RLE:Ao,Z_FIXED:Ro,Z_DEFAULT_STRATEGY:Io,Z_UNKNOWN:Fo,Z_DEFLATED:St}=ke,ne=262,Ee=(e,n)=>(e.msg=xe[n],n),$i=e=>2*e-(e>4?9:0),be=e=>{let n=e.length;for(;--n>=0;)e[n]=0},$o=e=>{let n,t,a,o=e.w_size;n=e.hash_size,a=n;do{t=e.head[--a],e.head[a]=t>=o?t-o:0}while(--n);n=o,a=n;do{t=e.prev[--a],e.prev[a]=t>=o?t-o:0}while(--n)};let ve=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask;const K=e=>{const n=e.state;let t=n.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,0===n.pending&&(n.pending_out=0))},W=(e,n)=>{So(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,K(e.strm)},R=(e,n)=>{e.pending_buf[e.pending++]=n},Je=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n},ti=(e,n,t,a)=>{let o=e.avail_in;return o>a&&(o=a),0===o?0:(e.avail_in-=o,n.set(e.input.subarray(e.next_in,e.next_in+o),t),1===e.state.wrap?e.adler=Ke(e.adler,n,o,t):2===e.state.wrap&&(e.adler=$(e.adler,n,o,t)),e.next_in+=o,e.total_in+=o,o)},Bi=(e,n)=>{let o,r,t=e.max_chain_length,a=e.strstart,c=e.prev_length,l=e.nice_match;const _=e.strstart>e.w_size-ne?e.strstart-(e.w_size-ne):0,s=e.window,d=e.w_mask,S=e.prev,u=e.strstart+258;let f=s[a+c-1],p=s[a+c];e.prev_length>=e.good_match&&(t>>=2),l>e.lookahead&&(l=e.lookahead);do{if(o=n,s[o+c]===p&&s[o+c-1]===f&&s[o]===s[a]&&s[++o]===s[a+1]){a+=2,o++;do{}while(s[++a]===s[++o]&&s[++a]===s[++o]&&s[++a]===s[++o]&&s[++a]===s[++o]&&s[++a]===s[++o]&&s[++a]===s[++o]&&s[++a]===s[++o]&&s[++a]===s[++o]&&a<u);if(r=258-(u-a),a=u-258,r>c){if(e.match_start=n,c=r,r>=l)break;f=s[a+c-1],p=s[a+c]}}}while((n=S[n&d])>_&&0!=--t);return c<=e.lookahead?c:e.lookahead},ze=e=>{const n=e.w_size;let t,a,o;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-ne)&&(e.window.set(e.window.subarray(n,n+n-a),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),$o(e),a+=n),0===e.strm.avail_in)break;if(t=ti(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=t,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=ve(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=ve(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ne&&0!==e.strm.avail_in)},Zi=(e,n)=>{let a,o,r,t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,c=0,l=e.strm.avail_in;do{if(a=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r||(r=e.strm.avail_out-r,o=e.strstart-e.block_start,a>o+e.strm.avail_in&&(a=o+e.strm.avail_in),a>r&&(a=r),a<t&&(0===a&&n!==J||n===pe||a!==o+e.strm.avail_in)))break;c=n===J&&a===o+e.strm.avail_in?1:0,Xt(e,0,0,c),e.pending_buf[e.pending-4]=a,e.pending_buf[e.pending-3]=a>>8,e.pending_buf[e.pending-2]=~a,e.pending_buf[e.pending-1]=~a>>8,K(e.strm),o&&(o>a&&(o=a),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+o),e.strm.next_out),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o,e.block_start+=o,a-=o),a&&(ti(e.strm,e.strm.output,e.strm.next_out,a),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a)}while(0===c);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),c?4:n!==pe&&n!==J&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(ti(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,t=r>e.w_size?e.w_size:r,o=e.strstart-e.block_start,(o>=t||(o||n===J)&&n!==pe&&0===e.strm.avail_in&&o<=r)&&(a=o>r?r:o,c=n===J&&0===e.strm.avail_in&&a===o?1:0,Xt(e,e.block_start,a,c),e.block_start+=a,K(e.strm)),c?3:1)},ii=(e,n)=>{let t,a;for(;;){if(e.lookahead<ne){if(ze(e),e.lookahead<ne&&n===pe)return 1;if(0===e.lookahead)break}if(t=0,e.lookahead>=3&&(e.ins_h=ve(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==t&&e.strstart-t<=e.w_size-ne&&(e.match_length=Bi(e,t)),e.match_length>=3)if(a=me(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ve(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ve(e,e.ins_h,e.window[e.strstart+1]);else a=me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(W(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,n===J?(W(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(W(e,!1),0===e.strm.avail_out)?1:2},Me=(e,n)=>{let t,a,o;for(;;){if(e.lookahead<ne){if(ze(e),e.lookahead<ne&&n===pe)return 1;if(0===e.lookahead)break}if(t=0,e.lookahead>=3&&(e.ins_h=ve(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==t&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-ne&&(e.match_length=Bi(e,t),e.match_length<=5&&(e.strategy===To||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,a=me(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=ve(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,a&&(W(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(a=me(e,0,e.window[e.strstart-1]),a&&W(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=me(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,n===J?(W(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(W(e,!1),0===e.strm.avail_out)?1:2};function oe(e,n,t,a,o){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=a,this.func=o}const Qe=[new oe(0,0,0,0,Zi),new oe(4,4,8,4,ii),new oe(4,5,16,8,ii),new oe(4,6,32,32,ii),new oe(4,4,16,16,Me),new oe(8,16,32,32,Me),new oe(8,16,128,128,Me),new oe(8,32,128,256,Me),new oe(32,128,258,1024,Me),new oe(32,258,258,4096,Me)];function Yo(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=St,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),be(this.dyn_ltree),be(this.dyn_dtree),be(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),be(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),be(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const qe=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||42!==n.status&&57!==n.status&&69!==n.status&&73!==n.status&&91!==n.status&&103!==n.status&&113!==n.status&&666!==n.status?1:0},Vi=e=>{if(qe(e))return Ee(e,ae);e.total_in=e.total_out=0,e.data_type=Fo;const n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=2===n.wrap?57:n.wrap?42:113,e.adler=2===n.wrap?0:1,n.last_flush=-2,Co(n),V},Yi=e=>{const n=Vi(e);return n===V&&(e=>{e.window_size=2*e.w_size,be(e.head),e.max_lazy_match=Qe[e.level].max_lazy,e.good_match=Qe[e.level].good_length,e.nice_match=Qe[e.level].nice_length,e.max_chain_length=Qe[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),n},Xi=(e,n,t,a,o,r)=>{if(!e)return ae;let c=1;if(n===Eo&&(n=6),a<0?(c=0,a=-a):a>15&&(c=2,a-=16),o<1||o>9||t!==St||a<8||a>15||n<0||n>9||r<0||r>Ro||8===a&&1!==c)return Ee(e,ae);8===a&&(a=9);const l=new Yo;return e.state=l,l.strm=e,l.status=42,l.wrap=c,l.gzhead=null,l.w_bits=a,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new Uint8Array(2*l.w_size),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=3*(l.lit_bufsize-1),l.level=n,l.strategy=r,l.method=t,Yi(e)};var et={deflateInit:(e,n)=>Xi(e,n,St,15,8,Io),deflateInit2:Xi,deflateReset:Yi,deflateResetKeep:Vi,deflateSetHeader:(e,n)=>qe(e)||2!==e.state.wrap?ae:(e.state.gzhead=n,V),deflate:(e,n)=>{if(qe(e)||n>Mi||n<0)return e?Ee(e,ae):ae;const t=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===t.status&&n!==J)return Ee(e,0===e.avail_out?Ht:ae);const a=t.last_flush;if(t.last_flush=n,0!==t.pending){if(K(e),0===e.avail_out)return t.last_flush=-1,V}else if(0===e.avail_in&&$i(n)<=$i(a)&&n!==J)return Ee(e,Ht);if(666===t.status&&0!==e.avail_in)return Ee(e,Ht);if(42===t.status&&0===t.wrap&&(t.status=113),42===t.status){let o=St+(t.w_bits-8<<4)<<8,r=-1;if(r=t.strategy>=Ct||t.level<2?0:t.level<6?1:6===t.level?2:3,o|=r<<6,0!==t.strstart&&(o|=32),o+=31-o%31,Je(t,o),0!==t.strstart&&(Je(t,e.adler>>>16),Je(t,65535&e.adler)),e.adler=1,t.status=113,K(e),0!==t.pending)return t.last_flush=-1,V}if(57===t.status)if(e.adler=0,R(t,31),R(t,139),R(t,8),t.gzhead)R(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),R(t,255&t.gzhead.time),R(t,t.gzhead.time>>8&255),R(t,t.gzhead.time>>16&255),R(t,t.gzhead.time>>24&255),R(t,9===t.level?2:t.strategy>=Ct||t.level<2?4:0),R(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(R(t,255&t.gzhead.extra.length),R(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=$(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69;else if(R(t,0),R(t,0),R(t,0),R(t,0),R(t,0),R(t,9===t.level?2:t.strategy>=Ct||t.level<2?4:0),R(t,3),t.status=113,K(e),0!==t.pending)return t.last_flush=-1,V;if(69===t.status){if(t.gzhead.extra){let o=t.pending,r=(65535&t.gzhead.extra.length)-t.gzindex;for(;t.pending+r>t.pending_buf_size;){let l=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+l),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>o&&(e.adler=$(e.adler,t.pending_buf,t.pending-o,o)),t.gzindex+=l,K(e),0!==t.pending)return t.last_flush=-1,V;o=0,r-=l}let c=new Uint8Array(t.gzhead.extra);t.pending_buf.set(c.subarray(t.gzindex,t.gzindex+r),t.pending),t.pending+=r,t.gzhead.hcrc&&t.pending>o&&(e.adler=$(e.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=73}if(73===t.status){if(t.gzhead.name){let r,o=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>o&&(e.adler=$(e.adler,t.pending_buf,t.pending-o,o)),K(e),0!==t.pending)return t.last_flush=-1,V;o=0}r=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0,R(t,r)}while(0!==r);t.gzhead.hcrc&&t.pending>o&&(e.adler=$(e.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=91}if(91===t.status){if(t.gzhead.comment){let r,o=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>o&&(e.adler=$(e.adler,t.pending_buf,t.pending-o,o)),K(e),0!==t.pending)return t.last_flush=-1,V;o=0}r=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0,R(t,r)}while(0!==r);t.gzhead.hcrc&&t.pending>o&&(e.adler=$(e.adler,t.pending_buf,t.pending-o,o))}t.status=103}if(103===t.status){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(K(e),0!==t.pending))return t.last_flush=-1,V;R(t,255&e.adler),R(t,e.adler>>8&255),e.adler=0}if(t.status=113,K(e),0!==t.pending)return t.last_flush=-1,V}if(0!==e.avail_in||0!==t.lookahead||n!==pe&&666!==t.status){let o=0===t.level?Zi(t,n):t.strategy===Ct?((e,n)=>{let t;for(;;){if(0===e.lookahead&&(ze(e),0===e.lookahead)){if(n===pe)return 1;break}if(e.match_length=0,t=me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(W(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,n===J?(W(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(W(e,!1),0===e.strm.avail_out)?1:2})(t,n):t.strategy===Ao?((e,n)=>{let t,a,o,r;const c=e.window;for(;;){if(e.lookahead<=258){if(ze(e),e.lookahead<=258&&n===pe)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(o=e.strstart-1,a=c[o],a===c[++o]&&a===c[++o]&&a===c[++o])){r=e.strstart+258;do{}while(a===c[++o]&&a===c[++o]&&a===c[++o]&&a===c[++o]&&a===c[++o]&&a===c[++o]&&a===c[++o]&&a===c[++o]&&o<r);e.match_length=258-(r-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(t=me(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(W(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,n===J?(W(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(W(e,!1),0===e.strm.avail_out)?1:2})(t,n):Qe[t.level].func(t,n);if((3===o||4===o)&&(t.status=666),1===o||3===o)return 0===e.avail_out&&(t.last_flush=-1),V;if(2===o&&(n===ko?xo(t):n!==Mi&&(Xt(t,0,0,!1),n===yo&&(be(t.head),0===t.lookahead&&(t.strstart=0,t.block_start=0,t.insert=0))),K(e),0===e.avail_out))return t.last_flush=-1,V}return n!==J?V:t.wrap<=0?Gi:(2===t.wrap?(R(t,255&e.adler),R(t,e.adler>>8&255),R(t,e.adler>>16&255),R(t,e.adler>>24&255),R(t,255&e.total_in),R(t,e.total_in>>8&255),R(t,e.total_in>>16&255),R(t,e.total_in>>24&255)):(Je(t,e.adler>>>16),Je(t,65535&e.adler)),K(e),t.wrap>0&&(t.wrap=-t.wrap),0!==t.pending?V:Gi)},deflateEnd:e=>{if(qe(e))return ae;const n=e.state.status;return e.state=null,113===n?Ee(e,Do):V},deflateSetDictionary:(e,n)=>{let t=n.length;if(qe(e))return ae;const a=e.state,o=a.wrap;if(2===o||1===o&&42!==a.status||a.lookahead)return ae;if(1===o&&(e.adler=Ke(e.adler,n,t,0)),a.wrap=0,t>=a.w_size){0===o&&(be(a.head),a.strstart=0,a.block_start=0,a.insert=0);let _=new Uint8Array(a.w_size);_.set(n.subarray(t-a.w_size,t),0),n=_,t=a.w_size}const r=e.avail_in,c=e.next_in,l=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,ze(a);a.lookahead>=3;){let _=a.strstart,s=a.lookahead-2;do{a.ins_h=ve(a,a.ins_h,a.window[_+3-1]),a.prev[_&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=_,_++}while(--s);a.strstart=_,a.lookahead=2,ze(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,e.next_in=c,e.input=l,e.avail_in=r,a.wrap=o,V},deflateInfo:"pako deflate (from Nodeca project)"};const sr=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var xt={assign:function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const t=n.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(const a in t)sr(t,a)&&(e[a]=t[a])}}return e},flattenChunks:e=>{let n=0;for(let a=0,o=e.length;a<o;a++)n+=e[a].length;const t=new Uint8Array(n);for(let a=0,o=0,r=e.length;a<r;a++){let c=e[a];t.set(c,o),o+=c.length}return t}};let Hi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Hi=!1}const tt=new Uint8Array(256);for(let e=0;e<256;e++)tt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;tt[254]=tt[254]=1;var it={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let n,t,a,o,r,c=e.length,l=0;for(o=0;o<c;o++)t=e.charCodeAt(o),55296==(64512&t)&&o+1<c&&(a=e.charCodeAt(o+1),56320==(64512&a)&&(t=65536+(t-55296<<10)+(a-56320),o++)),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(l),r=0,o=0;r<l;o++)t=e.charCodeAt(o),55296==(64512&t)&&o+1<c&&(a=e.charCodeAt(o+1),56320==(64512&a)&&(t=65536+(t-55296<<10)+(a-56320),o++)),t<128?n[r++]=t:t<2048?(n[r++]=192|t>>>6,n[r++]=128|63&t):t<65536?(n[r++]=224|t>>>12,n[r++]=128|t>>>6&63,n[r++]=128|63&t):(n[r++]=240|t>>>18,n[r++]=128|t>>>12&63,n[r++]=128|t>>>6&63,n[r++]=128|63&t);return n},buf2string:(e,n)=>{const t=n||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,n));let a,o;const r=new Array(2*t);for(o=0,a=0;a<t;){let c=e[a++];if(c<128){r[o++]=c;continue}let l=tt[c];if(l>4)r[o++]=65533,a+=l-1;else{for(c&=2===l?31:3===l?15:7;l>1&&a<t;)c=c<<6|63&e[a++],l--;l>1?r[o++]=65533:c<65536?r[o++]=c:(c-=65536,r[o++]=55296|c>>10&1023,r[o++]=56320|1023&c)}}return((e,n)=>{if(n<65534&&e.subarray&&Hi)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let t="";for(let a=0;a<n;a++)t+=String.fromCharCode(e[a]);return t})(r,o)},utf8border:(e,n)=>{(n=n||e.length)>e.length&&(n=e.length);let t=n-1;for(;t>=0&&128==(192&e[t]);)t--;return t<0||0===t?n:t+tt[e[t]]>n?t:n}},Ki=function hr(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Wi=Object.prototype.toString,{Z_NO_FLUSH:mr,Z_SYNC_FLUSH:pr,Z_FULL_FLUSH:gr,Z_FINISH:br,Z_OK:kt,Z_STREAM_END:vr,Z_DEFAULT_COMPRESSION:wr,Z_DEFAULT_STRATEGY:Cr,Z_DEFLATED:Sr}=ke;function at(e){this.options=xt.assign({level:wr,method:Sr,chunkSize:16384,windowBits:15,memLevel:8,strategy:Cr},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ki,this.strm.avail_out=0;let t=et.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==kt)throw new Error(xe[t]);if(n.header&&et.deflateSetHeader(this.strm,n.header),n.dictionary){let a;if(a="string"==typeof n.dictionary?it.string2buf(n.dictionary):"[object ArrayBuffer]"===Wi.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,t=et.deflateSetDictionary(this.strm,a),t!==kt)throw new Error(xe[t]);this._dict_set=!0}}function ai(e,n){const t=new at(n);if(t.push(e,!0),t.err)throw t.msg||xe[t.err];return t.result}at.prototype.push=function(e,n){const t=this.strm,a=this.options.chunkSize;let o,r;if(this.ended)return!1;for(r=n===~~n?n:!0===n?br:mr,t.input="string"==typeof e?it.string2buf(e):"[object ArrayBuffer]"===Wi.call(e)?new Uint8Array(e):e,t.next_in=0,t.avail_in=t.input.length;;)if(0===t.avail_out&&(t.output=new Uint8Array(a),t.next_out=0,t.avail_out=a),(r===pr||r===gr)&&t.avail_out<=6)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else{if(o=et.deflate(t,r),o===vr)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),o=et.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===kt;if(0!==t.avail_out){if(r>0&&t.next_out>0)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else if(0===t.avail_in)break}else this.onData(t.output)}return!0},at.prototype.onData=function(e){this.chunks.push(e)},at.prototype.onEnd=function(e){e===kt&&(this.result=xt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Rr={Deflate:at,deflate:ai,deflateRaw:function xr(e,n){return(n=n||{}).raw=!0,ai(e,n)},gzip:function kr(e,n){return(n=n||{}).gzip=!0,ai(e,n)},constants:ke};const yt=16209;var Fr=function(n,t){let a,o,r,c,l,_,s,d,S,u,f,p,P,D,v,F,x,h,I,B,g,L,E,b;const y=n.state;a=n.next_in,E=n.input,o=a+(n.avail_in-5),r=n.next_out,b=n.output,c=r-(t-n.avail_out),l=r+(n.avail_out-257),_=y.dmax,s=y.wsize,d=y.whave,S=y.wnext,u=y.window,f=y.hold,p=y.bits,P=y.lencode,D=y.distcode,v=(1<<y.lenbits)-1,F=(1<<y.distbits)-1;e:do{p<15&&(f+=E[a++]<<p,p+=8,f+=E[a++]<<p,p+=8),x=P[f&v];t:for(;;){if(h=x>>>24,f>>>=h,p-=h,h=x>>>16&255,0===h)b[r++]=65535&x;else{if(!(16&h)){if(64&h){if(32&h){y.mode=16191;break e}n.msg="invalid literal/length code",y.mode=yt;break e}x=P[(65535&x)+(f&(1<<h)-1)];continue t}for(I=65535&x,h&=15,h&&(p<h&&(f+=E[a++]<<p,p+=8),I+=f&(1<<h)-1,f>>>=h,p-=h),p<15&&(f+=E[a++]<<p,p+=8,f+=E[a++]<<p,p+=8),x=D[f&F];;){if(h=x>>>24,f>>>=h,p-=h,h=x>>>16&255,16&h){if(B=65535&x,h&=15,p<h&&(f+=E[a++]<<p,p+=8,p<h&&(f+=E[a++]<<p,p+=8)),B+=f&(1<<h)-1,B>_){n.msg="invalid distance too far back",y.mode=yt;break e}if(f>>>=h,p-=h,h=r-c,B>h){if(h=B-h,h>d&&y.sane){n.msg="invalid distance too far back",y.mode=yt;break e}if(g=0,L=u,0===S){if(g+=s-h,h<I){I-=h;do{b[r++]=u[g++]}while(--h);g=r-B,L=b}}else if(S<h){if(g+=s+S-h,h-=S,h<I){I-=h;do{b[r++]=u[g++]}while(--h);if(g=0,S<I){h=S,I-=h;do{b[r++]=u[g++]}while(--h);g=r-B,L=b}}}else if(g+=S-h,h<I){I-=h;do{b[r++]=u[g++]}while(--h);g=r-B,L=b}for(;I>2;)b[r++]=L[g++],b[r++]=L[g++],b[r++]=L[g++],I-=3;I&&(b[r++]=L[g++],I>1&&(b[r++]=L[g++]))}else{g=r-B;do{b[r++]=b[g++],b[r++]=b[g++],b[r++]=b[g++],I-=3}while(I>2);I&&(b[r++]=b[g++],I>1&&(b[r++]=b[g++]))}break}if(64&h){n.msg="invalid distance code",y.mode=yt;break e}x=D[(65535&x)+(f&(1<<h)-1)]}}break}}while(a<o&&r<l);I=p>>3,a-=I,p-=I<<3,f&=(1<<p)-1,n.next_in=a,n.next_out=r,n.avail_in=a<o?o-a+5:5-(a-o),n.avail_out=r<l?l-r+257:257-(r-l),y.hold=f,y.bits=p};const Ur=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Lr=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Or=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Nr=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var nt=(e,n,t,a,o,r,c,l)=>{const _=l.bits;let x,h,I,B,g,E,s=0,d=0,S=0,u=0,f=0,p=0,P=0,D=0,v=0,F=0,L=null;const b=new Uint16Array(16),y=new Uint16Array(16);let Ga,It,Ft,Re=null;for(s=0;s<=15;s++)b[s]=0;for(d=0;d<a;d++)b[n[t+d]]++;for(f=_,u=15;u>=1&&0===b[u];u--);if(f>u&&(f=u),0===u)return o[r++]=20971520,o[r++]=20971520,l.bits=1,0;for(S=1;S<u&&0===b[S];S++);for(f<S&&(f=S),D=1,s=1;s<=15;s++)if(D<<=1,D-=b[s],D<0)return-1;if(D>0&&(0===e||1!==u))return-1;for(y[1]=0,s=1;s<15;s++)y[s+1]=y[s]+b[s];for(d=0;d<a;d++)0!==n[t+d]&&(c[y[n[t+d]]++]=d);if(0===e?(L=Re=c,E=20):1===e?(L=Ur,Re=Lr,E=257):(L=Or,Re=Nr,E=0),F=0,d=0,s=S,g=r,p=f,P=0,I=-1,v=1<<f,B=v-1,1===e&&v>852||2===e&&v>592)return 1;for(;;){Ga=s-P,c[d]+1<E?(It=0,Ft=c[d]):c[d]>=E?(It=Re[c[d]-E],Ft=L[c[d]-E]):(It=96,Ft=0),x=1<<s-P,h=1<<p,S=h;do{h-=x,o[g+(F>>P)+h]=Ga<<24|It<<16|Ft}while(0!==h);for(x=1<<s-1;F&x;)x>>=1;if(0!==x?(F&=x-1,F+=x):F=0,d++,0==--b[s]){if(s===u)break;s=n[t+c[d]]}if(s>f&&(F&B)!==I){for(0===P&&(P=f),g+=S,p=s-P,D=1<<p;p+P<u&&(D-=b[p+P],!(D<=0));)p++,D<<=1;if(v+=1<<p,1===e&&v>852||2===e&&v>592)return 1;I=F&B,o[I]=f<<24|p<<16|g-r}}return 0!==F&&(o[g+F]=s-P<<24|64<<16),l.bits=f,0};const{Z_FINISH:aa,Z_BLOCK:jr,Z_TREES:Dt,Z_OK:Te,Z_STREAM_END:zr,Z_NEED_DICT:Mr,Z_STREAM_ERROR:Q,Z_DATA_ERROR:na,Z_MEM_ERROR:oa,Z_BUF_ERROR:Gr,Z_DEFLATED:ra}=ke,Et=16180,Tt=16190,fe=16191,At=16199,Rt=16200,N=16209,Ra=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Vr(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ae=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<Et||n.mode>16211?1:0},Ia=e=>{if(Ae(e))return Q;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=Et,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(852),n.distcode=n.distdyn=new Int32Array(592),n.sane=1,n.back=-1,Te},Fa=e=>{if(Ae(e))return Q;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,Ia(e)},Ua=(e,n)=>{let t;if(Ae(e))return Q;const a=e.state;return n<0?(t=0,n=-n):(t=5+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?Q:(null!==a.window&&a.wbits!==n&&(a.window=null),a.wrap=t,a.wbits=n,Fa(e))},La=(e,n)=>{if(!e)return Q;const t=new Vr;e.state=t,t.strm=e,t.window=null,t.mode=Et;const a=Ua(e,n);return a!==Te&&(e.state=null),a};let li,ci,Oa=!0;const Xr=e=>{if(Oa){li=new Int32Array(512),ci=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(nt(1,e.lens,0,288,li,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;nt(2,e.lens,0,32,ci,0,e.work,{bits:5}),Oa=!1}e.lencode=li,e.lenbits=9,e.distcode=ci,e.distbits=5},Na=(e,n,t,a)=>{let o;const r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),a>=r.wsize?(r.window.set(n.subarray(t-r.wsize,t),0),r.wnext=0,r.whave=r.wsize):(o=r.wsize-r.wnext,o>a&&(o=a),r.window.set(n.subarray(t-a,t-a+o),r.wnext),(a-=o)?(r.window.set(n.subarray(t-a,t),0),r.wnext=a,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0};var ue={inflateReset:Fa,inflateReset2:Ua,inflateResetKeep:Ia,inflateInit:e=>La(e,15),inflateInit2:La,inflate:(e,n)=>{let t,a,o,r,c,l,_,s,d,S,u,f,p,P,v,F,x,h,I,B,g,L,D=0;const E=new Uint8Array(4);let b,y;const Re=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ae(e)||!e.output||!e.input&&0!==e.avail_in)return Q;t=e.state,t.mode===fe&&(t.mode=16192),c=e.next_out,o=e.output,_=e.avail_out,r=e.next_in,a=e.input,l=e.avail_in,s=t.hold,d=t.bits,S=l,u=_,L=Te;e:for(;;)switch(t.mode){case Et:if(0===t.wrap){t.mode=16192;break}for(;d<16;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}if(2&t.wrap&&35615===s){0===t.wbits&&(t.wbits=15),t.check=0,E[0]=255&s,E[1]=s>>>8&255,t.check=$(t.check,E,2,0),s=0,d=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&s)<<8)+(s>>8))%31){e.msg="incorrect header check",t.mode=N;break}if((15&s)!==ra){e.msg="unknown compression method",t.mode=N;break}if(s>>>=4,d-=4,g=8+(15&s),0===t.wbits&&(t.wbits=g),g>15||g>t.wbits){e.msg="invalid window size",t.mode=N;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=512&s?16189:fe,s=0,d=0;break;case 16181:for(;d<16;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}if(t.flags=s,(255&t.flags)!==ra){e.msg="unknown compression method",t.mode=N;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=N;break}t.head&&(t.head.text=s>>8&1),512&t.flags&&4&t.wrap&&(E[0]=255&s,E[1]=s>>>8&255,t.check=$(t.check,E,2,0)),s=0,d=0,t.mode=16182;case 16182:for(;d<32;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}t.head&&(t.head.time=s),512&t.flags&&4&t.wrap&&(E[0]=255&s,E[1]=s>>>8&255,E[2]=s>>>16&255,E[3]=s>>>24&255,t.check=$(t.check,E,4,0)),s=0,d=0,t.mode=16183;case 16183:for(;d<16;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}t.head&&(t.head.xflags=255&s,t.head.os=s>>8),512&t.flags&&4&t.wrap&&(E[0]=255&s,E[1]=s>>>8&255,t.check=$(t.check,E,2,0)),s=0,d=0,t.mode=16184;case 16184:if(1024&t.flags){for(;d<16;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}t.length=s,t.head&&(t.head.extra_len=s),512&t.flags&&4&t.wrap&&(E[0]=255&s,E[1]=s>>>8&255,t.check=$(t.check,E,2,0)),s=0,d=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(f=t.length,f>l&&(f=l),f&&(t.head&&(g=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(a.subarray(r,r+f),g)),512&t.flags&&4&t.wrap&&(t.check=$(t.check,a,f,r)),l-=f,r+=f,t.length-=f),t.length))break e;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(0===l)break e;f=0;do{g=a[r+f++],t.head&&g&&t.length<65536&&(t.head.name+=String.fromCharCode(g))}while(g&&f<l);if(512&t.flags&&4&t.wrap&&(t.check=$(t.check,a,f,r)),l-=f,r+=f,g)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(0===l)break e;f=0;do{g=a[r+f++],t.head&&g&&t.length<65536&&(t.head.comment+=String.fromCharCode(g))}while(g&&f<l);if(512&t.flags&&4&t.wrap&&(t.check=$(t.check,a,f,r)),l-=f,r+=f,g)break e}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;d<16;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}if(4&t.wrap&&s!==(65535&t.check)){e.msg="header crc mismatch",t.mode=N;break}s=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=fe;break;case 16189:for(;d<32;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}e.adler=t.check=Ra(s),s=0,d=0,t.mode=Tt;case Tt:if(0===t.havedict)return e.next_out=c,e.avail_out=_,e.next_in=r,e.avail_in=l,t.hold=s,t.bits=d,Mr;e.adler=t.check=1,t.mode=fe;case fe:if(n===jr||n===Dt)break e;case 16192:if(t.last){s>>>=7&d,d-=7&d,t.mode=16206;break}for(;d<3;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}switch(t.last=1&s,s>>>=1,d-=1,3&s){case 0:t.mode=16193;break;case 1:if(Xr(t),t.mode=At,n===Dt){s>>>=2,d-=2;break e}break;case 2:t.mode=16196;break;case 3:e.msg="invalid block type",t.mode=N}s>>>=2,d-=2;break;case 16193:for(s>>>=7&d,d-=7&d;d<32;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}if((65535&s)!=(s>>>16^65535)){e.msg="invalid stored block lengths",t.mode=N;break}if(t.length=65535&s,s=0,d=0,t.mode=16194,n===Dt)break e;case 16194:t.mode=16195;case 16195:if(f=t.length,f){if(f>l&&(f=l),f>_&&(f=_),0===f)break e;o.set(a.subarray(r,r+f),c),l-=f,r+=f,_-=f,c+=f,t.length-=f;break}t.mode=fe;break;case 16196:for(;d<14;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}if(t.nlen=257+(31&s),s>>>=5,d-=5,t.ndist=1+(31&s),s>>>=5,d-=5,t.ncode=4+(15&s),s>>>=4,d-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=N;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;d<3;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}t.lens[Re[t.have++]]=7&s,s>>>=3,d-=3}for(;t.have<19;)t.lens[Re[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,b={bits:t.lenbits},L=nt(0,t.lens,0,19,t.lencode,0,t.work,b),t.lenbits=b.bits,L){e.msg="invalid code lengths set",t.mode=N;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;D=t.lencode[s&(1<<t.lenbits)-1],v=D>>>24,F=D>>>16&255,x=65535&D,!(v<=d);){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}if(x<16)s>>>=v,d-=v,t.lens[t.have++]=x;else{if(16===x){for(y=v+2;d<y;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}if(s>>>=v,d-=v,0===t.have){e.msg="invalid bit length repeat",t.mode=N;break}g=t.lens[t.have-1],f=3+(3&s),s>>>=2,d-=2}else if(17===x){for(y=v+3;d<y;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}s>>>=v,d-=v,g=0,f=3+(7&s),s>>>=3,d-=3}else{for(y=v+7;d<y;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}s>>>=v,d-=v,g=0,f=11+(127&s),s>>>=7,d-=7}if(t.have+f>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=N;break}for(;f--;)t.lens[t.have++]=g}}if(t.mode===N)break;if(0===t.lens[256]){e.msg="invalid code -- missing end-of-block",t.mode=N;break}if(t.lenbits=9,b={bits:t.lenbits},L=nt(1,t.lens,0,t.nlen,t.lencode,0,t.work,b),t.lenbits=b.bits,L){e.msg="invalid literal/lengths set",t.mode=N;break}if(t.distbits=6,t.distcode=t.distdyn,b={bits:t.distbits},L=nt(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,b),t.distbits=b.bits,L){e.msg="invalid distances set",t.mode=N;break}if(t.mode=At,n===Dt)break e;case At:t.mode=Rt;case Rt:if(l>=6&&_>=258){e.next_out=c,e.avail_out=_,e.next_in=r,e.avail_in=l,t.hold=s,t.bits=d,Fr(e,u),c=e.next_out,o=e.output,_=e.avail_out,r=e.next_in,a=e.input,l=e.avail_in,s=t.hold,d=t.bits,t.mode===fe&&(t.back=-1);break}for(t.back=0;D=t.lencode[s&(1<<t.lenbits)-1],v=D>>>24,F=D>>>16&255,x=65535&D,!(v<=d);){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}if(F&&!(240&F)){for(h=v,I=F,B=x;D=t.lencode[B+((s&(1<<h+I)-1)>>h)],v=D>>>24,F=D>>>16&255,x=65535&D,!(h+v<=d);){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}s>>>=h,d-=h,t.back+=h}if(s>>>=v,d-=v,t.back+=v,t.length=x,0===F){t.mode=16205;break}if(32&F){t.back=-1,t.mode=fe;break}if(64&F){e.msg="invalid literal/length code",t.mode=N;break}t.extra=15&F,t.mode=16201;case 16201:if(t.extra){for(y=t.extra;d<y;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}t.length+=s&(1<<t.extra)-1,s>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;D=t.distcode[s&(1<<t.distbits)-1],v=D>>>24,F=D>>>16&255,x=65535&D,!(v<=d);){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}if(!(240&F)){for(h=v,I=F,B=x;D=t.distcode[B+((s&(1<<h+I)-1)>>h)],v=D>>>24,F=D>>>16&255,x=65535&D,!(h+v<=d);){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}s>>>=h,d-=h,t.back+=h}if(s>>>=v,d-=v,t.back+=v,64&F){e.msg="invalid distance code",t.mode=N;break}t.offset=x,t.extra=15&F,t.mode=16203;case 16203:if(t.extra){for(y=t.extra;d<y;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}t.offset+=s&(1<<t.extra)-1,s>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=N;break}t.mode=16204;case 16204:if(0===_)break e;if(f=u-_,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=N;break}f>t.wnext?(f-=t.wnext,p=t.wsize-f):p=t.wnext-f,f>t.length&&(f=t.length),P=t.window}else P=o,p=c-t.offset,f=t.length;f>_&&(f=_),_-=f,t.length-=f;do{o[c++]=P[p++]}while(--f);0===t.length&&(t.mode=Rt);break;case 16205:if(0===_)break e;o[c++]=t.length,_--,t.mode=Rt;break;case 16206:if(t.wrap){for(;d<32;){if(0===l)break e;l--,s|=a[r++]<<d,d+=8}if(u-=_,e.total_out+=u,t.total+=u,4&t.wrap&&u&&(e.adler=t.check=t.flags?$(t.check,o,u,c-u):Ke(t.check,o,u,c-u)),u=_,4&t.wrap&&(t.flags?s:Ra(s))!==t.check){e.msg="incorrect data check",t.mode=N;break}s=0,d=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;d<32;){if(0===l)break e;l--,s+=a[r++]<<d,d+=8}if(4&t.wrap&&s!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=N;break}s=0,d=0}t.mode=16208;case 16208:L=zr;break e;case N:L=na;break e;case 16210:return oa;default:return Q}return e.next_out=c,e.avail_out=_,e.next_in=r,e.avail_in=l,t.hold=s,t.bits=d,(t.wsize||u!==e.avail_out&&t.mode<N&&(t.mode<16206||n!==aa))&&Na(e,e.output,e.next_out,u-e.avail_out),S-=e.avail_in,u-=e.avail_out,e.total_in+=S,e.total_out+=u,t.total+=u,4&t.wrap&&u&&(e.adler=t.check=t.flags?$(t.check,o,u,e.next_out-u):Ke(t.check,o,u,e.next_out-u)),e.data_type=t.bits+(t.last?64:0)+(t.mode===fe?128:0)+(t.mode===At||16194===t.mode?256:0),(0===S&&0===u||n===aa)&&L===Te&&(L=Gr),L},inflateEnd:e=>{if(Ae(e))return Q;let n=e.state;return n.window&&(n.window=null),e.state=null,Te},inflateGetHeader:(e,n)=>{if(Ae(e))return Q;const t=e.state;return 2&t.wrap?(t.head=n,n.done=!1,Te):Q},inflateSetDictionary:(e,n)=>{const t=n.length;let a,o,r;return Ae(e)||(a=e.state,0!==a.wrap&&a.mode!==Tt)?Q:a.mode===Tt&&(o=1,o=Ke(o,n,t,0),o!==a.check)?na:(r=Na(e,n,t,t),r?(a.mode=16210,oa):(a.havedict=1,Te))},inflateInfo:"pako inflate (from Nodeca project)"},cs=function ls(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Pa=Object.prototype.toString,{Z_NO_FLUSH:ds,Z_FINISH:fs,Z_OK:ot,Z_STREAM_END:di,Z_NEED_DICT:fi,Z_STREAM_ERROR:us,Z_DATA_ERROR:ja,Z_MEM_ERROR:_s}=ke;function rt(e){this.options=xt.assign({chunkSize:65536,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,0===n.windowBits&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(15&n.windowBits||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ki,this.strm.avail_out=0;let t=ue.inflateInit2(this.strm,n.windowBits);if(t!==ot)throw new Error(xe[t]);if(this.header=new cs,ue.inflateGetHeader(this.strm,this.header),n.dictionary&&("string"==typeof n.dictionary?n.dictionary=it.string2buf(n.dictionary):"[object ArrayBuffer]"===Pa.call(n.dictionary)&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=ue.inflateSetDictionary(this.strm,n.dictionary),t!==ot)))throw new Error(xe[t])}function ui(e,n){const t=new rt(n);if(t.push(e),t.err)throw t.msg||xe[t.err];return t.result}rt.prototype.push=function(e,n){const t=this.strm,a=this.options.chunkSize,o=this.options.dictionary;let r,c,l;if(this.ended)return!1;for(c=n===~~n?n:!0===n?fs:ds,t.input="[object ArrayBuffer]"===Pa.call(e)?new Uint8Array(e):e,t.next_in=0,t.avail_in=t.input.length;;){for(0===t.avail_out&&(t.output=new Uint8Array(a),t.next_out=0,t.avail_out=a),r=ue.inflate(t,c),r===fi&&o&&(r=ue.inflateSetDictionary(t,o),r===ot?r=ue.inflate(t,c):r===ja&&(r=fi));t.avail_in>0&&r===di&&t.state.wrap>0&&0!==e[t.next_in];)ue.inflateReset(t),r=ue.inflate(t,c);switch(r){case us:case ja:case fi:case _s:return this.onEnd(r),this.ended=!0,!1}if(l=t.avail_out,t.next_out&&(0===t.avail_out||r===di))if("string"===this.options.to){let _=it.utf8border(t.output,t.next_out),s=t.next_out-_,d=it.buf2string(t.output,_);t.next_out=s,t.avail_out=a-s,s&&t.output.set(t.output.subarray(_,_+s),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(r!==ot||0!==l){if(r===di)return r=ue.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===t.avail_in)break}}return!0},rt.prototype.onData=function(e){this.chunks.push(e)},rt.prototype.onEnd=function(e){e===ot&&(this.result="string"===this.options.to?this.chunks.join(""):xt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ws={Inflate:rt,inflate:ui,inflateRaw:function hs(e,n){return(n=n||{}).raw=!0,ui(e,n)},ungzip:ui,constants:ke};const{gzip:ks}=Rr;var za=ks,Ps=m(2578);let js=(()=>{class e{constructor(t){this.http=t}fetchFile(t){return function Yn(e,n){const t="object"==typeof n;return new Promise((a,o)=>{const r=new Vn.Ms({next:c=>{a(c),r.unsubscribe()},error:o,complete:()=>{t?a(n.defaultValue):o(new Zn.G)}});e.subscribe(r)})}(this.http.get(t,{responseType:"blob"}))}createAndDownloadZip(t,a){var o=this;return(0,$e.A)(function*(){const r={};for(const l of t)try{console.log(`Fetching file from: ${l}`);const _=yield o.fetchFile(l),s=l.split("/").pop()||`file-${Date.now()}`;r[s]=_,console.log(`Adding file to ZIP: ${s}, Size: ${_.size}`)}catch(_){console.error(`Error downloading file: ${l}`,_)}const c=yield o.createZipBlob(r);o.downloadZip(c,a)})()}createZipBlob(t){var a=this;return(0,$e.A)(function*(){const o=[];for(const c in t)if(t.hasOwnProperty(c)){const l=t[c],_=yield a.blobToUint8Array(l),s=za(_,{level:9});o.push(a.createFileEntry(c,s))}return new Blob(o,{type:"application/zip"})})()}blobToUint8Array(t){return(0,$e.A)(function*(){const a=yield t.arrayBuffer();return new Uint8Array(a)})()}createFileEntry(t,a){const o=new Uint8Array([80,75,3,4]);return new Uint8Array([...o,...a])}downloadZip(t,a){(0,Ps.saveAs)(t,a)}static#e=this.\u0275fac=function(a){return new(a||e)(i.KVO(z.Qq))};static#t=this.\u0275prov=i.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const zs=()=>[5,10,20];function Ms(e,n){1&e&&i.nrm(0,"i-tabler",16)}function Gs(e,n){1&e&&(i.j41(0,"mat-error"),i.EFF(1," Case ID is required. "),i.k0s())}function $s(e,n){1&e&&(i.j41(0,"mat-error"),i.EFF(1," Case ID must be at least 3 characters long. "),i.k0s())}function Bs(e,n){1&e&&(i.j41(0,"mat-error"),i.EFF(1," Case ID cannot exceed 50 characters. "),i.k0s())}function Zs(e,n){1&e&&i.nrm(0,"i-tabler",16)}function Vs(e,n){1&e&&(i.j41(0,"mat-error"),i.EFF(1," Name cannot exceed 300 characters. "),i.k0s())}function Ys(e,n){if(1&e){const t=i.RV6();i.j41(0,"mat-card-actions",17)(1,"button",18),i.bIt("click",function(){i.eBV(t);const o=i.XpG(2);return i.Njj(o.clickBack())}),i.j41(2,"mat-icon",19),i.EFF(3,"arrow_back"),i.k0s(),i.EFF(4," Back"),i.k0s(),i.j41(5,"button",20),i.bIt("click",function(){i.eBV(t);const o=i.XpG(2);return i.Njj(o.clickCreateCase())}),i.EFF(6,"Save This"),i.k0s()()}if(2&e){const t=i.XpG(2);i.R7$(5),i.Y8G("disabled",t.form.invalid||t.isReadOnly)}}function Xs(e,n){if(1&e&&(i.j41(0,"div",4)(1,"div",5)(2,"mat-card",7)(3,"mat-card-content")(4,"form",8)(5,"div",4)(6,"div",5)(7,"mat-label",9),i.DNE(8,Ms,1,0,"i-tabler",10),i.EFF(9," Case ID "),i.k0s(),i.j41(10,"mat-form-field",11),i.nrm(11,"input",12),i.DNE(12,Gs,2,0,"mat-error",13)(13,$s,2,0,"mat-error",13)(14,Bs,2,0,"mat-error",13),i.k0s()(),i.j41(15,"div",5)(16,"mat-label",9),i.DNE(17,Zs,1,0,"i-tabler",10),i.EFF(18," Description"),i.k0s(),i.j41(19,"mat-form-field",11),i.nrm(20,"textarea",14),i.DNE(21,Vs,2,0,"mat-error",13),i.k0s()()(),i.DNE(22,Ys,7,1,"mat-card-actions",15),i.k0s()()()()()),2&e){const t=i.XpG();i.R7$(4),i.Y8G("formGroup",t.form),i.R7$(4),i.Y8G("ngIf",!t.isAdmin),i.R7$(3),i.Y8G("disabled",!t.isAdmin),i.R7$(),i.Y8G("ngIf",t.f.case_id.hasError("required")&&(t.f.case_id.touched||t.f.case_id.dirty)),i.R7$(),i.Y8G("ngIf",t.f.case_id.hasError("minlength")&&(t.f.case_id.touched||t.f.case_id.dirty)),i.R7$(),i.Y8G("ngIf",t.f.case_id.hasError("maxlength")&&(t.f.case_id.touched||t.f.case_id.dirty)),i.R7$(3),i.Y8G("ngIf",!t.isAdmin),i.R7$(3),i.Y8G("disabled",!t.isAdmin),i.R7$(),i.Y8G("ngIf",t.f.description.hasError("maxlength")&&(t.f.description.touched||t.f.description.dirty)),i.R7$(),i.Y8G("ngIf",t.isAdmin)}}function Hs(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",21)(1,"button",22),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.backToCase())}),i.j41(2,"mat-icon",19),i.EFF(3,"arrow_back"),i.k0s()(),i.j41(4,"app-file-upload-ui",23),i.bIt("backToCaseDetails",function(o){i.eBV(t);const r=i.XpG();return i.Njj(r.handleBackToCaseDetailsEvent(o))}),i.k0s()()}if(2&e){const t=i.XpG();i.R7$(4),i.Y8G("caseId",t.caseId)}}function Ks(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",30)(1,"button",36),i.bIt("click",function(){i.eBV(t);const o=i.XpG(3);return i.Njj(o.openFileUploadDialog())}),i.j41(2,"mat-icon",37),i.EFF(3,"upload_file"),i.k0s(),i.EFF(4," Upload Files "),i.k0s()()}if(2&e){const t=i.XpG(3);i.R7$(),i.Y8G("disabled",t.enableDownloadSelected||t.isReadOnly)}}function Ws(e,n){if(1&e){const t=i.RV6();i.j41(0,"button",36),i.bIt("click",function(){i.eBV(t);const o=i.XpG(3);return i.Njj(o.downloadConfirm())}),i.j41(1,"mat-icon",38),i.EFF(2,"download_file"),i.k0s(),i.EFF(3," Download Files "),i.k0s()}if(2&e){const t=i.XpG(3);i.Y8G("disabled",!(t.selection.hasValue()&&t.selection.selected.length<=5))}}function Js(e,n){1&e&&(i.j41(0,"button",39)(1,"mat-icon"),i.nrm(2,"mat-spinner",40),i.k0s(),i.EFF(3," Download Files "),i.k0s()),2&e&&i.Y8G("disabled",!0)}function Qs(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",41)(1,"mat-form-field",42)(2,"input",43),i.bIt("keyup",function(o){i.eBV(t);const r=i.XpG(3);return i.Njj(r.applyFilter(o))}),i.k0s()()()}}function qs(e,n){if(1&e){const t=i.RV6();i.j41(0,"th",55)(1,"mat-checkbox",56),i.bIt("change",function(o){i.eBV(t);const r=i.XpG(4);return i.Njj(o?r.toggleAllRows():null)}),i.k0s()()}if(2&e){const t=i.XpG(4);i.R7$(),i.Y8G("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function el(e,n){if(1&e){const t=i.RV6();i.j41(0,"td",57)(1,"mat-checkbox",58),i.bIt("click",function(o){return i.eBV(t),i.Njj(o.stopPropagation())})("change",function(o){const r=i.eBV(t).$implicit,c=i.XpG(4);return i.Njj(o?c.selection.toggle(r):null)}),i.k0s()()}if(2&e){const t=n.$implicit,a=i.XpG(4);i.R7$(),i.Y8G("checked",a.selection.isSelected(t))("aria-label",a.checkboxLabel(t))}}function tl(e,n){if(1&e&&(i.j41(0,"td",59)(1,"div",60),i.nrm(2,"i-tabler",61),i.j41(3,"div",62)(4,"div"),i.EFF(5),i.k0s(),i.j41(6,"div",63),i.EFF(7),i.k0s()()()()),2&e){const t=n.$implicit;i.R7$(5),i.JRh(t.document_name),i.R7$(2),i.SpI("",t.file_size,"MB")}}function il(e,n){1&e&&(i.j41(0,"a",66),i.nrm(1,"i-tabler",67),i.k0s())}function al(e,n){1&e&&(i.j41(0,"a",66),i.nrm(1,"i-tabler",68),i.k0s())}function nl(e,n){1&e&&(i.j41(0,"a",66),i.nrm(1,"i-tabler",69),i.k0s())}function ol(e,n){if(1&e&&(i.j41(0,"td",59)(1,"div",64),i.DNE(2,il,2,0,"a",65)(3,al,2,0,"a",65)(4,nl,2,0,"a",65),i.k0s()()),2&e){const t=i.XpG(4);i.R7$(2),i.Y8G("ngIf",t.isAdmin),i.R7$(),i.Y8G("ngIf",t.isAdmin),i.R7$(),i.Y8G("ngIf",!t.isAdmin)}}function rl(e,n){1&e&&i.nrm(0,"tr",70)}function sl(e,n){if(1&e&&(i.j41(0,"div",44)(1,"div",45)(2,"div",4),i.nrm(3,"div",46),i.k0s()(),i.j41(4,"table",47),i.qex(5,48),i.DNE(6,qs,2,3,"th",49)(7,el,2,2,"td",50),i.bVm(),i.qex(8,51),i.DNE(9,tl,8,2,"td",52),i.bVm(),i.qex(10,53),i.DNE(11,ol,5,3,"td",52),i.bVm(),i.DNE(12,rl,1,0,"tr",54),i.k0s()()),2&e){const t=i.XpG(3);i.R7$(4),i.Y8G("dataSource",t.dataSource),i.R7$(8),i.Y8G("matRowDefColumns",t.displayedColumns)}}function ll(e,n){if(1&e&&(i.j41(0,"div",5)(1,"mat-card",25)(2,"mat-card-header")(3,"div",26)(4,"div",27)(5,"mat-label",28),i.EFF(6),i.k0s()()(),i.j41(7,"div",26),i.DNE(8,Ks,5,1,"div",29),i.j41(9,"div",30),i.DNE(10,Ws,4,1,"button",31)(11,Js,4,1,"button",32),i.k0s()()(),i.j41(12,"mat-card-content"),i.DNE(13,Qs,3,0,"div",33)(14,sl,13,2,"div",34),i.nrm(15,"mat-paginator",35),i.k0s()()()),2&e){const t=i.XpG(2);i.R7$(6),i.SpI(" Documents (",t.documentTableData.length,") "),i.R7$(2),i.Y8G("ngIf",t.isAdmin),i.R7$(2),i.Y8G("ngIf",!t.enableDownloadSelected),i.R7$(),i.Y8G("ngIf",t.enableDownloadSelected),i.R7$(2),i.Y8G("ngIf",!t.isCaseCreation),i.R7$(),i.Y8G("ngIf",!t.isCaseCreation),i.R7$(),i.Y8G("pageSizeOptions",i.lJ4(7,zs))}}function cl(e,n){if(1&e&&(i.j41(0,"div",4),i.DNE(1,ll,16,8,"div",24),i.k0s()),2&e){const t=i.XpG();i.R7$(),i.Y8G("ngIf",!t.isCaseCreation)}}function dl(e,n){if(1&e){const t=i.RV6();i.j41(0,"button",75),i.bIt("click",function(){i.eBV(t);const o=i.XpG(2);return i.Njj(o.deleteConfirmation())}),i.EFF(1,"Delete"),i.k0s()}if(2&e){const t=i.XpG(2);i.Y8G("disabled",t.isReadOnly)}}function fl(e,n){if(1&e&&(i.j41(0,"mat-accordion",71)(1,"mat-expansion-panel",72)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),i.EFF(4," Remove This Case "),i.j41(5,"mat-icon"),i.EFF(6,"delete"),i.k0s()()(),i.j41(7,"mat-panel-description",73),i.DNE(8,dl,2,1,"button",74),i.k0s()()()),2&e){const t=i.XpG();i.R7$(),i.Y8G("expanded",!1),i.R7$(7),i.Y8G("ngIf",!t.isCaseCreation)}}let ul=(()=>{class e{constructor(t,a,o,r,c,l,_,s){this.location=t,this.router=a,this.activatedRoute=o,this.alertService=r,this.apiService=c,this.authService=l,this.fullPageLoaderService=_,this.fileDownloadService=s,this.isAdmin=!1,this.caseId="",this.isCaseCreation=!1,this.isReadOnly=!0,this.isLoading=!0,this.documentTableData=[],this.userTableData=[],this.displayedColumns=["select","document_name","action"],this.selection=new hi.CB(!0,[]),this.enableDownloadSelected=!1,this.dataSource=new w.I6,this.removeDialogTitle="Do you want to remove?",this.messageBodayKey="",this.editRouterLink="",this.caseName="CASE_2012_SPE_15_1",this.caseDescription="Test description",this.isUpload=!1,this.selectedFilesList=[],this.deleteConfirmDialog=(0,i.WQX)(Fe.bZ),this.documentUploadDialog=(0,i.WQX)(Fe.bZ),this.separatorKeysCodes=[gt.Fm,gt.KE],this.currentUserOrGroup=(0,i.geq)(""),this.usersOrGroups=(0,i.vPA)([]),this.allUsersOrGroups=(0,i.vPA)([{name:"Dilupa",id:"100WS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"1",name:"Dilupa Marasinghe",email:"test@gmail.com",role:A.N.ADMIN,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-1.jpg"}},{name:"CASE November 1 -23",id:"CASE_441_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"CASE Jan 3 -23",id:"CASE_201_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Randima",id:"102RANWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"3",name:"Randima Senanayake",email:"test@gmail.com",role:A.N.USER,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-3.jpg"}},{name:"CASE Mrch 3 -12",id:"CASE_011_NOV",isGroup:!0,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:null},{name:"Kasun",id:"100KSWS",isGroup:!1,profile_image:"assets/images/profile/user-1.jpg",email:"test@gmail.com",user:{user_id:"5",name:"K.S.C.Janith",email:"test@gmail.com",role:A.N.USER,status:A.z.DEACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-5.jpg"}}]),this.filteredUsersOrGroups=(0,i.EWP)(()=>{const d=this.currentUserOrGroup().toLowerCase(),S=new Set(this.usersOrGroups().map(u=>u.id));return this.allUsersOrGroups().filter(u=>!S.has(u.id)).filter(u=>u.name.toLowerCase().includes(d))}),this.announcer=(0,i.WQX)(mi.Ai),this.http=(0,i.WQX)(z.Qq),this.filteredFruits=(0,i.EWP)(()=>{const d=this.currentUserOrGroup().toLowerCase(),S=new Set(this.usersOrGroups().map(u=>u.id));return this.allUsersOrGroups().filter(u=>!S.has(u.id)).filter(u=>u.name.toLowerCase().includes(d))}),this.form=new O.gE({case_id:new O.MJ("",[O.k0.required,O.k0.minLength(3),O.k0.maxLength(50)]),description:new O.MJ("",[O.k0.maxLength(300)])})}get f(){return this.form.controls}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.isAdmin=this.authService.hasRole(A.N.ADMIN),!this.isAdmin&&this.form&&(this.f.case_id.disable(),this.f.description.disable()),this.enableDesableFrom(!this.isAdmin),this.isReadOnly=!this.isAdmin,this.activatedRoute.queryParams.subscribe(t=>{t.id&&(this.caseId=t.id,this.loadCaseData())}),this.userTableData=[{user_id:"1",name:"Dilupa Marasinghe",email:"test@gmail.com",role:A.N.ADMIN,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-1.jpg",mobileNumber:"+94712390348"},{user_id:"2",name:"Asith siriwardhana",email:"test@gmail.com",role:A.N.USER,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-2.jpg",mobileNumber:"+94712390348"},{user_id:"3",name:"Kasun janaka",email:"test@gmail.com",role:A.N.USER,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-3.jpg",mobileNumber:"+94712390348"},{user_id:"4",name:"Herath P.L.G",email:"test@gmail.com",role:A.N.USER,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-4.jpg",mobileNumber:"+94712390348"},{user_id:"5",name:"K.S.C.Janith",email:"test@gmail.com",role:A.N.USER,status:A.z.DEACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-5.jpg",mobileNumber:"+94712390348"},{user_id:"6",name:"Kamal Senath",email:"test@gmail.com",role:A.N.USER,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-6.jpg",mobileNumber:"+94712390348"},{user_id:"7",name:"Lal Guruge",email:"test@gmail.com",role:A.N.USER,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-7.jpg",mobileNumber:"+94712390348"},{user_id:"8",name:"Sahan H.L.R",email:"test@gmail.com",role:A.N.USER,status:A.z.ACTIVE,created_date:"202-10-27",profile_image:"assets/images/profile/user-8.jpg",mobileNumber:"+94712390348"}]}onToggleChange(){this.isAdmin?(this.f.case_id.enable(),this.f.description.enable()):(this.f.case_id.disable(),this.f.description.disable())}backToCase(){this.isUpload=!1}handleBackToCaseDetailsEvent(t){t&&(this.isUpload=!1,this.loadCaseData())}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}downloadConfirm(){if(this.selection.selected.length>0){const t=this.selection.selected.map(o=>o.document_name),a=this.generateHtmlList(t);this.alertService.confirmAlertWithHtml("Do you want to download below documents?",a,"warning",!0,"No",!0,"Yes, Proceed",!1,this.downloadSelected.bind(this))}}downloadConfirmForIconClick(t,a){if(t&&a){const r=this.generateHtmlList([a]);this.alertService.confirmAlertWithHtml("Do you want to download below documents?",r,"warning",!0,"No",!0,"Yes, Proceed",!1,this.sendSingleFileDownloadRequest.bind(this,t,a))}}generateHtmlList(t){return`<ul style="list-style-type: disclosure-closed;justify-content: center; display: grid;">\n    ${t.map(a=>`<li>${a}</li>`).join("")}\n  </ul>`}downloadSelected(){this.selection.selected.length>0?(console.log(this.selection.selected),this.sendBatchDownloadRequest()):this.alertService.errorToaster("top-end","Please select documents to download")}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.document_id}`:(this.isAllSelected()?"Deselect":"Select")+" all"}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}add(t){const a=(t.value||"").trim();if(a){const o=this.allUsersOrGroups().find(r=>r.name.toLowerCase()===a.toLowerCase());o&&this.usersOrGroups.update(r=>[...r,o])}this.currentUserOrGroup.set("")}updateFilteredData(){this.filteredUsersOrGroups()}handleBackspace(){if(!this.currentUserOrGroup()){this.usersOrGroups()}}selected(t){const a=this.allUsersOrGroups().find(o=>o.name===t.option.value.name);a&&(this.usersOrGroups.update(o=>[...o,a]),this.allUsersOrGroups.update(o=>o.filter(r=>r.id!==a.id))),this.currentUserOrGroup.set("")}openFileUploadDialog(){this.isReadOnly||this.enableDownloadSelected||(this.isUpload=!0)}sendBatchDownloadRequest(){var a,t=this;this.selectedFilesList=[],this.selectedFilesList=this.selection.selected.map(a=>a.file_url),this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.fileBatchDownload(this.caseId,this.selectedFilesList).pipe((0,dt.W)(a=>{throw console.error("Error during file download:",a),this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),a})).subscribe({next:(a=(0,$e.A)(function*(o){t.fullPageLoaderService.setLoadingStatus(!1),t.alertService.successToster("center","Your download will begin now.",3e3),yield t.fileDownloadService.createAndDownloadZip(o.data,"my-files.zip")}),function(r){return a.apply(this,arguments)}),error:a=>{this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),console.error("Error in subscription:",a)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Batch download request completed.")}})}sendSingleFileDownloadRequest(t,a){var r,o=this;this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.singleFileDownload(this.caseId,t).pipe((0,dt.W)(r=>{throw console.error("Error during single file download:",r),this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),r})).subscribe({next:(r=(0,$e.A)(function*(c){o.alertService.successToster("center","Your file download is starting now.",3e3),o.fullPageLoaderService.setLoadingStatus(!1)}),function(l){return r.apply(this,arguments)}),error:r=>{this.fullPageLoaderService.setLoadingStatus(!1),this.alertService.errorToaster("top-end","An error occurred. Please try again later."),console.error("Error in subscription:",r)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Single file download request completed.")}})}downloadSingleFile(t,a){const o=window.URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(o)}deleteConfirmation(){this.alertService.confirmAlert("Are you sure?",`Do you want to remove this Case?  ID: ${this.caseData.case_id}?`,"warning",!0,"No",!0,"Yes, Proceed",!0,this.removeCase.bind(this))}clickCreateCase(){this.isReadOnly||this.form.disabled||this.form.invalid||this.alertService.confirmAlert("Are you sure?",`Do you want to create this case with Case ID: ${this.form.value.case_id}`,"warning",!0,"No",!0,"Yes, Proceed",!1,this.submit.bind(this))}submit(){this.form.invalid?console.error("Form is invalid"):(this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.createNewCase({case_id:this.form.value.case_id,description:this.form.value.description}).subscribe({next:a=>{const o={id:a.data.id};console.log("Case creation successful:",a),this.alertService.successAlert("center","Case creation success","",3e3),this.router.navigate(["/document-managemnt/single-case"],{queryParams:o})},error:a=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Registration failed:",a),this.alertService.errorAlert("center","Case creation failed",a.error.errorCode===Y.C.ALREADY_EXIST||a.error.errorCode===Y.C.ACCESSDENIED?a.error.message:"",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case creation request completed.")}}))}removeCase(){!this.form.invalid||this.isCaseCreation||this.isReadOnly?(this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.removeCase(this.caseId).subscribe({next:t=>{console.log("Case deleation successful:",t),this.alertService.successAlert("center","Case removed successfully","",3e3),this.router.navigate(["/document-managemnt/document-upload"])},error:t=>{this.fullPageLoaderService.setLoadingStatus(!1),console.error("Registration failed:",t),this.alertService.errorAlert("center","Failed to remove the Case",t.error.errorCode===Y.C.NOT_FOUND||t.error.errorCode===Y.C.ACCESSDENIED?t.error.message:"",3e3,!1,"",!1)},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case creation request completed.")}})):console.error("Form is invalid")}enableDesableFrom(t){t?this.form.disable():this.form.enable()}loadCaseData(){if(!this.caseId)return this.isLoading=!0,this.isCaseCreation=!0,void console.error("User Id is invalid");this.isReadOnly=!Ue.q.hasCommonEditPermission(this.authService),this.isCaseCreation=!1,this.fullPageLoaderService.setLoadingStatus(!0),this.apiService.getOneCase(this.caseId).subscribe({next:t=>{console.log("Case fetching successful:",t),this.caseData=t.data,this.form.patchValue(this.caseData),this.isReadOnly&&this.form.disable(),this.documentTableData=this.caseData.documents,this.loadDocumentTableData(),console.log("this.caseData"),console.log(this.caseData),console.log("this.caseData"),this.isLoading=!1},error:t=>{this.enableDesableFrom(!0),this.fullPageLoaderService.setLoadingStatus(!1),console.error("Case loading failed:",t),t.error.errorCode===Y.C.NOT_FOUND?this.alertService.errorAlert("center","Case not found",t.error.message,3e3,!1,"",!1):t.error.errorCode===Y.C.ACCESSDENIED?this.alertService.errorAlert("center","You are not permitted to load this case",t.error.message,4e3,!1,"",!1):this.alertService.errorAlert("center","Error while loading case details","",3e3,!1,"",!1),this.router.navigate(["/document-managemnt/document-upload"])},complete:()=>{this.fullPageLoaderService.setLoadingStatus(!1),console.log("Case loading request completed.")}})}loadDocumentTableData(){this.dataSource=new w.I6(this.documentTableData),this.dataSource.paginator=this.paginator}clickBack(){this.location.back()}static#e=this.\u0275fac=function(a){return new(a||e)(i.rXU(M.aZ),i.rXU(j.Ix),i.rXU(j.nX),i.rXU(ft.I),i.rXU(q),i.rXU(ut.u),i.rXU(_t.J),i.rXU(js))};static#t=this.\u0275cmp=i.VBU({type:e,selectors:[["app-single-case-table-pagination"]],viewQuery:function(a,o){if(1&a&&i.GBs(se.iy,5),2&a){let r;i.mGM(r=i.lsd())&&(o.paginator=r.first)}},inputs:{currentUserOrGroup:[1,"currentUserOrGroup"]},outputs:{currentUserOrGroup:"currentUserOrGroupChange"},standalone:!0,features:[i.Jv_([q,ut.u,{provide:Ce.$T,useValue:{expandedHeight:"48px",collapsedHeight:"48px",animationDuration:"225ms cubic-bezier(0.4,0.0,0.2,1)"}}]),i.aNF],decls:10,vars:6,consts:[[1,"container"],[3,"change","ngModelChange","ngModel"],["class","row",4,"ngIf"],["class","row justify-content-start",4,"ngIf"],[1,"row"],[1,"col"],["class","m-r-8","mat-flat-button","","color","warn",4,"ngIf"],[1,"b-1","shadow-none"],[3,"formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-2","d-block"],["style","color: black; vertical-align: middle; margin-bottom: 3px;","name","lock","class","icon-22",4,"ngIf"],["appearance","outline","color","primary",1,"w-100","m-b-0"],["formControlName","case_id","matInput","","placeholder","","value","CASE_NOV_102",3,"disabled"],[4,"ngIf"],["formControlName","description","matInput","","value","Test Description about case",3,"disabled"],["align","end",4,"ngIf"],["name","lock",1,"icon-22",2,"color","black","vertical-align","middle","margin-bottom","3px"],["align","end"],["type","button","mat-stroked-button","","color","warn",1,"m-r-10",3,"click"],[2,"font-size","1.4rem"],["type","button","mat-flat-button","","color","primary",1,"m-r-8",3,"click","disabled"],[1,"row","justify-content-start"],["mat-button","",3,"click"],[3,"backToCaseDetails","caseId"],["class","col",4,"ngIf"],[1,"document-card","b-1","shadow-none"],[1,"row","justify-content-between"],[1,"col","p-t-4"],[1,"mat-subtitle-1","f-s-18","f-w-600"],["class","col-sm-6 col-md-6 col-lg-6 p-t-6",4,"ngIf"],[1,"col-sm-6","col-md-6","col-lg-6","p-t-6"],["mat-stroked-button","",3,"disabled","click",4,"ngIf"],["class","download-mat-spinner","mat-stroked-button","",3,"disabled",4,"ngIf"],["class","col-left",4,"ngIf"],["class","table-responsive",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-stroked-button","",3,"click","disabled"],["aria-hidden","false",2,"color","#4456e9"],["aria-hidden","false",2,"color","#24db0e"],["mat-stroked-button","",1,"download-mat-spinner",3,"disabled"],["color","accent","diameter","20"],[1,"col-left"],["appearance","outline","color","primary",1,"w-50","m-b-0"],["matInput","","placeholder","Filter",3,"keyup"],[1,"table-responsive"],[1,"justify-content-between"],[1,"col","align-items-start","d-flex","align-items-center","gap-2"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","document_name"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","action"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[3,"change","checked","indeterminate","aria-label"],["mat-cell",""],[3,"click","change","checked","aria-label"],["mat-cell","",1,"mat-body-1"],[1,"d-flex","align-items-center"],["name","file-type-pdf",1,"icon-20",2,"color","rgb(190, 8, 8)","font-weight","bold"],[1,"d-flex","flex-column"],[2,"font-size","12px","color","gray","line-height","1"],[1,"d-flex","justify-content-center","gap-4"],["class","cursor-pointer",4,"ngIf"],[1,"cursor-pointer"],["name","edit",1,"icon-22"],["name","trash",1,"icon-22",2,"color","red"],["name","download",1,"icon-22",2,"color","rgb(16, 152, 6)","font-weight","bold"],["mat-row",""],["mat-flat-button","","color","warn",1,"m-r-8"],[3,"expanded"],[2,"justify-content","center"],["class","m-r-8","mat-flat-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","warn",1,"m-r-8",3,"click","disabled"]],template:function(a,o){1&a&&(i.j41(0,"div",0)(1,"p")(2,"mat-slide-toggle",1),i.bIt("change",function(){return o.onToggleChange()}),i.mxI("ngModelChange",function(c){return i.DH7(o.isAdmin,c)||(o.isAdmin=c),c}),i.EFF(3),i.k0s()(),i.DNE(4,Xs,23,10,"div",2)(5,Hs,5,1,"div",3)(6,cl,2,1,"div",2),i.j41(7,"div",4)(8,"div",5),i.DNE(9,fl,9,2,"mat-accordion",6),i.k0s()()()),2&a&&(i.R7$(2),i.R50("ngModel",o.isAdmin),i.R7$(),i.JRh(o.isAdmin?"Admin View":"User View"),i.R7$(),i.Y8G("ngIf",!o.isUpload),i.R7$(),i.Y8G("ngIf",o.isUpload&&o.isAdmin),i.R7$(),i.Y8G("ngIf",!o.isUpload),i.R7$(3),i.Y8G("ngIf",!o.isCaseCreation&&o.isAdmin&&!o.isUpload))},dependencies:[w.tP,w.Zl,w.tL,w.cC,w.YV,w.iL,w.KS,w.$R,w.NB,M.MD,M.bT,O.YN,O.qT,O.me,O.BC,O.cb,O.vS,we.RG,we.rl,we.nJ,we.TL,O.X1,O.j4,O.JD,G.Hu,G.RN,G.YY,G.m2,G.MM,re.G,mt.So,ht.fg,le.sG,Ce.BS,Ce.GK,Ce.Z2,Ce.WN,Ce.Q6,Z.$z,te.An,Nt.LG,se.iy,te.m_,_e.Cn,Z.Hl,le.mV,C.X4,C.Jc,T.Ph,j.iI,Ot.Wk,mt.g7,pi.YN,pt.jL,Bn,Nt.D6,Lt.y,Ce.MY],styles:[".mat-column-select[_ngcontent-%COMP%]{padding-right:0!important}.document-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{display:inline-block}.download-mat-spinner[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{width:18px!important;height:18px!important}mat-accordion[_ngcontent-%COMP%]{display:flex;justify-content:end}mat-panel-title[_ngcontent-%COMP%]{color:#f14d7c!important}mat-panel-description[_ngcontent-%COMP%]{justify-content:center}mat-expansion-panel-header[_ngcontent-%COMP%]   .mat-expansion-indicator[_ngcontent-%COMP%]{visibility:hidden!important}"]})}return e})(),_l=(()=>{class e{static#e=this.\u0275fac=function(a){return new(a||e)};static#t=this.\u0275cmp=i.VBU({type:e,selectors:[["app-single-case-details"]],standalone:!0,features:[i.aNF],decls:1,vars:0,template:function(a,o){1&a&&i.nrm(0,"app-single-case-table-pagination")},dependencies:[ul]})}return e})();var Ma=m(2014);const hl=[{path:"",children:[{path:"document-upload",component:rn,canActivate:[Ma.K],data:{title:"Available Cases",expectedRole:A.N.ADMIN}},{path:"document-access",component:Tn,canActivate:[Ma.K],data:{title:"Manage Document Access",expectedRole:A.N.ADMIN}},{path:"single-case",component:_l,data:{title:"Case Detail"}}]}]},2578:function(Ut,st){var m,G;void 0!==(G="function"==typeof(m=function(){"use strict";function re(C,T,j){var U=new XMLHttpRequest;U.open("GET",C),U.responseType="blob",U.onload=function(){le(U.response,T,j)},U.onerror=function(){console.error("could not download file")},U.send()}function te(C){var T=new XMLHttpRequest;T.open("HEAD",C,!1);try{T.send()}catch{}return 200<=T.status&&299>=T.status}function _e(C){try{C.dispatchEvent(new MouseEvent("click"))}catch{var T=document.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),C.dispatchEvent(T)}}var Z="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,se=Z.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),le=Z.saveAs||("object"!=typeof window||window!==Z?function(){}:"download"in HTMLAnchorElement.prototype&&!se?function(C,T,j){var U=Z.URL||Z.webkitURL,z=document.createElement("a");z.download=T=T||C.name||"download",z.rel="noopener","string"==typeof C?(z.href=C,z.origin===location.origin?_e(z):te(z.href)?re(C,T,j):_e(z,z.target="_blank")):(z.href=U.createObjectURL(C),setTimeout(function(){U.revokeObjectURL(z.href)},4e4),setTimeout(function(){_e(z)},0))}:"msSaveOrOpenBlob"in navigator?function(C,T,j){if(T=T||C.name||"download","string"!=typeof C)navigator.msSaveOrOpenBlob(function w(C,T){return typeof T>"u"?T={autoBom:!1}:"object"!=typeof T&&(console.warn("Deprecated: Expected third argument to be a object"),T={autoBom:!T}),T.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(C.type)?new Blob(["\ufeff",C],{type:C.type}):C}(C,j),T);else if(te(C))re(C,T,j);else{var U=document.createElement("a");U.href=C,U.target="_blank",setTimeout(function(){_e(U)})}}:function(C,T,j,U){if((U=U||open("","_blank"))&&(U.document.title=U.document.body.innerText="downloading..."),"string"==typeof C)return re(C,T,j);var z="application/octet-stream"===C.type,i=/constructor/i.test(Z.HTMLElement)||Z.safari,lt=/CriOS\/[\d]+/.test(navigator.userAgent);if((lt||z&&i||se)&&typeof FileReader<"u"){var q=new FileReader;q.onloadend=function(){var he=q.result;he=lt?he:he.replace(/^data:[^;]*;/,"data:attachment/file;"),U?U.location.href=he:location=he,U=null},q.readAsDataURL(C)}else{var ct=Z.URL||Z.webkitURL,Ie=ct.createObjectURL(C);U?U.location=Ie:location.href=Ie,U=null,setTimeout(function(){ct.revokeObjectURL(Ie)},4e4)}});Z.saveAs=le.saveAs=le,Ut.exports=le})?m.apply(st,[]):m)&&(Ut.exports=G)}}]);